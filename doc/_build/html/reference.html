

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reference Guide &mdash; LightVegeManager 0.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Additionnal Functionality" href="others.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> LightVegeManager
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="presentation.html">Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture of the tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="inputs.html">Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="others.html">Additionnal Functionality</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Reference Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager">LightVegeManager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_CARIBUinputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_CARIBUinputs</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-caribuinputs">LightVegeManager_CARIBUinputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_RATPinputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_RATPinputs</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-ratpinputs">LightVegeManager_RATPinputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_VTK"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_VTK</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-vtk">LightVegeManager_VTK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_basicgeometry"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_basicgeometry</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-basicgeometry">LightVegeManager_basicgeometry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_buildRATPscene"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_buildRATPscene</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-buildratpscene">LightVegeManager_buildRATPscene</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_defaultvalues"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_defaultvalues</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-defaultvalues">LightVegeManager_defaultvalues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_leafangles"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_leafangles</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-leafangles">LightVegeManager_leafangles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_outputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_outputs</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-outputs">LightVegeManager_outputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_plantGL"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_plantGL</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-plantgl">LightVegeManager_plantGL</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_sky"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_sky</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-sky">LightVegeManager_sky</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_stems"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_stems</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-stems">LightVegeManager_stems</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_sun"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_sun</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-sun">LightVegeManager_sun</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_tesselator"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_tesselator</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-tesselator">LightVegeManager_tesselator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_transfer"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_transfer</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-transfer">LightVegeManager_transfer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_trianglesmesh"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_trianglesmesh</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-src.LightVegeManager_voxelsmesh"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_voxelsmesh</span></code> module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lightvegemanager-voxelsmesh">LightVegeManager_voxelsmesh</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LightVegeManager</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Reference Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/reference.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reference-guide">
<span id="lightvegemanager-reference"></span><h1><a class="toc-backref" href="#id3">Reference Guide</a><a class="headerlink" href="#reference-guide" title="Permalink to this headline">¶</a></h1>
<p>This manual details, for each module of <a class="reference internal" href="index.html#module-lightvegemanager" title="lightvegemanager"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lightvegemanager</span></code></a>, the functions and objects included in <a class="reference internal" href="index.html#module-lightvegemanager" title="lightvegemanager"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lightvegemanager</span></code></a>,
describing what they are and what they do.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#reference-guide" id="id3">Reference Guide</a></p>
<ul>
<li><p><a class="reference internal" href="#module-src.LightVegeManager" id="id4"><a class="reference internal" href="#module-src.LightVegeManager" title="src.LightVegeManager"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager" id="id5">LightVegeManager</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_CARIBUinputs" id="id6"><a class="reference internal" href="#module-src.LightVegeManager_CARIBUinputs" title="src.LightVegeManager_CARIBUinputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_CARIBUinputs</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-caribuinputs" id="id7">LightVegeManager_CARIBUinputs</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_RATPinputs" id="id8"><a class="reference internal" href="#module-src.LightVegeManager_RATPinputs" title="src.LightVegeManager_RATPinputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_RATPinputs</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-ratpinputs" id="id9">LightVegeManager_RATPinputs</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_VTK" id="id10"><a class="reference internal" href="#module-src.LightVegeManager_VTK" title="src.LightVegeManager_VTK"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_VTK</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-vtk" id="id11">LightVegeManager_VTK</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_basicgeometry" id="id12"><a class="reference internal" href="#module-src.LightVegeManager_basicgeometry" title="src.LightVegeManager_basicgeometry"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_basicgeometry</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-basicgeometry" id="id13">LightVegeManager_basicgeometry</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_buildRATPscene" id="id14"><a class="reference internal" href="#module-src.LightVegeManager_buildRATPscene" title="src.LightVegeManager_buildRATPscene"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_buildRATPscene</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-buildratpscene" id="id15">LightVegeManager_buildRATPscene</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_defaultvalues" id="id16"><a class="reference internal" href="#module-src.LightVegeManager_defaultvalues" title="src.LightVegeManager_defaultvalues"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_defaultvalues</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-defaultvalues" id="id17">LightVegeManager_defaultvalues</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_leafangles" id="id18"><a class="reference internal" href="#module-src.LightVegeManager_leafangles" title="src.LightVegeManager_leafangles"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_leafangles</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-leafangles" id="id19">LightVegeManager_leafangles</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_outputs" id="id20"><a class="reference internal" href="#module-src.LightVegeManager_outputs" title="src.LightVegeManager_outputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_outputs</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-outputs" id="id21">LightVegeManager_outputs</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_plantGL" id="id22"><a class="reference internal" href="#module-src.LightVegeManager_plantGL" title="src.LightVegeManager_plantGL"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_plantGL</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-plantgl" id="id23">LightVegeManager_plantGL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_sky" id="id24"><a class="reference internal" href="#module-src.LightVegeManager_sky" title="src.LightVegeManager_sky"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_sky</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-sky" id="id25">LightVegeManager_sky</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_stems" id="id26"><a class="reference internal" href="#module-src.LightVegeManager_stems" title="src.LightVegeManager_stems"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_stems</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-stems" id="id27">LightVegeManager_stems</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_sun" id="id28"><a class="reference internal" href="#module-src.LightVegeManager_sun" title="src.LightVegeManager_sun"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_sun</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-sun" id="id29">LightVegeManager_sun</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_tesselator" id="id30"><a class="reference internal" href="#module-src.LightVegeManager_tesselator" title="src.LightVegeManager_tesselator"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_tesselator</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-tesselator" id="id31">LightVegeManager_tesselator</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_transfer" id="id32"><a class="reference internal" href="#module-src.LightVegeManager_transfer" title="src.LightVegeManager_transfer"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_transfer</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-transfer" id="id33">LightVegeManager_transfer</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_trianglesmesh" id="id34"><a class="reference internal" href="#module-src.LightVegeManager_trianglesmesh" title="src.LightVegeManager_trianglesmesh"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_trianglesmesh</span></code></a> module</a></p></li>
<li><p><a class="reference internal" href="#module-src.LightVegeManager_voxelsmesh" id="id35"><a class="reference internal" href="#module-src.LightVegeManager_voxelsmesh" title="src.LightVegeManager_voxelsmesh"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_voxelsmesh</span></code></a> module</a></p>
<ul>
<li><p><a class="reference internal" href="#lightvegemanager-voxelsmesh" id="id36">LightVegeManager_voxelsmesh</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="module-src.LightVegeManager">
<span id="src-lightvegemanager-module"></span><h2><a class="toc-backref" href="#id4"><a class="reference internal" href="#module-src.LightVegeManager" title="src.LightVegeManager"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager">
<h3><a class="toc-backref" href="#id5">LightVegeManager</a><a class="headerlink" href="#lightvegemanager" title="Permalink to this headline">¶</a></h3>
<p>Main class of the tool. Calls all the other modules in <code class="docutils literal notranslate"><span class="pre">src</span></code>.</p>
<p>3 inputs dict for setting all parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">geometry</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;scenes&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">scene0</span><span class="p">,</span> <span class="n">scene1</span><span class="p">,</span> <span class="n">scene2</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="p">,</span>
            <span class="s2">&quot;domain&quot;</span> <span class="p">:</span> <span class="p">((</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">),</span> <span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)),</span>
            <span class="s2">&quot;stems id&quot;</span> <span class="p">:</span> <span class="p">[(</span><span class="n">id_element</span><span class="p">,</span> <span class="n">id_scene</span><span class="p">),</span> <span class="o">...</span><span class="p">],</span>
            <span class="s2">&quot;transformations&quot;</span> <span class="p">:</span> <span class="p">{</span>
                                    <span class="s2">&quot;scenes unit&quot;</span> <span class="p">:</span> <span class="n">kwarg</span> <span class="p">,</span>
                                    <span class="s2">&quot;rescale&quot;</span> <span class="p">:</span> <span class="n">kwarg</span> <span class="p">,</span>
                                    <span class="s2">&quot;translate&quot;</span> <span class="p">:</span> <span class="n">kwarg</span> <span class="p">,</span>
                                    <span class="s2">&quot;xyz orientation&quot;</span> <span class="p">:</span> <span class="n">kwarg</span>
                                    <span class="p">}</span>
                <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">environment</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;coordinates&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">timezone</span><span class="p">]</span> <span class="p">,</span>

                <span class="s2">&quot;sky&quot;</span> <span class="p">:</span> <span class="s2">&quot;turtle46&quot;</span> <span class="p">,</span>
                <span class="s2">&quot;sky&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">filepath</span><span class="p">]</span> <span class="p">,</span>
                <span class="s2">&quot;sky&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">nb_azimut</span><span class="p">,</span> <span class="n">nb_zenith</span><span class="p">,</span> <span class="s2">&quot;soc&quot;</span> <span class="ow">or</span> <span class="s2">&quot;uoc&quot;</span><span class="p">]</span> <span class="p">,</span>

                <span class="s2">&quot;direct&quot;</span> <span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="c1"># sun radiations</span>
                <span class="s2">&quot;diffus&quot;</span> <span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="c1"># sky radiations</span>
                <span class="s2">&quot;reflected&quot;</span> <span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="c1"># reflected radiation in the canopy</span>
                <span class="s2">&quot;infinite&quot;</span> <span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="c1"># infinitisation of the scene</span>
                <span class="p">}</span>
</pre></div>
</div>
<p>Currently LightVegeManager handles the light models RATP and CARIBU:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">caribu_args</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;sun algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;ratp&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sun algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;caribu&quot;</span><span class="p">,</span>

                    <span class="s2">&quot;caribu opt&quot;</span> <span class="p">:</span> <span class="p">{</span>
                                    <span class="n">band0</span> <span class="o">=</span> <span class="p">(</span><span class="n">reflectance</span><span class="p">,</span> <span class="n">transmittance</span><span class="p">),</span>
                                    <span class="n">band1</span> <span class="o">=</span> <span class="p">(</span><span class="n">reflectance</span><span class="p">,</span> <span class="n">transmittance</span><span class="p">),</span>
                                    <span class="o">...</span>
                                    <span class="p">},</span>
                    <span class="s2">&quot;debug&quot;</span> <span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                    <span class="s2">&quot;soil mesh&quot;</span> <span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                    <span class="s2">&quot;sensors&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;grid&quot;</span><span class="p">,</span> <span class="n">dxyz</span><span class="p">,</span> <span class="n">nxyz</span><span class="p">,</span> <span class="n">orig</span><span class="p">,</span> <span class="n">vtkpath</span><span class="p">,</span> <span class="s2">&quot;vtk&quot;</span><span class="p">]</span>
                <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ratp_args</span> <span class="o">=</span> <span class="p">{</span>
                <span class="c1"># Grid specifications</span>
                <span class="s2">&quot;voxel size&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">],</span>
                <span class="s2">&quot;voxel size&quot;</span> <span class="p">:</span> <span class="s2">&quot;dynamic&quot;</span><span class="p">,</span>

                <span class="s2">&quot;origin&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">xorigin</span><span class="p">,</span> <span class="n">yorigin</span><span class="p">,</span> <span class="n">zorigin</span><span class="p">],</span>
                <span class="s2">&quot;origin&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">xorigin</span><span class="p">,</span> <span class="n">yorigin</span><span class="p">],</span>

                <span class="s2">&quot;number voxels&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nz</span><span class="p">],</span>
                <span class="s2">&quot;grid slicing&quot;</span> <span class="p">:</span> <span class="s2">&quot;ground = 0.&quot;</span>
                <span class="s2">&quot;tesselation level&quot;</span> <span class="p">:</span> <span class="nb">int</span>

                <span class="c1"># Leaf angle distribution</span>
                <span class="s2">&quot;angle distrib algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;compute global&quot;</span><span class="p">,</span>
                <span class="s2">&quot;angle distrib algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;compute voxel&quot;</span><span class="p">,</span>
                <span class="s2">&quot;angle distrib algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>

                <span class="s2">&quot;nb angle classes&quot;</span> <span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s2">&quot;angle distrib file&quot;</span> <span class="p">:</span> <span class="n">filepath</span><span class="p">,</span>

                <span class="c1"># Vegetation type</span>
                <span class="s2">&quot;soil reflectance&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">reflectance_band0</span><span class="p">,</span> <span class="n">reflectance_band1</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
                <span class="s2">&quot;reflectance coefficients&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">reflectance_band0</span><span class="p">,</span> <span class="n">reflectance_band1</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
                <span class="s2">&quot;mu&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">mu_scene0</span><span class="p">,</span> <span class="n">mu_scene1</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
            <span class="p">}</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more details <a class="reference internal" href="inputs.html#inputs"><span class="std std-ref">Inputs description</span></a></p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.LightVegeManager.</span></span><span class="sig-name descname"><span class="pre">LightVegeManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightmodel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lightmodel_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">main_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'m'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager.html#LightVegeManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager.LightVegeManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Main class for the tool LightVegeManager</p>
<p>Common simulation order:</p>
<p><code class="docutils literal notranslate"><span class="pre">input</span> <span class="pre">geometries</span> <span class="pre">-&gt;</span> <span class="pre">build</span> <span class="pre">and</span> <span class="pre">prepare</span> <span class="pre">data</span> <span class="pre">-&gt;</span> <span class="pre">call</span> <span class="pre">light</span> <span class="pre">model</span> <span class="pre">-&gt;</span> <span class="pre">transfer</span> <span class="pre">results</span> <span class="pre">to</span> <span class="pre">plant</span> <span class="pre">models</span></code></p>
<p>It includes:</p>
<blockquote>
<div><p>Main methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__init__</span></code>: initializes and builds static object for the rest of simulation</p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.build" title="src.LightVegeManager.LightVegeManager.build"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build()</span></code></a>: builds and prepare all geometric meshes</p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.run" title="src.LightVegeManager.LightVegeManager.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a>: calls a light model and manages its inputs and outputs</p></li>
</ul>
<p>Transfer methods:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.to_MTG" title="src.LightVegeManager.LightVegeManager.to_MTG"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_MTG()</span></code></a>: transfers ligthing results to a MTG table</p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.to_l_egume" title="src.LightVegeManager.LightVegeManager.to_l_egume"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_l_egume()</span></code></a>: transfers ligthing results to l-egume by creating two arrays as inputs for the plant model</p></li>
</ul>
<p>Analysis tools: analyses a set of triangles and formats them as a turbid medium inputs</p>
<ul class="simple">
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.s5" title="src.LightVegeManager.LightVegeManager.s5"><code class="xref py py-meth docutils literal notranslate"><span class="pre">s5()</span></code></a>: fortran tool</p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.s2v" title="src.LightVegeManager.LightVegeManager.s2v"><code class="xref py py-meth docutils literal notranslate"><span class="pre">s2v()</span></code></a>: c++ tool</p></li>
</ul>
<p>Visualisation tools:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.VTK_nolight" title="src.LightVegeManager.LightVegeManager.VTK_nolight"><code class="xref py py-meth docutils literal notranslate"><span class="pre">VTK_nolight()</span></code></a>: write VTK file with only geometric informations</p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.VTK_light" title="src.LightVegeManager.LightVegeManager.VTK_light"><code class="xref py py-meth docutils literal notranslate"><span class="pre">VTK_light()</span></code></a>: write VTK file with geometric informations and associated light results</p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.VTK_sun" title="src.LightVegeManager.LightVegeManager.VTK_sun"><code class="xref py py-meth docutils literal notranslate"><span class="pre">VTK_sun()</span></code></a>: : write VTK file representing the sun as a line</p></li>
</ul>
<p>Getters: to use light results with external routines</p>
<ul class="simple">
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.legume_transmitted_light" title="src.LightVegeManager.LightVegeManager.legume_transmitted_light"><code class="xref py py-meth docutils literal notranslate"><span class="pre">legume_transmitted_light()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.legume_intercepted_light" title="src.LightVegeManager.LightVegeManager.legume_intercepted_light"><code class="xref py py-meth docutils literal notranslate"><span class="pre">legume_intercepted_light()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.elements_outputs" title="src.LightVegeManager.LightVegeManager.elements_outputs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">elements_outputs()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.triangles_outputs" title="src.LightVegeManager.LightVegeManager.triangles_outputs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">triangles_outputs()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.voxels_outputs" title="src.LightVegeManager.LightVegeManager.voxels_outputs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">voxels_outputs()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.sensors_outputs" title="src.LightVegeManager.LightVegeManager.sensors_outputs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sensors_outputs()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.sun" title="src.LightVegeManager.LightVegeManager.sun"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sun()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.soilenergy" title="src.LightVegeManager.LightVegeManager.soilenergy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">soilenergy()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.maxtrianglearea" title="src.LightVegeManager.LightVegeManager.maxtrianglearea"><code class="xref py py-meth docutils literal notranslate"><span class="pre">maxtrianglearea()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.legume_empty_layers" title="src.LightVegeManager.LightVegeManager.legume_empty_layers"><code class="xref py py-meth docutils literal notranslate"><span class="pre">legume_empty_layers()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.tesselationtime" title="src.LightVegeManager.LightVegeManager.tesselationtime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tesselationtime()</span></code></a></p></li>
<li><p><a class="reference internal" href="#src.LightVegeManager.LightVegeManager.modelruntime" title="src.LightVegeManager.LightVegeManager.modelruntime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">modelruntime()</span></code></a></p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<em>dict</em><em>, </em><em>optional</em>) – Environment parameters, defaults to {}</p></li>
<li><p><strong>lightmodel</strong> (<em>str</em><em>, </em><em>optional</em>) – either <code class="docutils literal notranslate"><span class="pre">&quot;ratp&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;caribu&quot;</span></code>, defaults to “”</p></li>
<li><p><strong>lightmodel_parameters</strong> (<em>dict</em><em>, </em><em>optional</em>) – light model parameters, defaults to {}</p></li>
<li><p><strong>main_unit</strong> (<em>str</em><em>, </em><em>optional</em>) – measure unit for the global scene where the light will be computed, defaults to “m”</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – lightmodel entry not valid, either <code class="docutils literal notranslate"><span class="pre">'ratp'</span></code> or <code class="docutils literal notranslate"><span class="pre">'caribu'</span></code></p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.build">
<span class="sig-name descname"><span class="pre">build</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geometry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_scene_tesselate_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager.html#LightVegeManager.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a mesh of the simulation scene in the right light model format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geometry</strong> (<em>dict</em><em>, </em><em>optional</em>) – geometric parameters, contains geometric scenes, defaults to {}</p></li>
<li><p><strong>global_scene_tesselate_level</strong> (<em>int</em><em>, </em><em>optional</em>) – option to subdivide all triangles of the mesh a certain number of times (to fine tuning the mesh), defaults to 0</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – Currently, converting voxels mesh to triangles mesh is not possible</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hour</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parunit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'micromol.m-2.s-1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truesolartime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_sensors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager.html#LightVegeManager.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the light model and formats lighting results</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy</strong> (<em>float</em><em>, </em><em>optional</em>) – input radiation energy, defaults to 0</p></li>
<li><p><strong>day</strong> (<em>int</em><em>, </em><em>optional</em>) – simulation day, defaults to 0</p></li>
<li><p><strong>hour</strong> (<em>int</em><em>, </em><em>optional</em>) – simulation hour, defaults to 0</p></li>
<li><p><strong>parunit</strong> (<em>str</em><em>, </em><em>optional</em>) – input energy unit, light models manages radiations in different unit, you can precise input unit and LightVegeManager will convert it in the right unit, defaults to “micromol.m-2.s-1”</p></li>
<li><p><strong>truesolartime</strong> (<em>bool</em><em>, </em><em>optional</em>) – simulation hour is a true solar time or local time (depending on simulation coordinates), defaults to False</p></li>
<li><p><strong>id_sensors</strong> (<em>list</em><em>, </em><em>optional</em>) – if you use CARIBU with a grid of virtual sensors, you have to precise which input scenes the grid must match, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – with CARIBU you can precise the sun algorithm to calculate sun position, can be either <code class="docutils literal notranslate"><span class="pre">&quot;caribu&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;ratp&quot;</span></code></p></li>
<li><p><strong>ValueError</strong> – valid radiations are <code class="docutils literal notranslate"><span class="pre">&quot;direct&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;diffuse&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;reflected&quot;</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.to_MTG">
<span class="sig-name descname"><span class="pre">to_MTG</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mtg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager.html#LightVegeManager.to_MTG"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.to_MTG" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfers lighting results to a MTG table.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="#src.LightVegeManager.LightVegeManager.run" title="src.LightVegeManager.LightVegeManager.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> must have been called before to have results dataframes.</p>
</div>
<p>Results are <code class="docutils literal notranslate"><span class="pre">pandas.Dataframe</span></code> stored in the <code class="docutils literal notranslate"><span class="pre">self</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy</strong> (<em>float</em><em>, </em><em>optional</em>) – input energy, defaults to 1</p></li>
<li><p><strong>mtg</strong> (<em>MTG</em><em>, </em><em>optional</em>) – MTG table with <code class="docutils literal notranslate"><span class="pre">&quot;PARa&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;Erel&quot;</span></code> entries in its properties, defaults to None</p></li>
<li><p><strong>id</strong> (<em>list</em><em> or </em><em>tuple</em><em>, </em><em>optional</em>) – you can precise to which input scenes the MTG table corresponds, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AttributeError</strong> – you need to call :func:run first</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.to_l_egume">
<span class="sig-name descname"><span class="pre">to_l_egume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m_lais</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_lstring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_dicFeuilBilanR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_invar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager.html#LightVegeManager.to_l_egume"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.to_l_egume" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfers lighting results to l-egume</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="#src.LightVegeManager.LightVegeManager.run" title="src.LightVegeManager.LightVegeManager.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> must have been called before to have results dataframes.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>l-egume needs transmitted energy informations located in a grid of voxels. You need to have the same dimensions in the lighting results.</p>
<ul class="simple">
<li><p>With RATP, RATP grid must have the same dimensions as l-egume intern grid.</p></li>
<li><p>With CARIBU, you must create a grid of virtual sensors in the same dimensions as l-egume intern grid.</p></li>
</ul>
</div>
<p>Results are <code class="docutils literal notranslate"><span class="pre">pandas.Dataframe</span></code> stored in the <code class="docutils literal notranslate"><span class="pre">self</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy</strong> (<em>float</em><em>, </em><em>optional</em>) – input energy, defaults to 1</p></li>
<li><p><strong>m_lais</strong> (<em>numpy.array</em><em>, </em><em>optional</em>) – leaf area represented in a numpy.array of dimension [number of species, number of z layers, number of y layers, number of x layers], defaults to []</p></li>
<li><p><strong>list_lstring</strong> (<em>list of dict</em><em>, </em><em>optional</em>) – from l-egume, each element corresponds to an input specy of l-egume. Each element is a dict lstring stores the l-system of each plant, defaults to []</p></li>
<li><p><strong>list_dicFeuilBilanR</strong> (<em>list of dict</em><em>, </em><em>optional</em>) – from l-egume, each element corresponds to an input specy of l-egume. Each element is a dict dicFeuiBilanR stores correspondances between voxels grid and each plant, defaults to []</p></li>
<li><p><strong>list_invar</strong> (<em>list of dict</em><em>, </em><em>optional</em>) – from l-egume, each element corresponds to an input specy of l-egume. Each element is a dict invar stores instant intern variables of l-egume., defaults to []</p></li>
<li><p><strong>id</strong> (<em>list</em><em>, </em><em>optional</em>) – list of indices from input scenes which corresponds to current l-egume instance. If you have several plantmodel among the input scenes, you need to precise which results you want to transfer to which instance of l-egume. defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>AttributeError</strong> – you need to call <a class="reference internal" href="#src.LightVegeManager.LightVegeManager.run" title="src.LightVegeManager.LightVegeManager.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> first</p></li>
<li><p><strong>ValueError</strong> – unknown light model</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>if light model is RATP <code class="xref py py-func docutils literal notranslate"><span class="pre">transfer_ratp_legume()</span></code> :</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">res_abs_i</span></code>: absorbed energy in each voxels of a grid matching the dimensions of l-egume intern grid of voxels. One value for each specy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">res_trans</span></code>: transmitted energy in each voxels of a grid matching the dimensions of l-egume intern grid of voxels</p></li>
</ul>
</div></blockquote>
<p>if light model is CARIBU :func:transfer_caribu_legume :</p>
<blockquote>
<div><ul class="simple">
<li><p>update of list_invar: updates the keys <code class="docutils literal notranslate"><span class="pre">&quot;parap&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;parip&quot;</span></code> for each specy. Cumulatative energy per plant</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">res_trans</span></code>: transmitted energy in each voxels of a grid matching the dimensions of l-egume intern grid of voxels</p></li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.s5">
<span class="sig-name descname"><span class="pre">s5</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager.html#LightVegeManager.s5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.s5" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates inputs files for s5 and runs it
s5 is an external tool made to analyse a set of triangles in order to use a grid of voxels.
It also computes leaf angle distribution from the triangulation</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All files are located in <code class="docutils literal notranslate"><span class="pre">s5</span></code> folder</p>
</div>
<p><strong>Input files created</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>fort.51: contains triangulation. Possibility to precise stem elements it is registered in the instance of LightVegeManager</p></li>
<li><p>s5.par: stores grid of voxels informations and number of entities</p></li>
</ul>
</div></blockquote>
<p><strong>Output files created</strong></p>
<blockquote>
<div><ul>
<li><p>fort.60</p>
<blockquote>
<div><p>dimensions xy of the grid</p>
<p>stats by specy</p>
<blockquote>
<div><ul class="simple">
<li><p>total leaf area</p></li>
<li><p>leaf area index</p></li>
<li><p>global zenital leaf angle distribution</p></li>
<li><p>global azimutal leaf angle distribution</p></li>
</ul>
</div></blockquote>
<p>stats by voxels</p>
<blockquote>
<div><ul class="simple">
<li><p>#specy | #ix | #iy | #iz (coordinate xyz of the voxel) | eaf area density</p></li>
<li><p>local zenital leaf angle distribution</p></li>
<li><p>local azimutal leaf angle distribution</p></li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p>leafarea: for each specy, for each voxel</p>
<blockquote>
<div><p>ix | iy | iz | #specy | LAD | zenital-distribution | azimutal-distribution</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p><strong>example</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myscene</span> <span class="c1"># a plantgl Scene</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testofs5</span> <span class="o">=</span> <span class="n">LightVegeManager</span><span class="p">()</span> <span class="c1"># create a instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testofs5</span><span class="o">.</span><span class="n">build</span><span class="p">(</span> <span class="n">geometry</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;scenes&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">myscene</span><span class="p">]</span> <span class="p">}</span> <span class="p">)</span> <span class="c1"># build the geometry</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testofs5</span><span class="o">.</span><span class="n">s5</span><span class="p">()</span> <span class="c1"># run of s5, creates input and output files</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.s2v">
<span class="sig-name descname"><span class="pre">s2v</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager.html#LightVegeManager.s2v"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.s2v" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates inputs files for s2v and runs it
s5 is an external tool made to analyse a set of triangles in order to use a grid of voxels.
It also computes leaf angle distribution from the triangulation</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All files are located in <code class="docutils literal notranslate"><span class="pre">s2v</span></code> folder</p>
</div>
<p><strong>Input files created</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>fort.51: stores triangulation. Possibility to precise stem elements it is registered in the instance of LightVegeManager</p></li>
<li><p>s2v.par: stores grid of voxels informations and number of entities</p></li>
</ul>
</div></blockquote>
<p><strong>Output files created</strong></p>
<blockquote>
<div><ul>
<li><p>s2v.log</p>
<blockquote>
<div><p>logs about processing</p>
<p>global statistics</p>
<blockquote>
<div><ul class="simple">
<li><p>total leaf area per specy</p></li>
<li><p>total leaf area</p></li>
<li><p>leaf area index</p></li>
<li><p>global zenital leaf angle distribution</p></li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p>s2v.can</p>
<blockquote>
<div><p>z layer where each triangle is located (and copy its vertices)</p>
</div></blockquote>
</li>
<li><p>s2v.area</p>
<blockquote>
<div><p>triangle id | z layer | triangle area</p>
</div></blockquote>
</li>
<li><p>out.dang: SAIL file</p>
<blockquote>
<div><p>line 1: global leaf area index for specy 1
line 2: global zenital leaf angle distribution for specy 1</p>
</div></blockquote>
</li>
<li><p>leafarea: SAIL file</p>
<blockquote>
<div><p>each line: 0 | idz | leaf area index for each slope class in current z layer | 0 | 0 | leaf area density on the layer</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p><strong>example</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myscene</span> <span class="c1"># a plantgl Scene</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testofs2v</span> <span class="o">=</span> <span class="n">LightVegeManager</span><span class="p">()</span> <span class="c1"># create a instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testofs2v</span><span class="o">.</span><span class="n">build</span><span class="p">(</span> <span class="n">geometry</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;scenes&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">myscene</span><span class="p">]</span> <span class="p">}</span> <span class="p">)</span> <span class="c1"># build the geometry</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testofs2v</span><span class="o">.</span><span class="n">s2v</span><span class="p">()</span> <span class="c1"># run of s2v, creates input and output files</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.VTK_nolight">
<span class="sig-name descname"><span class="pre">VTK_nolight</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printtriangles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printvoxels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager.html#LightVegeManager.VTK_nolight"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.VTK_nolight" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a VTK from mesh(es) in <code class="docutils literal notranslate"><span class="pre">self</span></code>, with only geometric informations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>string</em>) – file and path name</p></li>
<li><p><strong>i</strong> (<em>int</em><em>, </em><em>optional</em>) – associate the created file with an indice in its filename, defaults to None</p></li>
<li><p><strong>printtriangles</strong> (<em>bool</em><em>, </em><em>optional</em>) – write triangulation if one has been created in :func:build, defaults to True</p></li>
<li><p><strong>printvoxels</strong> (<em>bool</em><em>, </em><em>optional</em>) – write grid of voxels if one has been created in :func:build, defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.VTK_light">
<span class="sig-name descname"><span class="pre">VTK_light</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printtriangles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printvoxels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager.html#LightVegeManager.VTK_light"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.VTK_light" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a VTK from mesh(es) in <code class="docutils literal notranslate"><span class="pre">self</span></code>, with geometric informations and lighting results</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="#src.LightVegeManager.LightVegeManager.run" title="src.LightVegeManager.LightVegeManager.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> must have been called before to have results dataframes.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>string</em>) – file and path name</p></li>
<li><p><strong>i</strong> (<em>int</em><em>, </em><em>optional</em>) – associate the created file with an indice in its filename, defaults to None</p></li>
<li><p><strong>printtriangles</strong> (<em>bool</em><em>, </em><em>optional</em>) – write triangulation if one has been created in <a class="reference internal" href="#src.LightVegeManager.LightVegeManager.build" title="src.LightVegeManager.LightVegeManager.build"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build()</span></code></a>, defaults to True</p></li>
<li><p><strong>printvoxels</strong> (<em>bool</em><em>, </em><em>optional</em>) – write grid of voxels if one has been created in <a class="reference internal" href="#src.LightVegeManager.LightVegeManager.build" title="src.LightVegeManager.LightVegeManager.build"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build()</span></code></a>, defaults to True</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AttributeError</strong> – you need to call <a class="reference internal" href="#src.LightVegeManager.LightVegeManager.run" title="src.LightVegeManager.LightVegeManager.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> first</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.VTK_sun">
<span class="sig-name descname"><span class="pre">VTK_sun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager.html#LightVegeManager.VTK_sun"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.VTK_sun" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a VTK file representing the sun by a simple line</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="#src.LightVegeManager.LightVegeManager.run" title="src.LightVegeManager.LightVegeManager.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> must have been called before to have results dataframes.</p>
</div>
<p>if center is False, orig is the starting point the line and it ends at orig + scale*sun.position</p>
<p>if center is True, orig is the middle point of the line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>string</em>) – file and path name</p></li>
<li><p><strong>scale</strong> (<em>int</em><em>, </em><em>optional</em>) – size of the line, defaults to 2</p></li>
<li><p><strong>orig</strong> (<em>tuple</em><em>, </em><em>optional</em>) – starting or middle point of the line, defaults to (0,0,0)</p></li>
<li><p><strong>center</strong> (<em>bool</em><em>, </em><em>optional</em>) – if True orig is the middle of the line, otherwise it is the starting point, defaults to True</p></li>
<li><p><strong>i</strong> (<em>int</em><em>, </em><em>optional</em>) – associate the created file with an indice in its filename, defaults to None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.legume_transmitted_light">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">legume_transmitted_light</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.legume_transmitted_light" title="Permalink to this definition">¶</a></dt>
<dd><p>transmitted results if light model is RiRi light</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>transmitted energy following a grid of voxels</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.legume_intercepted_light">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">legume_intercepted_light</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.legume_intercepted_light" title="Permalink to this definition">¶</a></dt>
<dd><p>Intercepted results if light model is RiRi light,</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>intercepted energy following a grid of voxels, for each specy</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.elements_outputs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">elements_outputs</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.elements_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Lighting results aggregate by element</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Column names can change depending on the light model. Commonly, there is element indice, its area and intercepted energy</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.triangles_outputs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">triangles_outputs</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.triangles_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Lighting results aggregate by triangle, if it has a triangulation in its inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#module-src.LightVegeManager_outputs" title="src.LightVegeManager_outputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_outputs</span></code></a> for column names</p>
</div>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.voxels_outputs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">voxels_outputs</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.voxels_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Lighting results aggregate by voxels, only with RATP as the selected light model</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#module-src.LightVegeManager_outputs" title="src.LightVegeManager_outputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_outputs</span></code></a> for column names</p>
</div>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.sensors_outputs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sensors_outputs</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.sensors_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Lighting results aggregate by sensors.
Only with CARIBU if you activated the virtual sensors option</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The output format is the same as CARIBU output format. Dict with <code class="docutils literal notranslate"><span class="pre">Eabs</span></code> key for absorbed energy and <code class="docutils literal notranslate"><span class="pre">Ei</span></code> for incoming energy</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.sun">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sun</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.sun" title="Permalink to this definition">¶</a></dt>
<dd><p>Return sun position of the last :func:run call</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>vector (x, y, z)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.soilenergy">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">soilenergy</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.soilenergy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return soil energy, only with CARIBU if soilmesh option is activated</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The output format is the same as CARIBU output format. Dict with <code class="docutils literal notranslate"><span class="pre">Eabs</span></code> key for absorbed energy and <code class="docutils literal notranslate"><span class="pre">Ei</span></code> for incoming energy</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.maxtrianglearea">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">maxtrianglearea</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.maxtrianglearea" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the largest triangle of triangles mesh
Computed in <a class="reference internal" href="#src.LightVegeManager.LightVegeManager.build" title="src.LightVegeManager.LightVegeManager.build"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>area the triangle</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.legume_empty_layers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">legume_empty_layers</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.legume_empty_layers" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns number of empty layers between top of the canopy and number of z layers expected by l-egume</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>result of <code class="xref py py-func docutils literal notranslate"><span class="pre">fill_ratpgrid_from_legumescene()</span></code></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.tesselationtime">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tesselationtime</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.tesselationtime" title="Permalink to this definition">¶</a></dt>
<dd><p>_summary_</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>_description_</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_type_</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="src.LightVegeManager.LightVegeManager.modelruntime">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">modelruntime</span></span><a class="headerlink" href="#src.LightVegeManager.LightVegeManager.modelruntime" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns running time of the light model</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>time in s</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_CARIBUinputs">
<span id="src-lightvegemanager-caribuinputs-module"></span><h2><a class="toc-backref" href="#id6"><a class="reference internal" href="#module-src.LightVegeManager_CARIBUinputs" title="src.LightVegeManager_CARIBUinputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_CARIBUinputs</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_CARIBUinputs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-caribuinputs">
<h3><a class="toc-backref" href="#id7">LightVegeManager_CARIBUinputs</a><a class="headerlink" href="#lightvegemanager-caribuinputs" title="Permalink to this headline">¶</a></h3>
<p>Manages and prepares input information for CARIBU.</p>
<p>In this module we use two of the LightVegeManager’s inputs dict.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">parameters</span></code> corresponding to CARIBU parameters and contains</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">caribu_args</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;sun algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;ratp&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sun algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;caribu&quot;</span><span class="p">,</span>

                <span class="s2">&quot;caribu opt&quot;</span> <span class="p">:</span> <span class="p">{</span>
                                <span class="n">band0</span> <span class="o">=</span> <span class="p">(</span><span class="n">reflectance</span><span class="p">,</span> <span class="n">transmittance</span><span class="p">),</span>
                                <span class="n">band1</span> <span class="o">=</span> <span class="p">(</span><span class="n">reflectance</span><span class="p">,</span> <span class="n">transmittance</span><span class="p">),</span>
                                <span class="o">...</span>
                                <span class="p">},</span>
                <span class="s2">&quot;debug&quot;</span> <span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                <span class="s2">&quot;soil mesh&quot;</span> <span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                <span class="s2">&quot;sensors&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;grid&quot;</span><span class="p">,</span> <span class="n">dxyz</span><span class="p">,</span> <span class="n">nxyz</span><span class="p">,</span> <span class="n">orig</span><span class="p">,</span> <span class="n">vtkpath</span><span class="p">,</span> <span class="s2">&quot;vtk&quot;</span><span class="p">]</span>
                <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">geometry</span></code> corresponding to the geometric information with the scenes inputs</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">geometry</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;scenes&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">scene0</span><span class="p">,</span> <span class="n">scene1</span><span class="p">,</span> <span class="n">scene2</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="p">,</span>
            <span class="s2">&quot;domain&quot;</span> <span class="p">:</span> <span class="p">((</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">),</span> <span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)),</span>
            <span class="s2">&quot;stems id&quot;</span> <span class="p">:</span> <span class="p">[(</span><span class="n">id_element</span><span class="p">,</span> <span class="n">id_scene</span><span class="p">),</span> <span class="o">...</span><span class="p">],</span>
            <span class="s2">&quot;transformations&quot;</span> <span class="p">:</span> <span class="p">{</span>
                                    <span class="s2">&quot;scenes unit&quot;</span> <span class="p">:</span> <span class="n">kwarg</span> <span class="p">,</span>
                                    <span class="s2">&quot;rescale&quot;</span> <span class="p">:</span> <span class="n">kwarg</span> <span class="p">,</span>
                                    <span class="s2">&quot;translate&quot;</span> <span class="p">:</span> <span class="n">kwarg</span> <span class="p">,</span>
                                    <span class="s2">&quot;xyz orientation&quot;</span> <span class="p">:</span> <span class="n">kwarg</span>
                                <span class="p">}</span>
            <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more details <a class="reference internal" href="inputs.html#inputs"><span class="std std-ref">Inputs description</span></a></p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_CARIBUinputs.Prepare_CARIBU">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_CARIBUinputs.</span></span><span class="sig-name descname"><span class="pre">Prepare_CARIBU</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geometry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infinite</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idsensors</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_CARIBUinputs.html#Prepare_CARIBU"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_CARIBUinputs.Prepare_CARIBU" title="Permalink to this definition">¶</a></dt>
<dd><p>Format optical parameters and prepare virtual sensors and debug if activated</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trimesh</strong> (<em>dict</em>) – <p>triangles mesh aggregated by indice elements</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nb">id</span> <span class="p">:</span> <span class="p">[</span><span class="n">triangle1</span><span class="p">,</span> <span class="n">triangle2</span><span class="p">,</span> <span class="o">...</span><span class="p">]}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>geometry</strong> (<em>dict</em>) – geometric parameters from inputs of LightVegeManager</p></li>
<li><p><strong>matching_ids</strong> (<em>dict</em>) – <p>dict that matches new element indices in trimesh with specy indice and
input element indice,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">matching_ids</span> <span class="o">=</span> <span class="p">{</span> <span class="n">new_element_id</span> <span class="p">:</span> <span class="p">(</span><span class="n">input_element_id</span><span class="p">,</span> <span class="n">specy_id</span><span class="p">)}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>minmax</strong> (<em>[</em><em>3-tuple</em><em>, </em><em>3-tuple</em><em>]</em>) – list of mininuml point and maximum point in a triangles mesh</p></li>
<li><p><strong>parameters</strong> (<em>dict</em>) – RATP parameters from inputs of LightVegeManager</p></li>
<li><p><strong>infinite</strong> (<em>bool</em>) – if the user wishes to activate infinitisation of the grid</p></li>
<li><p><strong>idsensors</strong> (<em>list of int</em>) – Sets which input scenes the grid of virtual sensors will match. 
Elements of this list refers to indices in the list <code class="docutils literal notranslate"><span class="pre">geometry[&quot;scenes&quot;]</span></code>.
If no input indices are given, the grid will match the global scene <code class="docutils literal notranslate"><span class="pre">trimesh</span></code>. 
Otherwise, you can match the grid to a specific set of input scenes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">opt</span></code>: optical parameters formatted for CARIBU. It takes the form of dict, where each </dt><dd><p>key is a bandlength (PAR, NIR etc…) and values are transmittance and reflectance
(or only reflectance for stems elements)</p>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">sensors_caribu</span></code>: geometric data of the virtual sensors in CARIBU scene format. Sensors</dt><dd><p>are horizontal square made of two triangles</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sensors_caribu</span> <span class="o">=</span> <span class="p">{</span> <span class="n">sensor_id</span> <span class="p">:</span> <span class="p">[</span><span class="n">triangle1</span><span class="p">,</span> <span class="n">triangle2</span><span class="p">],</span> <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code>: boolean if user wants to activate th edebug option in CARIBU</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict, dict, bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_CARIBUinputs.CARIBU_opticals">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_CARIBUinputs.</span></span><span class="sig-name descname"><span class="pre">CARIBU_opticals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stems_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_CARIBUinputs.html#CARIBU_opticals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_CARIBUinputs.CARIBU_opticals" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets optical parameters for CARIBU from LightVegeManager inputs
It removes transmittance for stems elements if precised</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matching_ids</strong> (<em>dict</em>) – dict that matches new element indices in trimesh with specy indice and
input element indice, <code class="code docutils literal notranslate"><span class="pre">matching_ids</span> <span class="pre">=</span> <span class="pre">{</span> <span class="pre">new_element_id</span> <span class="pre">:</span> <span class="pre">(input_element_id,</span> <span class="pre">specy_id)}</span></code></p></li>
<li><p><strong>parameters</strong> (<em>dict</em>) – RATP parameters from inputs of LightVegeManager</p></li>
<li><p><strong>stems_id</strong> (<em>list of 2-tuple</em><em>, </em><em>optional</em>) – list of potential stems element in the input scenes, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>optical parameters formatted for CARIBU. It takes the form of dict, where each 
key is a bandlength (PAR, NIR etc…) and values are transmittance and reflectance
(or only reflectance for stems elements)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_CARIBUinputs.create_caribu_legume_sensors">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_CARIBUinputs.</span></span><span class="sig-name descname"><span class="pre">create_caribu_legume_sensors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dxyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nxyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_sensors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infinite</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_CARIBUinputs.html#create_caribu_legume_sensors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_CARIBUinputs.create_caribu_legume_sensors" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a set of virtual sensors following a voxels grid
each sensor is a square made by two triangles and takes place on the bottom face of a voxel
The grid follow the xyz axis (and so the voxels)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dxyz</strong> (<em>list</em>) – [dx, dy, dz] size of a voxel in each direction</p></li>
<li><p><strong>nxyz</strong> (<em>list</em>) – [nx, ny, nz] number of voxels on each axis</p></li>
<li><p><strong>orig</strong> (<em>list</em><em> (or </em><em>tuple</em><em>)</em>) – [x_origin, y_origin, z_origin], origin of the grid, cartesian coordinates</p></li>
<li><p><strong>pmax</strong> (<em>lsit</em><em> (or </em><em>tuple</em><em>)</em>) – [x, y, z] maximum point of trimesh in the xyz space</p></li>
<li><p><strong>trimesh</strong> (<em>dict</em>) – <p>triangles mesh aggregated by indice elements</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nb">id</span> <span class="p">:</span> <span class="p">[</span><span class="n">triangle1</span><span class="p">,</span> <span class="n">triangle2</span><span class="p">,</span> <span class="o">...</span><span class="p">]}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>matching_ids</strong> (<em>dict</em>) – dict that matches new element indices in trimesh with specy indice and
input element indice, <code class="code docutils literal notranslate"><span class="pre">matching_ids</span> <span class="pre">=</span> <span class="pre">{</span> <span class="pre">new_element_id</span> <span class="pre">:</span> <span class="pre">(input_element_id,</span> <span class="pre">specy_id)}</span></code></p></li>
<li><p><strong>idsensors</strong> (<em>list of int</em>) – Sets which input scenes the grid of virtual sensors will match. 
Elements of this list refers to indices in the list <code class="docutils literal notranslate"><span class="pre">geometry[&quot;scenes&quot;]</span></code>.
If no input indices are given, the grid will match the global scene <code class="docutils literal notranslate"><span class="pre">trimesh</span></code>. 
Otherwise, you can match the grid to a specific set of input scenes</p></li>
<li><p><strong>infinite</strong> (<em>bool</em>) – if the user wishes to activate infinitisation of the grid</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>it returns 3 objects:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">sensors_caribu</span></code>, geometric data of the virtual sensors in CARIBU scene format. Sensors</dt><dd><p>are horizontal square made of two triangles <code class="code docutils literal notranslate"><span class="pre">sensors_caribu</span> <span class="pre">=</span> <span class="pre">{</span> <span class="pre">sensor_id</span> <span class="pre">:</span> <span class="pre">[triangle1,</span> <span class="pre">triangle2],</span> <span class="pre">...}</span></code></p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">s_capt</span></code>, PlantGL scene of the virtual sensors</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">sensors_maxcenter</span></code>, [x, y, z] representing point on the highest sensors layer and middle of</dt><dd><p>xy plane in the grid</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict, PlantGL scene, list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_CARIBUinputs.run_caribu">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_CARIBUinputs.</span></span><span class="sig-name descname"><span class="pre">run_caribu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c_scene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direct_active</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infinite</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensors</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_CARIBUinputs.html#run_caribu"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_CARIBUinputs.run_caribu" title="Permalink to this definition">¶</a></dt>
<dd><p>runs caribu depending on input options</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c_scene</strong> (<em>CaribuScene</em>) – instance of CaribuScene containing geometry, light source(s), opt etc…</p></li>
<li><p><strong>direct_active</strong> (<em>bool</em>) – Whether only first order interception is to be computed
Default is True (no rediffusions)</p></li>
<li><p><strong>infinite</strong> (<em>bool</em>) – if the user wishes to activate infinitisation of the grid</p></li>
<li><p><strong>sensors</strong> (<em>dict</em>) – geometric data of the virtual sensors in CARIBU scene format. Sensors
are horizontal square made of two triangles
.. code:: sensors_caribu = { sensor_id : [triangle1, triangle2], …}</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>results are stored in two dict</p>
<ul class="simple">
<li><dl class="simple">
<dt>raw (dict of dict) a {band_name: {result_name: property}} dict of dict.</dt><dd><p>Except for result_name=’sensors’, each property is a {primitive_id: [values,]} dict containing results
for individual triangles of the primitive</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>aggregated (dict of dict)<span class="classifier">a {band_name: {result_name: property}}</span></dt><dd><p>Except for result_name=’sensors’, each property is a {primitive_id: value} dict containing aggregated
results for each primitive</p>
</dd>
</dl>
</li>
</ul>
<p>result_name are :</p>
<blockquote>
<div><ul class="simple">
<li><p>area (float): the individual areas (m2)</p></li>
<li><p>Eabs (float): the surfacic density of energy absorbed (m-2)</p></li>
<li><p>Ei (float): the surfacic density of energy incoming  (m-2)</p></li>
</ul>
<p>additionally, if split_face is True:
- Ei_inf (float): the surfacic density of energy incoming
on the inferior face (m-2)
- Ei_sup (float): the surfacic density of energy incoming
on the superior face (m-2)
- sensors (dict of dict): area, surfacic density of incoming
direct energy and surfacic density of incoming total energy
of sensors grouped by id, if any</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict of dict, dict of dict</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_RATPinputs">
<span id="src-lightvegemanager-ratpinputs-module"></span><h2><a class="toc-backref" href="#id8"><a class="reference internal" href="#module-src.LightVegeManager_RATPinputs" title="src.LightVegeManager_RATPinputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_RATPinputs</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_RATPinputs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-ratpinputs">
<h3><a class="toc-backref" href="#id9">LightVegeManager_RATPinputs</a><a class="headerlink" href="#lightvegemanager-ratpinputs" title="Permalink to this headline">¶</a></h3>
<p>Manage vegetation and meteo input informations for RATP</p>
<p>The argument <cite>parameters</cite> refers to one the three inputs dict of LightVegeManager. It is 
structured as so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ratp_args</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1"># Grid specifications</span>
        <span class="s2">&quot;voxel size&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">],</span>
        <span class="s2">&quot;voxel size&quot;</span> <span class="p">:</span> <span class="s2">&quot;dynamic&quot;</span><span class="p">,</span>

        <span class="s2">&quot;origin&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">xorigin</span><span class="p">,</span> <span class="n">yorigin</span><span class="p">,</span> <span class="n">zorigin</span><span class="p">],</span>
        <span class="s2">&quot;origin&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">xorigin</span><span class="p">,</span> <span class="n">yorigin</span><span class="p">],</span>

        <span class="s2">&quot;number voxels&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nz</span><span class="p">],</span>
        <span class="s2">&quot;grid slicing&quot;</span> <span class="p">:</span> <span class="s2">&quot;ground = 0.&quot;</span>
        <span class="s2">&quot;tesselation level&quot;</span> <span class="p">:</span> <span class="nb">int</span>

        <span class="c1"># Leaf angle distribution</span>
        <span class="s2">&quot;angle distrib algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;compute global&quot;</span><span class="p">,</span>
        <span class="s2">&quot;angle distrib algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;compute voxel&quot;</span><span class="p">,</span>
        <span class="s2">&quot;angle distrib algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>

        <span class="s2">&quot;nb angle classes&quot;</span> <span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;angle distrib file&quot;</span> <span class="p">:</span> <span class="n">filepath</span><span class="p">,</span>

        <span class="c1"># Vegetation type</span>
        <span class="s2">&quot;soil reflectance&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">reflectance_band0</span><span class="p">,</span> <span class="n">reflectance_band1</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
        <span class="s2">&quot;reflectance coefficients&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">reflectance_band0</span><span class="p">,</span> <span class="n">reflectance_band1</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
        <span class="s2">&quot;mu&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">mu_scene0</span><span class="p">,</span> <span class="n">mu_scene1</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="p">}</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>inputs.rst</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_RATPinputs.RATP_vegetation">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_RATPinputs.</span></span><span class="sig-name descname"><span class="pre">RATP_vegetation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_distrib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflected</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_RATPinputs.html#RATP_vegetation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_RATPinputs.RATP_vegetation" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a RATP Vegetation object from LightVegeManager input datas</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parameters</strong> (<em>dict</em>) – RATP parameters from inputs of LightVegeManager</p></li>
<li><p><strong>angle_distrib</strong> (<em>dict</em>) – leaf angle distribution</p></li>
<li><p><strong>reflected</strong> (<em>bool</em>) – if the user wishes to activate reflected radiations</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Vegetation types contains clumoing effect ratio, leaf angle distribution and reflectance/transmittance of leaves for each specy</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>PyRATP.pyratp.vegetation.Vegetation</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_RATPinputs.RATP_meteo">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_RATPinputs.</span></span><span class="sig-name descname"><span class="pre">RATP_meteo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parunit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truesolartime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diffus</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_RATPinputs.html#RATP_meteo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_RATPinputs.RATP_meteo" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise a RATP MicroMeteo object from LightVegeManager input parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy</strong> (<em>float</em>) – input ray energy</p></li>
<li><p><strong>day</strong> (<em>int</em>) – input day</p></li>
<li><p><strong>hour</strong> (<em>int</em>) – input hour</p></li>
<li><p><strong>coordinates</strong> (<em>list</em>) – [latitude, longitude, timezone]</p></li>
<li><p><strong>parunit</strong> (<em>string</em>) – unit of energy argument, “micromol.m-2.s-1” or else</p></li>
<li><p><strong>truesolartime</strong> (<em>bool</em>) – activates true solar time or local time to compute sun position</p></li>
<li><p><strong>direct</strong> (<em>bool</em>) – if direct rays are activated</p></li>
<li><p><strong>diffus</strong> (<em>bool</em>) – if diffuse rays are activated</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>input meteorological data at current time step</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>PyRATP.pyratp.micrometeo.MicroMeteo</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_VTK">
<span id="src-lightvegemanager-vtk-module"></span><h2><a class="toc-backref" href="#id10"><a class="reference internal" href="#module-src.LightVegeManager_VTK" title="src.LightVegeManager_VTK"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_VTK</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_VTK" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-vtk">
<h3><a class="toc-backref" href="#id11">LightVegeManager_VTK</a><a class="headerlink" href="#lightvegemanager-vtk" title="Permalink to this headline">¶</a></h3>
<p>Writes VTK files from LightVegeManager geometry and lighting data. Used for visualisation
We recommend the software Paraview for visualisation</p>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_VTK.VTKtriangles">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_VTK.</span></span><span class="sig-name descname"><span class="pre">VTKtriangles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_VTK.html#VTKtriangles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_VTK.VTKtriangles" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes VTK files from a triangulation mesh. Possibility to associate physical values to the
triangles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trimesh</strong> (<em>dict of list</em>) – <p>triangles mesh aggregated by indice elements</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nb">id</span> <span class="p">:</span> <span class="p">[</span><span class="n">triangle1</span><span class="p">,</span> <span class="n">triangle2</span><span class="p">,</span> <span class="o">...</span><span class="p">]}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>var</strong> – list of physical values associated to each triangle. Each element of var is a physical value for each triangle.</p></li>
</ul>
</dd>
</dl>
<p>Then, for n triangles and m values, var looks like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="o">=</span> <span class="p">[[</span><span class="n">var1_1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">var1_n</span><span class="p">],</span> <span class="o">...</span><span class="p">,</span> <span class="p">[</span><span class="n">varm_1</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">varm_n</span><span class="p">]]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>varname</strong> (<em>lits of string</em>) – list of variable names</p></li>
<li><p><strong>filename</strong> (<em>string</em>) – name and path for the output file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_VTK.VTKline">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_VTK.</span></span><span class="sig-name descname"><span class="pre">VTKline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_VTK.html#VTKline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_VTK.VTKline" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a VTK file representing a line</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>list</em>) – starting point <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> of the line</p></li>
<li><p><strong>end</strong> (<em>list</em>) – ending point <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> of the line</p></li>
<li><p><strong>filename</strong> (<em>string</em>) – name and path for the output file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_VTK.ratp_prepareVTK">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_VTK.</span></span><span class="sig-name descname"><span class="pre">ratp_prepareVTK</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ratpgrid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_VTK.html#ratp_prepareVTK"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_VTK.ratp_prepareVTK" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets and prepare data to write a voxel grid in VTK format from a RATP grid
Possibility to sets physical values to each voxel. Otherwise, it will assign leaf area density
for each voxel.</p>
<p>Then, it runs :func:VTKvoxels to write a VTK file with the grid of voxels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ratpgrid</strong> (<em>pyratp.grid</em>) – RAPT grid of voxels</p></li>
<li><p><strong>filename</strong> (<em>string</em>) – name and path for the output file</p></li>
<li><p><strong>columns</strong> (<em>list</em><em>, </em><em>optional</em>) – list of columns name of <code class="docutils literal notranslate"><span class="pre">df_values</span></code> to associate to each voxel, defaults to []</p></li>
<li><p><strong>df_values</strong> – dataframe with a <code class="docutils literal notranslate"><span class="pre">&quot;Voxel&quot;</span></code> and a <code class="docutils literal notranslate"><span class="pre">&quot;VegetationType&quot;</span></code> columns, matching ratpgrid.</p></li>
</ul>
</dd>
</dl>
<p>It stores physical values associated to each voxel that you want to print, 
defaults to None
:type df_values: pandas.Dataframe, optional</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_VTK.VTKvoxels">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_VTK.</span></span><span class="sig-name descname"><span class="pre">VTKvoxels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datafields</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varnames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nomfich</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_VTK.html#VTKvoxels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_VTK.VTKvoxels" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a VTK file with a grid of voxels and associated physical values.
Display Voxels colored by variable with Paraview
RATP Grid is written in VTK Format as a structured grid</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grid</strong> (<em>pyratp.grid</em>) – the RATP grid</p></li>
<li><p><strong>datafields</strong> – a list of 3 arrays composed of the a</p></li>
</ul>
</dd>
</dl>
<p>RATP variable to be plotted, corresponding entities, and Voxel ID</p>
<blockquote>
<div><ul class="simple">
<li><p>[0] : kxyz (numpy.array)</p></li>
<li><p>[1] : entities (numpy.array)</p></li>
<li><p>[2, …, n] : variable_0, … variable_n-2 (numpy.array)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>varnames</strong> (<em>list of string</em>) – name of the variable to be plotted</p></li>
<li><p><strong>nomfich</strong> (<em>string</em>) – the VTK filename and path</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_VTK.PlantGL_to_VTK">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_VTK.</span></span><span class="sig-name descname"><span class="pre">PlantGL_to_VTK</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'m'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'m'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_VTK.html#PlantGL_to_VTK"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_VTK.PlantGL_to_VTK" title="Permalink to this definition">¶</a></dt>
<dd><p>Directly converts a list plantGL scenes to a single VTK file
The routine aggregates all the scenes in one global triangulation and then calls :func:VTKtriangles
Possbility to rescale measure unit scenes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scenes</strong> (<em>lits of plantgl.Scene</em>) – list of scenes to be written</p></li>
<li><p><strong>path</strong> (<em>string</em>) – path of the file. File name is set by default with <code class="docutils literal notranslate"><span class="pre">&quot;triangles_plantgl_&quot;+str(i)+&quot;.vtk&quot;</span></code></p></li>
<li><p><strong>i</strong> (<em>int</em><em>, </em><em>optional</em>) – id of the file. Used if you want to batch a large number of scenes, defaults to 0</p></li>
<li><p><strong>in_unit</strong> (<em>str</em><em>, </em><em>optional</em>) – input measure unit, defaults to “m”</p></li>
<li><p><strong>out_unit</strong> (<em>str</em><em>, </em><em>optional</em>) – output measure unit, defaults to “m”</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – in_unit or out_unit not a valid entry upon the listed measure units</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_basicgeometry">
<span id="src-lightvegemanager-basicgeometry-module"></span><h2><a class="toc-backref" href="#id12"><a class="reference internal" href="#module-src.LightVegeManager_basicgeometry" title="src.LightVegeManager_basicgeometry"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_basicgeometry</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_basicgeometry" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-basicgeometry">
<h3><a class="toc-backref" href="#id13">LightVegeManager_basicgeometry</a><a class="headerlink" href="#lightvegemanager-basicgeometry" title="Permalink to this headline">¶</a></h3>
<p>Provides basic geometric operations in 3D used by LightVegeManager. 
Vectors are represented by their cartesian coordinates in a 3-tuple of floats such as v = (x, y, z)
Triangles are a list of 3 vectors representing its vertices</p>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_basicgeometry.crossproduct">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_basicgeometry.</span></span><span class="sig-name descname"><span class="pre">crossproduct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_basicgeometry.html#crossproduct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_basicgeometry.crossproduct" title="Permalink to this definition">¶</a></dt>
<dd><p>Crossproduct between two vectors v1^v2</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>v1</strong> (<em>3-tuple</em>) – vector 1</p></li>
<li><p><strong>v2</strong> (<em>3-tuple</em>) – vector 2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>crossproduct</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>3-tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_basicgeometry.middle">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_basicgeometry.</span></span><span class="sig-name descname"><span class="pre">middle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_basicgeometry.html#middle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_basicgeometry.middle" title="Permalink to this definition">¶</a></dt>
<dd><p>Middle point between v1 and v2</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>v1</strong> (<em>3-tuple</em>) – vector 1</p></li>
<li><p><strong>v2</strong> (<em>3-tuple</em>) – vector 2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>middle point <span class="math notranslate nohighlight">\(p = (v1+v2)/2\)</span></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>3-tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_basicgeometry.triangle_normal">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_basicgeometry.</span></span><span class="sig-name descname"><span class="pre">triangle_normal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangle</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_basicgeometry.html#triangle_normal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_basicgeometry.triangle_normal" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes normal of an oriented triangle (3D)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>a triangle is <code class="docutils literal notranslate"><span class="pre">[(x1,y1,z1),(x2,y2,z2),(x3,y3,z3)]</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>triangle</strong> (<em>list</em>) – triangle represented by its 3 vertices</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>normalized vector</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>3-tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_basicgeometry.triangle_elevation">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_basicgeometry.</span></span><span class="sig-name descname"><span class="pre">triangle_elevation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangle</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_basicgeometry.html#triangle_elevation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_basicgeometry.triangle_elevation" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes normal elevation of triangle</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>a triangle is <code class="docutils literal notranslate"><span class="pre">[(x1,y1,z1),(x2,y2,z2),(x3,y3,z3)]</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>triangle</strong> (<em>list</em>) – triangle represented by its 3 vertices</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>angle in degree 
elevation starts from ground to normal vector
must be between 0 and 90°</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_basicgeometry.triangle_area">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_basicgeometry.</span></span><span class="sig-name descname"><span class="pre">triangle_area</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangle</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_basicgeometry.html#triangle_area"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_basicgeometry.triangle_area" title="Permalink to this definition">¶</a></dt>
<dd><p>triangle area</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>a triangle is <code class="docutils literal notranslate"><span class="pre">[(x1,y1,z1),(x2,y2,z2),(x3,y3,z3)]</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>triangle</strong> (<em>list</em>) – triangle represented by its 3 vertices</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>area</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>algorithm is a copy of <code class="docutils literal notranslate"><span class="pre">_surf</span></code> in <code class="docutils literal notranslate"><span class="pre">alinea.caribu.caributriangleset</span></code></p>
</div>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_basicgeometry.triangle_barycenter">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_basicgeometry.</span></span><span class="sig-name descname"><span class="pre">triangle_barycenter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangle</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_basicgeometry.html#triangle_barycenter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_basicgeometry.triangle_barycenter" title="Permalink to this definition">¶</a></dt>
<dd><p>triangle barycenter</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>a triangle is <code class="docutils literal notranslate"><span class="pre">[(x1,y1,z1),(x2,y2,z2),(x3,y3,z3)]</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>triangle</strong> (<em>list</em>) – triangle represented by its 3 vertices</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>isobarycenter <span class="math notranslate nohighlight">\((s1 + s2 + s3)/3\)</span></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_basicgeometry.rescale">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_basicgeometry.</span></span><span class="sig-name descname"><span class="pre">rescale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_basicgeometry.html#rescale"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_basicgeometry.rescale" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiplies all triangle vertices by a ratio h</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>a triangle is <code class="docutils literal notranslate"><span class="pre">[(x1,y1,z1),(x2,y2,z2),(x3,y3,z3)]</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>triangles</strong> (<em>list of list</em>) – list of triangles in the same format as below</p></li>
<li><p><strong>h</strong> (<em>float</em>) – ratio</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of triangles with each triangle from input rescaled by h</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of list</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">triangles</span> <span class="o">=</span> <span class="p">[[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rescale</span><span class="p">(</span><span class="n">triangles</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">[[(0,0,0), (0,3,0), (0,3,3)], [(0,0,3), (0,0,0), (3,0,3)]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_basicgeometry.translate">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_basicgeometry.</span></span><span class="sig-name descname"><span class="pre">translate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tvec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_basicgeometry.html#translate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_basicgeometry.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves a list of triangles with a translation of vector tvec</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>a triangle is <code class="docutils literal notranslate"><span class="pre">[(x1,y1,z1),(x2,y2,z2),(x3,y3,z3)]</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>triangles</strong> (<em>list of list</em>) – list of triangles in the same format as below</p></li>
<li><p><strong>tvec</strong> (<em>3-tuple</em>) – vector</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of triangles with each triangle from input translated by tvec</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of list</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">triangles</span> <span class="o">=</span> <span class="p">[[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tvec</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">translate</span><span class="p">(</span><span class="n">triangles</span><span class="p">,</span> <span class="n">tvec</span> <span class="p">)</span>
<span class="go">[[(3,0,1), (3,1,1), (3,1,2)], [(3,0,2), (3,0,1), (4,0,2)]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_basicgeometry.zrotate">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_basicgeometry.</span></span><span class="sig-name descname"><span class="pre">zrotate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omegadeg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_basicgeometry.html#zrotate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_basicgeometry.zrotate" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotates a list of triangles in the xy plane from an angle</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>a triangle is <code class="docutils literal notranslate"><span class="pre">[(x1,y1,z1),(x2,y2,z2),(x3,y3,z3)]</span></code></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>triangles</strong> (<em>list of list</em>) – list of triangles in the same format as below</p></li>
<li><p><strong>omegadeg</strong> (<em>float</em>) – angle in degree</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of triangles with each triangle from input rotated around z axis by omegadeg</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of list</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">triangles</span> <span class="o">=</span> <span class="p">[[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zrotate</span><span class="p">(</span><span class="n">triangles</span><span class="p">,</span> <span class="mi">90</span> <span class="p">)</span>
<span class="go">[[(0,0,0), (-1,0,0), (-1,0,1)], [(0,0,1), (0,0,0), (0,1,1)]]</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_buildRATPscene">
<span id="src-lightvegemanager-buildratpscene-module"></span><h2><a class="toc-backref" href="#id14"><a class="reference internal" href="#module-src.LightVegeManager_buildRATPscene" title="src.LightVegeManager_buildRATPscene"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_buildRATPscene</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_buildRATPscene" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-buildratpscene">
<h3><a class="toc-backref" href="#id15">LightVegeManager_buildRATPscene</a><a class="headerlink" href="#lightvegemanager-buildratpscene" title="Permalink to this headline">¶</a></h3>
<p>Creation of a PyRATP.grid from inputs. The following functions create and initialize a grid from
either a triangles mesh, a l-egume grid or an empty geometric input</p>
<p>The argument <code class="docutils literal notranslate"><span class="pre">parameters</span></code> refers to one the three inputs dict of LightVegeManager. It is 
structured as so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ratp_args</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1"># Grid specifications</span>
        <span class="s2">&quot;voxel size&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">],</span>
        <span class="s2">&quot;voxel size&quot;</span> <span class="p">:</span> <span class="s2">&quot;dynamic&quot;</span><span class="p">,</span>

        <span class="s2">&quot;origin&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">xorigin</span><span class="p">,</span> <span class="n">yorigin</span><span class="p">,</span> <span class="n">zorigin</span><span class="p">],</span>
        <span class="s2">&quot;origin&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">xorigin</span><span class="p">,</span> <span class="n">yorigin</span><span class="p">],</span>

        <span class="s2">&quot;number voxels&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nz</span><span class="p">],</span>
        <span class="s2">&quot;grid slicing&quot;</span> <span class="p">:</span> <span class="s2">&quot;ground = 0.&quot;</span>
        <span class="s2">&quot;tesselation level&quot;</span> <span class="p">:</span> <span class="nb">int</span>

        <span class="c1"># Leaf angle distribution</span>
        <span class="s2">&quot;angle distrib algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;compute global&quot;</span><span class="p">,</span>
        <span class="s2">&quot;angle distrib algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;compute voxel&quot;</span><span class="p">,</span>
        <span class="s2">&quot;angle distrib algo&quot;</span> <span class="p">:</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span>

        <span class="s2">&quot;nb angle classes&quot;</span> <span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;angle distrib file&quot;</span> <span class="p">:</span> <span class="n">filepath</span><span class="p">,</span>

        <span class="c1"># Vegetation type</span>
        <span class="s2">&quot;soil reflectance&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">reflectance_band0</span><span class="p">,</span> <span class="n">reflectance_band1</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
        <span class="s2">&quot;reflectance coefficients&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">reflectance_band0</span><span class="p">,</span> <span class="n">reflectance_band1</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
        <span class="s2">&quot;mu&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">mu_scene0</span><span class="p">,</span> <span class="n">mu_scene1</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="p">}</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more details <a class="reference internal" href="inputs.html#inputs"><span class="std std-ref">Inputs description</span></a></p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_buildRATPscene.extract_grid_origin">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_buildRATPscene.</span></span><span class="sig-name descname"><span class="pre">extract_grid_origin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minmax</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_buildRATPscene.html#extract_grid_origin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_buildRATPscene.extract_grid_origin" title="Permalink to this definition">¶</a></dt>
<dd><p>_summary_</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parameters</strong> (<em>dict</em>) – RATP parameters from inputs of LightVegeManager</p></li>
<li><p><strong>minmax</strong> (<em>[</em><em>3-tuple</em><em>, </em><em>3-tuple</em><em>]</em>) – list of mininuml point and maximum point in a triangles mesh</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>origin of the grid depending of input parameters and size of the mesh</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>3-tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_buildRATPscene.build_RATPscene_from_trimesh">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_buildRATPscene.</span></span><span class="sig-name descname"><span class="pre">build_RATPscene_from_trimesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triLmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflected</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infinite</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stems_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb_input_scenes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_buildRATPscene.html#build_RATPscene_from_trimesh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_buildRATPscene.build_RATPscene_from_trimesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a RATP grid from a triangles mesh.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trimesh</strong> (<em>dict</em>) – triangles mesh aggregated by indice elements
.. code-block:: { id : [triangle1, triangle2, …]}</p></li>
<li><p><strong>minmax</strong> (<em>[</em><em>3-tuple</em><em>, </em><em>3-tuple</em><em>]</em>) – list of mininuml point and maximum point in a triangles mesh</p></li>
<li><p><strong>triLmax</strong> (<em>float</em>) – longest side of all the triangles in trimesh</p></li>
<li><p><strong>matching_ids</strong> (<em>dict</em>) – dict that matches new element indices in trimesh with specy indice and
input element indice
.. code:: matching_ids = { new_element_id : (input_element_id, specy_id)}</p></li>
<li><p><strong>parameters</strong> (<em>dict</em>) – RATP parameters from inputs of LightVegeManager</p></li>
<li><p><strong>coordinates</strong> (<em>list</em>) – [latitude, longitude, timezone]</p></li>
<li><p><strong>reflected</strong> (<em>bool</em>) – if the user wishes to activate reflected radiations</p></li>
<li><p><strong>infinite</strong> (<em>bool</em>) – if the user wishes to activate infinitisation of the grid</p></li>
<li><p><strong>stems_id</strong> (<em>list of 2-tuple</em><em>, </em><em>optional</em>) – list of potential stems element in the input scenes, defaults to None</p></li>
<li><p><strong>nb_input_scenes</strong> (<em>int</em><em>, </em><em>optional</em>) – number of input scenes in the geometry dict, defaults to 0</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>It returns 3 objects:</p>
<ul>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ratpgrid</span></code></dt><dd><p>pyratp.grid filled with areas of triangles in trimesh and input parameters</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">matching_tri_vox</span></code></dt><dd><p>dict where key is a triangle indice and value the matching voxel indice where the 
barycenter of the triangle is located</p>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">distrib</span></code></dt><dd><p>dict with a <code class="docutils literal notranslate"><span class="pre">&quot;global&quot;</span></code> key and if <code class="docutils literal notranslate"><span class="pre">[&quot;angle</span> <span class="pre">distrib</span> <span class="pre">algo&quot;]</span> <span class="pre">=</span> <span class="pre">&quot;compute</span> <span class="pre">voxel&quot;</span></code> 
a second entry where key is <code class="docutils literal notranslate"><span class="pre">&quot;voxel&quot;</span></code></p>
<p>value for <code class="docutils literal notranslate"><span class="pre">&quot;voxel&quot;</span></code> is a <code class="docutils literal notranslate"><span class="pre">numpy.array</span></code> of dimension 
<code class="docutils literal notranslate"><span class="pre">(numberofvoxels,numberofentities,numberofclasses)</span></code></p>
<p>value for <code class="docutils literal notranslate"><span class="pre">&quot;global&quot;</span></code> is a list of <code class="docutils literal notranslate"><span class="pre">numberofentities</span></code> list of <code class="docutils literal notranslate"><span class="pre">numberofclasses</span></code> 
elements</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pyratp.grid, dict, dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_buildRATPscene.build_RATPscene_empty">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_buildRATPscene.</span></span><span class="sig-name descname"><span class="pre">build_RATPscene_empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infinite</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_buildRATPscene.html#build_RATPscene_empty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_buildRATPscene.build_RATPscene_empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a RATP grid from an empty geometric input</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parameters</strong> (<em>dict</em>) – RATP parameters from inputs of LightVegeManager</p></li>
<li><p><strong>minmax</strong> (<em>[</em><em>3-tuple</em><em>, </em><em>3-tuple</em><em>]</em>) – list of mininuml point and maximum point in a triangles mesh</p></li>
<li><p><strong>coordinates</strong> (<em>list</em>) – [latitude, longitude, timezone]</p></li>
<li><p><strong>infinite</strong> (<em>bool</em>) – if the user wishes to activate infinitisation of the grid</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ratpgrid</span></code>: pyratp.grid sets with input parameters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distrib</span></code>: dict with one entry <code class="docutils literal notranslate"><span class="pre">&quot;global&quot;</span> <span class="pre">:</span> <span class="pre">[1.]</span></code></p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pyratp.grid, dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_buildRATPscene.legumescene_to_RATPscene">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_buildRATPscene.</span></span><span class="sig-name descname"><span class="pre">legumescene_to_RATPscene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">legumescene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflected</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infinite</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_buildRATPscene.html#legumescene_to_RATPscene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_buildRATPscene.legumescene_to_RATPscene" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a RATP grid of voxels from a l-egume grid format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>legumescene</strong> (<em>dict</em>) – <p>l-egume grid represented by a dict with two entries:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;LA&quot;</span></code>: equivalent to m_lais in l-egume, a numpy.array of dimension <code class="docutils literal notranslate"><span class="pre">(nent,</span> <span class="pre">nz,</span> <span class="pre">ny,</span> <span class="pre">nx)</span></code></p></li>
</ul>
<p>which represents leaf area in each voxel for each specy</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;distrib&quot;</span></code>: equivalent to ls_dif in l-egume, a numpy.array of dimension <code class="docutils literal notranslate"><span class="pre">(nent,</span> <span class="pre">nclasses)</span></code></p></li>
</ul>
<p>which represents the global leaf angle distribution for each input specy</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>legumescene is the only input geometric scene which can handle several species</p>
</div>
</p></li>
<li><p><strong>parameters</strong> (<em>dict</em>) – RATP parameters from inputs of LightVegeManager</p></li>
<li><p><strong>coordinates</strong> (<em>list</em>) – [latitude, longitude, timezone]</p></li>
<li><p><strong>reflected</strong> (<em>bool</em>) – if the user wishes to activate reflected radiations</p></li>
<li><p><strong>infinite</strong> (<em>bool</em>) – if the user wishes to activate infinitisation of the grid</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>It returns 3 objects</p>
<ul>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ratpgrid</span></code></dt><dd><p>pyratp.grid filled with areas of triangles in trimesh and input parameters</p>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">distrib</span></code></dt><dd><p>dict with only a <code class="docutils literal notranslate"><span class="pre">&quot;global&quot;</span></code> key</p>
<p>value for <code class="docutils literal notranslate"><span class="pre">&quot;global&quot;</span></code> is a list of <code class="docutils literal notranslate"><span class="pre">numberofentities</span></code> list of <code class="docutils literal notranslate"><span class="pre">numberofclasses</span></code> 
elements</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">nb0</span></code></dt><dd><p>number of empty layers between top canopy and maximum layer in legumescene</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pyratp.grid, dict, int</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_defaultvalues">
<span id="src-lightvegemanager-defaultvalues-module"></span><h2><a class="toc-backref" href="#id16"><a class="reference internal" href="#module-src.LightVegeManager_defaultvalues" title="src.LightVegeManager_defaultvalues"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_defaultvalues</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_defaultvalues" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-defaultvalues">
<h3><a class="toc-backref" href="#id17">LightVegeManager_defaultvalues</a><a class="headerlink" href="#lightvegemanager-defaultvalues" title="Permalink to this headline">¶</a></h3>
<p>Default for simulation fixed parameters
These parameters are sets in LightVegeManager if the user did not precise thoses inputs</p>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_defaultvalues.default_LightVegeManager_inputs">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_defaultvalues.</span></span><span class="sig-name descname"><span class="pre">default_LightVegeManager_inputs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_defaultvalues.html#default_LightVegeManager_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_defaultvalues.default_LightVegeManager_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>returns default parameters for LightVegeManager constructor <code class="docutils literal notranslate"><span class="pre">__init__</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>environment and light model parameters</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict, dict</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_leafangles">
<span id="src-lightvegemanager-leafangles-module"></span><h2><a class="toc-backref" href="#id18"><a class="reference internal" href="#module-src.LightVegeManager_leafangles" title="src.LightVegeManager_leafangles"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_leafangles</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_leafangles" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-leafangles">
<h3><a class="toc-backref" href="#id19">LightVegeManager_leafangles</a><a class="headerlink" href="#lightvegemanager-leafangles" title="Permalink to this headline">¶</a></h3>
<p>Handles leaf angle distribution, both in its dynamic computing or reading a file</p>
<p>An angle distribution is a list of n elements, where n is the number of angle class between 0 and
90°. Each element of this list is a percentage for leaves to be oriented from 0 to 90/n degree.
The sum of all the list entries must equal 1.</p>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_leafangles.read_distrib_file">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_leafangles.</span></span><span class="sig-name descname"><span class="pre">read_distrib_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numberofentities</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_leafangles.html#read_distrib_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_leafangles.read_distrib_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads global leaf angle distribution in a file
the file must matches the format : one specy distribution per line
each percentage separated by a coma ‘,’</p>
<p><strong>example</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">0</span>.1382,0.1664,0.1972,0.1925,0.1507,0.0903,0.0425,0.0172,0.005
<span class="m">0</span>.3,0.1,0.15,0.2,0.05,0.2
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>string</em>) – path to the file</p></li>
<li><p><strong>numberofentities</strong> (<em>int</em>) – number of species, aka numbre of lines in the file</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>distribution for each specy, number of entries on one line</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_leafangles.compute_distrib_globale">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_leafangles.</span></span><span class="sig-name descname"><span class="pre">compute_distrib_globale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numberofclasses</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_leafangles.html#compute_distrib_globale"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_leafangles.compute_distrib_globale" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculation of a global leaf angle distribution from a triangle mesh</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trimesh</strong> (<em>dict</em>) – triangles mesh aggregated by indice elements <code class="code docutils literal notranslate"><span class="pre">{</span> <span class="pre">id</span> <span class="pre">:</span> <span class="pre">[triangle1,</span> <span class="pre">triangle2,</span> <span class="pre">...]}</span></code></p></li>
<li><p><strong>matching_ids</strong> (<em>dict</em>) – <p>dict that matches new element indices in trimesh with specy indice and
input element indice, <code class="code docutils literal notranslate"><span class="pre">matching_ids</span> <span class="pre">=</span> <span class="pre">{</span> <span class="pre">new_element_id</span> <span class="pre">:</span> <span class="pre">(input_element_id,</span> <span class="pre">specy_id)}</span></code></p>
<p>this dict allows us to look how species there is the inputs geometric data</p>
</p></li>
<li><p><strong>numberofclasses</strong> (<em>int</em>) – number angle class wanted between 0 and 90 degree</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a leaf angle distribution for each specy. Each distribution is a length numberofclasses the distribution is computed on all trimesh</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_leafangles.compute_distrib_voxel">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_leafangles.</span></span><span class="sig-name descname"><span class="pre">compute_distrib_voxel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numberofclasses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numberofvoxels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_tri_vox</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_leafangles.html#compute_distrib_voxel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_leafangles.compute_distrib_voxel" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculation of a local leaf angle distribution from a triangle mesh on each voxel of a grid</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trimesh</strong> (<em>dict</em>) – triangles mesh aggregated by indice elements <code class="code docutils literal notranslate"><span class="pre">{</span> <span class="pre">id</span> <span class="pre">:</span> <span class="pre">[triangle1,</span> <span class="pre">triangle2,</span> <span class="pre">...]}</span></code></p></li>
<li><p><strong>matching_ids</strong> (<em>dict</em>) – dict that matches new element indices in trimesh with specy indice and
input element indice, <code class="code docutils literal notranslate"><span class="pre">matching_ids</span> <span class="pre">=</span> <span class="pre">{</span> <span class="pre">new_element_id</span> <span class="pre">:</span> <span class="pre">(input_element_id,</span> <span class="pre">specy_id)}</span></code>
this dict allows us to look how species there is the inputs geometric data</p></li>
<li><p><strong>numberofclasses</strong> (<em>int</em>) – number angle class wanted between 0 and 90 degree</p></li>
<li><p><strong>numberofclasses</strong> – number of non empty voxels in the grid</p></li>
<li><p><strong>matching_tri_vox</strong> (<em>dict</em>) – dict where key is a triangle indice and value the matching voxel indice where the 
barycenter of the triangle is located</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array of dimension [number of voxels][number of species][number of angle classes]
i.e. it returns for each voxel a leaf angle distribution for each specy</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_outputs">
<span id="src-lightvegemanager-outputs-module"></span><h2><a class="toc-backref" href="#id20"><a class="reference internal" href="#module-src.LightVegeManager_outputs" title="src.LightVegeManager_outputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_outputs</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_outputs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-outputs">
<h3><a class="toc-backref" href="#id21">LightVegeManager_outputs</a><a class="headerlink" href="#lightvegemanager-outputs" title="Permalink to this headline">¶</a></h3>
<p>Manages and reformat output results from the light models in pandas.Dataframe with similar columns
names.</p>
<p>Light models managed in this module:</p>
<blockquote>
<div><ul class="simple">
<li><p>RATP</p></li>
<li><p>CARIBU</p></li>
</ul>
</div></blockquote>
<p>Column names for voxels:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'VegetationType'</span></code>: id of the specy</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Iteration'</span></code>: RATP can handle multiple iterations in inputs, but it is not properly exploited in LightVegeManager yet</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Day'</span></code>: input day if LightVegeManager</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Hour'</span></code>: input hour if LightVegeManager</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Voxel'</span></code>: index of current voxel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Nx'</span></code>: index in grid following x axis, corresponds to pyrapt.grid.numx</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Ny'</span></code>: index in grid following y axis, corresponds to pyrapt.grid.numy</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Nz'</span></code>: index in grid following z axis, corresponds to pyrapt.grid.numz</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ShadedPAR'</span></code>: shaded energy in the current voxel, 0 if no direct light in the input</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'SunlitPAR'</span></code>: sunlit energy</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ShadedArea'</span></code>: leaf area in voxel which is shaded</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'SunlitArea'</span></code>: leaf area in voxel which is sunlit</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Area'</span></code>: total leaf area in the voxel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'PARa'</span></code>: ( ShadedPAR * ShadedArea + SunlitPAR * SunlitArea ) / ( ShadedArea + SunlitArea )</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Intercepted'</span></code>: relative portion of input rays intercepted by the voxel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Transmitted'</span></code>: relative portion of input rays leaving out the voxel</p></li>
</ul>
</div></blockquote>
<p>Column names for triangles:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'VegetationType'</span></code>: id of the specy</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Day'</span></code>: input day if LightVegeManager</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Hour'</span></code>: input hour if LightVegeManager</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Triangle'</span></code>: indice of the triangle</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Organ'</span></code>: element where the triangle belongs</p></li>
</ul>
<p>if ligh model is CARIBU:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'Area'</span></code>: area of the triangles</p></li>
</ul>
<p>for each bandwidth in the inputs you have two entries:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">band</span> <span class="pre">+</span> <span class="pre">&quot;</span> <span class="pre">Eabs&quot;</span></code>: energy absorbed by the triangle</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">band</span> <span class="pre">+</span> <span class="pre">&quot;</span> <span class="pre">Ei&quot;</span></code>: energy intercepted by the triangle</p></li>
</ul>
</div></blockquote>
<p>If light model is RATP:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'Area'</span></code>: area of total leaf area in the voxel where the triangle is located</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'primitive_area'</span></code>: area of the triangle</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Voxel'</span></code>: index of the voxel where the triangle is located</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Nx'</span></code>: index in grid following x axis, corresponds to pyrapt.grid.numx</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Ny'</span></code>: index in grid following y axis, corresponds to pyrapt.grid.numy</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Nz'</span></code>: index in grid following z axis, corresponds to pyrapt.grid.numz</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ShadedPAR'</span></code>: shaded energy in the current voxel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'SunlitPAR'</span></code>: sunlit energy, 0 if no direct light in the input</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'ShadedArea'</span></code>: leaf area in voxel which is shaded</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'SunlitArea'</span></code>: leaf area in voxel which is sunlit</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'PARa'</span></code>: ( ShadedPAR * ShadedArea + SunlitPAR * SunlitArea ) / ( ShadedArea + SunlitArea )</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Intercepted'</span></code>: relative portion of input rays intercepted by the voxel</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Transmitted'</span></code>: relative portion of input rays leaving out the voxel</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<p>Column names for elements:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'Day'</span></code>: input day if LightVegeManager</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Hour'</span></code>: input hour if LightVegeManager</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'Organ'</span></code>: id of current element</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;VegetationType&quot;</span></code>: id of the specy</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;Area&quot;</span></code>: area of the element (sum of all triangles belonging to current element)</p></li>
</ul>
<p>if light model is CARIBU, for each bandwidth in the optical inputs you have two entries:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">band</span> <span class="pre">+</span> <span class="pre">&quot;</span> <span class="pre">Eabs&quot;</span></code>: energy absorbed by the element, integrated on all triangles belonging to current element</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">band</span> <span class="pre">+</span> <span class="pre">&quot;</span> <span class="pre">Ei&quot;</span></code>: energy intercepted by the triangle, integrated on all triangles belonging to current element</p></li>
</ul>
</div></blockquote>
<p>if light model is RATP, the following entries are integrated on all triangles belonging to current element 
with E, current element, t triangles in E and V an entry: <span class="math notranslate nohighlight">\(\frac{\sum_{t \in E} area_t * V_t}{area_E}\)</span></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;PARa&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;Intercepted&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;Transmitted&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;SunlitPAR&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;SunlitArea&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ShadedPAR&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ShadedArea&quot;</span></code></p></li>
</ul>
</div></blockquote>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_outputs.out_ratp_empty_grid">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_outputs.</span></span><span class="sig-name descname"><span class="pre">out_ratp_empty_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hour</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_outputs.html#out_ratp_empty_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_outputs.out_ratp_empty_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an empty dataframe results for RATP</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>day</strong> (<em>int</em>) – day of simulation</p></li>
<li><p><strong>hour</strong> (<em>int</em>) – hour of simulation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns a dataframe with all the keys expected with a RATP simulation but results are empty
used if input geometry is empty</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_outputs.out_ratp_voxels">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_outputs.</span></span><span class="sig-name descname"><span class="pre">out_ratp_voxels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ratpgrid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parunit</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_outputs.html#out_ratp_voxels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_outputs.out_ratp_voxels" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts RATP results to pandas dataframe compared to the voxels</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ratpgrid</strong> (<em>pyratp.grid</em>) – RATP grid with voxels informations</p></li>
<li><p><strong>res</strong> (<em>pyratp.ratp.out_rayt</em>) – output table of RATP</p></li>
<li><p><strong>parunit</strong> (<em>string</em>) – energy unit of input
RATP expects W.m-2 in input and return results in µmol.s-1.m-2.
if <a href="#id1"><span class="problematic" id="id2">``</span></a>parunit=”W.m-2”` the outputs is converted to W.m-2, otherwise results are in µmol.s-1.m-2</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>res.T converted in a pandas Dataframe with voxels relative columns. The soil is not part</p>
</dd>
</dl>
<p>of the results
:rtype: pandas.DataFrame</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_outputs.out_ratp_triangles">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_outputs.</span></span><span class="sig-name descname"><span class="pre">out_ratp_triangles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ele_ent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_tr_vox</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voxels_outputs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_outputs.html#out_ratp_triangles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_outputs.out_ratp_triangles" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts RATP results to pandas dataframe compared to the triangles (and voxels)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trimesh</strong> (<em>dict</em>) – triangles mesh aggregated by indice elements
.. code-block:: { id : [triangle1, triangle2, …]}</p></li>
<li><p><strong>matching_ele_ent</strong> (<em>dict</em>) – dict that matches new element indices in trimesh with specy indice and
input element indice, 
.. code:: matching_ids = { new_element_id : (input_element_id, specy_id)}</p></li>
<li><p><strong>matching_tr_vox</strong> (<em>dict</em>) – dict where key is a triangle indice and value the matching voxel indice where the 
barycenter of the triangle is located</p></li>
<li><p><strong>voxels_outputs</strong> (<em>pandas.Dataframe</em>) – output of :func:out_ratp_voxels</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>output of :func:out_ratp_voxels merged with associated triangles</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_outputs.out_ratp_elements">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_outputs.</span></span><span class="sig-name descname"><span class="pre">out_ratp_elements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matching_ele_ent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflected</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflectance_coef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trianglesoutputs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_outputs.html#out_ratp_elements"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_outputs.out_ratp_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>If trimesh is not empty, aggregates RATP results by element (keys in dict trimesh)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matching_ele_ent</strong> (<em>dict</em>) – dict that matches new element indices in trimesh with specy indice and
input element indice, 
.. code:: matching_ids = { new_element_id : (input_element_id, specy_id)}</p></li>
<li><p><strong>reflected</strong> (<em>bool</em>) – if the user wishes to activate reflected radiations</p></li>
<li><p><strong>reflectance_coef</strong> (<em>list of list</em>) – coefficient for each specy and each input bandwidth</p></li>
<li><p><strong>trianglesoutputs</strong> (<em>pandas.Dataframe</em>) – output of :func:out_ratp_triangles</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dataframe integrated on element informations</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_outputs.out_caribu_mix">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_outputs.</span></span><span class="sig-name descname"><span class="pre">out_caribu_mix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rdrs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c_scene_sun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c_scene_sky</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw_sun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregated_sun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw_sky</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregated_sky</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">issensors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">issoilmesh</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_outputs.html#out_caribu_mix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_outputs.out_caribu_mix" title="Permalink to this definition">¶</a></dt>
<dd><p>Mix diffuse and direct rays results according to a ratio rdrs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rdrs</strong> (<em>float</em>) – Spitters’s model estimating for the diffuse:direct ratio</p></li>
<li><p><strong>c_scene_sun</strong> (<em>CaribuScene</em>) – CaribuScene with direct lighting computed (from a sun)</p></li>
<li><p><strong>c_scene_sky</strong> (<em>CaribuScene</em>) – CaribuScene with diffuse lighting computed (from a sky)</p></li>
<li><p><strong>raw_sun</strong> (<em>dict of dict</em>) – results of c_scene_sun for triangles</p></li>
<li><p><strong>aggregated_sun</strong> (<em>dict of dict</em>) – results of c_scene_sun aggregated by element</p></li>
<li><p><strong>raw_sky</strong> (<em>dict of dict</em>) – results of c_scene_sky for triangles</p></li>
<li><p><strong>aggregated_sky</strong> (<em>dict of dict</em>) – results of c_scene_sky aggregated by element</p></li>
<li><p><strong>issensors</strong> (<em>bool</em>) – if option virtual sensors is activated</p></li>
<li><p><strong>issoilmesh</strong> (<em>bool</em>) – if option soil mesh is activated</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>if sensors is activated, it extracts its results from aggregated_sun and aggregated_sky</p>
<p>if soilmesh is activated, it extracts its results from c_scene_sun and c_scene_sky</p>
<p>then it mixes raw, aggregated, virtual sensors and soil energy results such as</p>
<p><code class="docutils literal notranslate"><span class="pre">result</span> <span class="pre">=</span> <span class="pre">rdrs</span> <span class="pre">*</span> <span class="pre">diffuse_result</span> <span class="pre">+</span> <span class="pre">(1</span> <span class="pre">-</span> <span class="pre">rdrs)</span> <span class="pre">*</span> <span class="pre">direct_result</span></code></p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict of dict, dict of dict, dict of list, dict of float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_outputs.out_caribu_nomix">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_outputs.</span></span><span class="sig-name descname"><span class="pre">out_caribu_nomix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c_scene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregated</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">issensors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">issoilmesh</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_outputs.html#out_caribu_nomix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_outputs.out_caribu_nomix" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts only sensors and soilmesh results if activated</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>c_scene</strong> (<em>CaribuScene</em>) – instance of CaribuScene containing geometry, light source(s), opt etc…</p></li>
<li><p><strong>aggregated</strong> (<em>dict of dict</em>) – result of CaribuScene.run</p></li>
<li><p><strong>issensors</strong> (<em>bool</em>) – if option virtual sensors is activated</p></li>
<li><p><strong>issoilmesh</strong> (<em>bool</em>) – if option soil mesh is activated</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>extracts sensors results from aggregated and soil energy from c_scene</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict, dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_outputs.out_caribu_elements">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_outputs.</span></span><span class="sig-name descname"><span class="pre">out_caribu_elements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregated</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sun_up</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_outputs.html#out_caribu_elements"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_outputs.out_caribu_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts aggregated in a pandas.Dataframe following indices in LightVegeManager</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>day</strong> (<em>int</em>) – day of simulation</p></li>
<li><p><strong>hour</strong> (<em>int</em>) – hour of simulation</p></li>
<li><p><strong>trimesh</strong> (<em>dict</em>) – triangles mesh aggregated by indice elements
.. code-block:: { id : [triangle1, triangle2, …]}</p></li>
<li><p><strong>matching_ele_ent</strong> (<em>dict</em>) – dict that matches new element indices in trimesh with specy indice and
input element indice, 
.. code:: matching_ids = { new_element_id : (input_element_id, specy_id)}</p></li>
<li><p><strong>aggregated</strong> (<em>dict of dict</em>) – result of CaribuScene.run</p></li>
<li><p><strong>sun_up</strong> (<em>bool</em>) – if sun elevation is &gt; 2° and direct rays are &gt; 0 W.m²</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>aggregated results rearrange in a Dataframe with element correspondance in LightVegeManager</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_outputs.out_caribu_triangles">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_outputs.</span></span><span class="sig-name descname"><span class="pre">out_caribu_triangles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sun_up</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_outputs.html#out_caribu_triangles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_outputs.out_caribu_triangles" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts raw in a pandas.Dataframe following simulation datas</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>day</strong> (<em>int</em>) – day of simulation</p></li>
<li><p><strong>hour</strong> (<em>int</em>) – hour of simulation</p></li>
<li><p><strong>trimesh</strong> (<em>dict</em>) – triangles mesh aggregated by indice elements
.. code-block:: { id : [triangle1, triangle2, …]}</p></li>
<li><p><strong>matching_ele_ent</strong> (<em>dict</em>) – dict that matches new element indices in trimesh with specy indice and
input element indice, 
.. code:: matching_ids = { new_element_id : (input_element_id, specy_id)}</p></li>
<li><p><strong>raw</strong> (<em>dict of dict</em>) – triangles results from CaribuScene.run</p></li>
<li><p><strong>sun_up</strong> (<em>bool</em>) – if sun elevation is &gt; 2° and direct rays are &gt; 0 W.m²</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>triangle results rearrange in a Dataframe</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Dataframe</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_plantGL">
<span id="src-lightvegemanager-plantgl-module"></span><h2><a class="toc-backref" href="#id22"><a class="reference internal" href="#module-src.LightVegeManager_plantGL" title="src.LightVegeManager_plantGL"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_plantGL</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_plantGL" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-plantgl">
<h3><a class="toc-backref" href="#id23">LightVegeManager_plantGL</a><a class="headerlink" href="#lightvegemanager-plantgl" title="Permalink to this headline">¶</a></h3>
<p>visualisation plantGL</p>
</div>
</div>
<div class="section" id="module-src.LightVegeManager_sky">
<span id="src-lightvegemanager-sky-module"></span><h2><a class="toc-backref" href="#id24"><a class="reference internal" href="#module-src.LightVegeManager_sky" title="src.LightVegeManager_sky"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_sky</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_sky" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-sky">
<h3><a class="toc-backref" href="#id25">LightVegeManager_sky</a><a class="headerlink" href="#lightvegemanager-sky" title="Permalink to this headline">¶</a></h3>
<p>Build a sky from LightVegeManager input informations</p>
<dl class="simple">
<dt>Possible sky options:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;turtle46&quot;</span></code> : soc sky composed by 46 directions in a turtle shape</p></li>
<li><p>filepath : string indicating a file path</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[nb_azimut,</span> <span class="pre">nb_zenith,</span> <span class="pre">&quot;soc&quot;</span> <span class="pre">or</span> <span class="pre">&quot;uoc&quot;]</span></code> : build a sky with a custom number of directions</p></li>
</ul>
</dd>
<dt>output :</dt><dd><ul class="simple">
<li><p>with RATP : pyratp.skyvault</p></li>
<li><p>with CARIBU : [(weight, (dir[0], dir[1], dir[2])), … ]</p></li>
</ul>
</dd>
</dl>
<p>Sky file is in RATP format</p>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_sky.RATPsky">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_sky.</span></span><span class="sig-name descname"><span class="pre">RATPsky</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">skytype</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_sky.html#RATPsky"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_sky.RATPsky" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a pyratp.skyvault</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>skytype</strong> (<em>string</em><em> or </em><em>list</em>) – the environment[“sky”] from the LightVegeManager inputs. It is either:
* <code class="docutils literal notranslate"><span class="pre">&quot;turtle46&quot;</span></code>
* a filepath
* [nb_azimut, nb_zenith, “soc” or “uoc”], nb_azimut is the number of azimut directions and nb_zenith the number of zenital directions for cutting out the sky</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if skytype is not one of the curretn 3 possibilities</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a sky in RATP format</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pyratp.skyvault</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_sky.CARIBUsky">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_sky.</span></span><span class="sig-name descname"><span class="pre">CARIBUsky</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">skytype</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_sky.html#CARIBUsky"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_sky.CARIBUsky" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a sky in CARIBU format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>skytype</strong> (<em>string</em><em> or </em><em>list</em>) – the environment[“sky”] from the LightVegeManager inputs. It is either:
* <code class="docutils literal notranslate"><span class="pre">&quot;turtle46&quot;</span></code>
* a filepath
* [nb_azimut, nb_zenith, “soc” or “uoc”], nb_azimut is the number of azimut directions and nb_zenith the number of zenital directions for cutting out the sky</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if skytype is not one of the curretn 3 possibilities</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of the directions representing the sky.</p>
</dd>
</dl>
<p>each entry of the list is a tuple (weight, vector), where weight is a float for the weight the direction and vector, a tuple (x, y, z), 
representing the position of the sky direction, from sky to the ground
:rtype: list of tuple</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_sky.writeskyfile">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_sky.</span></span><span class="sig-name descname"><span class="pre">writeskyfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">az</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">omega</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_sky.html#writeskyfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_sky.writeskyfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a file with sky information, readable by LightVegeManager</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>h</strong> (<em>list of float</em>) – Elevation angle (degrees) pointing to the center of a sky fraction</p></li>
<li><p><strong>az</strong> (<em>list of float</em>) – Azimuth angle (degrees) pointing to the center of a sky fraction</p></li>
<li><p><strong>omega</strong> (<em>list of float</em>) – Solid angle associated to the direction of incidence</p></li>
<li><p><strong>weights</strong> (<em>list of float</em>) – Relative contribution of the sky fraction to the sky illumination)</p></li>
<li><p><strong>filepath</strong> (<em>list of float</em>) – name of the file to write</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_sky.discrete_sky">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_sky.</span></span><span class="sig-name descname"><span class="pre">discrete_sky</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_azimuts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_zeniths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sky_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_sky.html#discrete_sky"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_sky.discrete_sky" title="Permalink to this definition">¶</a></dt>
<dd><p>Cuts out a sky following input number of directions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_azimuts</strong> (<em>int</em>) – number of azimut directions of the sky</p></li>
<li><p><strong>n_zeniths</strong> (<em>int</em>) – number of zenital directions of the sky</p></li>
<li><p><strong>sky_type</strong> (<em>string</em>) – <code class="docutils literal notranslate"><span class="pre">&quot;soc&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;uoc&quot;</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>4 output lists of length n_azimuts * n_zeniths
* ele: elevations in degrees (angle soil to sky)
* azi: azimuts in degrees
* omega: solid angle of directions
* pc: relative contribution of directions to incident diffuse radiation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list, list, list, list</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_stems">
<span id="src-lightvegemanager-stems-module"></span><h2><a class="toc-backref" href="#id26"><a class="reference internal" href="#module-src.LightVegeManager_stems" title="src.LightVegeManager_stems"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_stems</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_stems" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-stems">
<h3><a class="toc-backref" href="#id27">LightVegeManager_stems</a><a class="headerlink" href="#lightvegemanager-stems" title="Permalink to this headline">¶</a></h3>
<p>Manages stems element (opaque)</p>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_stems.extract_stems_from_MTG">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_stems.</span></span><span class="sig-name descname"><span class="pre">extract_stems_from_MTG</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">MTG</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_stems.html#extract_stems_from_MTG"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_stems.extract_stems_from_MTG" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts stems element from a MTG table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>MTG</strong> (<em>openalea.mtg.mtg.MTG</em>) – MTG table descripting plant elements</p></li>
<li><p><strong>entity_id</strong> (<em>int</em>) – indice of the corresponding geometric scene of the MTG table scene in the LightVegeManager inputs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">stems</span></code> is a list where each entry is a tuple (element indice, entity_id)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_stems.manage_stems_for_ratp">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_stems.</span></span><span class="sig-name descname"><span class="pre">manage_stems_for_ratp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stems_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratp_parameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_stems.html#manage_stems_for_ratp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_stems.manage_stems_for_ratp" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a specy to separate stems from leaves in vegetation parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stems_id</strong> (<em>list of tuple</em>) – list of tuple (element_id, specy_id)</p></li>
<li><p><strong>matching_ids</strong> (<em>dict</em>) – dict that matches new element indices in trimesh with specy indice and
input element indice
<code class="code docutils literal notranslate"><span class="pre">matching_ids</span> <span class="pre">=</span> <span class="pre">{</span> <span class="pre">new_element_id</span> <span class="pre">:</span> <span class="pre">(input_element_id,</span> <span class="pre">specy_id)}</span></code></p></li>
<li><p><strong>ratp_parameters</strong> (<em>dict</em>) – RATP parameters from inputs of LightVegeManager</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if too many stems elements are identified comparing to the total number of elements</p>
</dd>
</dl>
<p>cumulated over all species</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_sun">
<span id="src-lightvegemanager-sun-module"></span><h2><a class="toc-backref" href="#id28"><a class="reference internal" href="#module-src.LightVegeManager_sun" title="src.LightVegeManager_sun"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_sun</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_sun" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-sun">
<h3><a class="toc-backref" href="#id29">LightVegeManager_sun</a><a class="headerlink" href="#lightvegemanager-sun" title="Permalink to this headline">¶</a></h3>
<p>Build a sun respecting each light model format</p>
<p>For computing the sun position you can either use CARIBU or RATP algorithm, which slightly change
in the process</p>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_sun.ratp_sun">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_sun.</span></span><span class="sig-name descname"><span class="pre">ratp_sun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truesolartime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_sun.html#ratp_sun"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_sun.ratp_sun" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts output RATP sundirection routine to CARIBU light format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>day</strong> (<em>int</em>) – input day</p></li>
<li><p><strong>hour</strong> (<em>int</em>) – input hour</p></li>
<li><p><strong>coordinates</strong> (<em>list</em>) – [latitude, longitude, timezone]</p></li>
<li><p><strong>truesolartime</strong> (<em>bool</em>) – activates true solar time or local time to compute sun position</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>sun direction in a tuple with cartesian coordinates (x,y,z), vector is oriented from sky to ground</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_sun.caribu_sun">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_sun.</span></span><span class="sig-name descname"><span class="pre">caribu_sun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truesolartime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_sun.html#caribu_sun"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_sun.caribu_sun" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute sun direction from CARIBU algorithm</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>day</strong> (<em>int</em>) – input day</p></li>
<li><p><strong>hour</strong> (<em>int</em>) – input hour</p></li>
<li><p><strong>coordinates</strong> (<em>list</em>) – [latitude, longitude, timezone]</p></li>
<li><p><strong>truesolartime</strong> (<em>bool</em>) – activates true solar time or local time to compute sun position</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>sun direction in a tuple with cartesian coordinates (x,y,z), vector is oriented from sky to ground</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_sun.print_sun">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_sun.</span></span><span class="sig-name descname"><span class="pre">print_sun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truesolartime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_sun.html#print_sun"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_sun.print_sun" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints sun position ouputs from RATP and CARIBU algorithm with the same inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>day</strong> (<em>int</em>) – input day</p></li>
<li><p><strong>hour</strong> (<em>int</em>) – input hour</p></li>
<li><p><strong>coordinates</strong> (<em>list</em>) – [latitude, longitude, timezone]</p></li>
<li><p><strong>truesolartime</strong> (<em>bool</em>) – activates true solar time or local time to compute sun position</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_tesselator">
<span id="src-lightvegemanager-tesselator-module"></span><h2><a class="toc-backref" href="#id30"><a class="reference internal" href="#module-src.LightVegeManager_tesselator" title="src.LightVegeManager_tesselator"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_tesselator</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_tesselator" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-tesselator">
<h3><a class="toc-backref" href="#id31">LightVegeManager_tesselator</a><a class="headerlink" href="#lightvegemanager-tesselator" title="Permalink to this headline">¶</a></h3>
<p>Handles tesselation of a triangulation, the subdivision of triangulation.
The tesselation was initially made to have a better matching of a triangle mesh in a grid of voxels
and avoid triangle to be located in several voxels</p>
<p>Tesselation operates as a recursive function until a certain level is reached</p>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_tesselator.whichvoxel">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_tesselator.</span></span><span class="sig-name descname"><span class="pre">whichvoxel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mygrid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_tesselator.html#whichvoxel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_tesselator.whichvoxel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns in which voxel p is located</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p</strong> (<em>list</em><em> or </em><em>tuple</em>) – 3D vector located in the grid</p></li>
<li><p><strong>mygrid</strong> (<em>pyratp.grid</em>) – RATP grid</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns the voxels where p is located in a list [kx, ky, kz] where ki is the indice 
voxel on each axis, [0, 0, 0] is origin voxel</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_tesselator.samevoxel">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_tesselator.</span></span><span class="sig-name descname"><span class="pre">samevoxel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">voxels</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_tesselator.html#samevoxel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_tesselator.samevoxel" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if all voxels in list voxels are the same</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>voxels</strong> (<em>list</em>) – list of voxels in format [kx, ky, kz]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>if all elements of voxels are the same</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_tesselator.tesselate">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_tesselator.</span></span><span class="sig-name descname"><span class="pre">tesselate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mygrid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangle</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_tesselator.html#tesselate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_tesselator.tesselate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the triangle is strictly inside a voxel or between several voxels. If so, it cuts out
triangle in 4 smaller triangles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mygrid</strong> (<em>pyratp.grid</em>) – RATP voxels grid</p></li>
<li><p><strong>triangle</strong> (<em>list of tuple</em>) – triangle represented by its 3 vertices <code class="code docutils literal notranslate"><span class="pre">triangle</span> <span class="pre">=</span> <span class="pre">[(x1,</span> <span class="pre">y1,</span> <span class="pre">z1),</span> <span class="pre">(x2,</span> <span class="pre">y2,</span> <span class="pre">z2),</span> <span class="pre">(x3,</span> <span class="pre">y3,</span> <span class="pre">z3)]</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>if the triangle is inside a voxel, it returns the input triangle in a 1-list</p></li>
<li><p>else if the triangle is between several voxels, it cuts out triangle in four smaller triangles from its vertices and barycenter</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of triangle</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_tesselator.tesselate2">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_tesselator.</span></span><span class="sig-name descname"><span class="pre">tesselate2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangle</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_tesselator.html#tesselate2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_tesselator.tesselate2" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as :func:tesselate but without the grid matching</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>triangle</strong> (<em>list of tuple</em>) – triangle represented by its 3 vertices <code class="code docutils literal notranslate"><span class="pre">triangle</span> <span class="pre">=</span> <span class="pre">[(x1,</span> <span class="pre">y1,</span> <span class="pre">z1),</span> <span class="pre">(x2,</span> <span class="pre">y2,</span> <span class="pre">z2),</span> <span class="pre">(x3,</span> <span class="pre">y3,</span> <span class="pre">z3)]</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>it cuts out triangle in four smaller triangles from its vertices and barycenter</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of triangle</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_tesselator.iterate_trianglesingrid">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_tesselator.</span></span><span class="sig-name descname"><span class="pre">iterate_trianglesingrid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mygrid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levelmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangles_shape</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_tesselator.html#iterate_trianglesingrid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_tesselator.iterate_trianglesingrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursion on a triangle, while its subdivision doesn’t match an RATP grid or exceed a certain level of tesselation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>triangle</strong> (<em>list of tuple</em>) – triangle represented by its 3 vertices <code class="code docutils literal notranslate"><span class="pre">triangle</span> <span class="pre">=</span> <span class="pre">[(x1,</span> <span class="pre">y1,</span> <span class="pre">z1),</span> <span class="pre">(x2,</span> <span class="pre">y2,</span> <span class="pre">z2),</span> <span class="pre">(x3,</span> <span class="pre">y3,</span> <span class="pre">z3)]</span></code></p></li>
<li><p><strong>mygrid</strong> (<em>pyratp.grid</em>) – RATP voxels grid</p></li>
<li><p><strong>level</strong> (<em>int</em>) – current level of tesselation, i.e. how many times we cut out the initial triangle</p></li>
<li><p><strong>levelmax</strong> (<em>int</em>) – final level of tesselation to not be exceeded</p></li>
<li><p><strong>triangles_shape</strong> (<em>list of triangles</em>) – list of triangles used to stock new triangles or input <code class="docutils literal notranslate"><span class="pre">triangle</span></code> if no tesselation is computed</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">triangles_shape</span></code> updates with input <code class="docutils literal notranslate"><span class="pre">triangle</span></code> or new triangles if tesselation was activated</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of triangles</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_tesselator.iterate_triangles">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_tesselator.</span></span><span class="sig-name descname"><span class="pre">iterate_triangles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">triangle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levelmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangles_shape</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_tesselator.html#iterate_triangles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_tesselator.iterate_triangles" title="Permalink to this definition">¶</a></dt>
<dd><p>Subdivide a triangle until its tesselation reaches levelmax. It stocks the new triangles in <code class="docutils literal notranslate"><span class="pre">triangle_shape</span></code>
Recursive function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>triangle</strong> (<em>list of tuple</em>) – triangle represented by its 3 vertices <code class="code docutils literal notranslate"><span class="pre">triangle</span> <span class="pre">=</span> <span class="pre">[(x1,</span> <span class="pre">y1,</span> <span class="pre">z1),</span> <span class="pre">(x2,</span> <span class="pre">y2,</span> <span class="pre">z2),</span> <span class="pre">(x3,</span> <span class="pre">y3,</span> <span class="pre">z3)]</span></code></p></li>
<li><p><strong>level</strong> (<em>int</em>) – current level of tesselation, i.e. how many times we cut out the initial triangle</p></li>
<li><p><strong>levelmax</strong> (<em>int</em>) – final level of tesselation to not be exceeded</p></li>
<li><p><strong>triangles_shape</strong> (<em>list of triangles</em>) – list of triangles used to stock new triangles or input <code class="docutils literal notranslate"><span class="pre">triangle</span></code> if no tesselation is computed</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">triangles_shape</span></code> updates with new triangles from tesselation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of triangles</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_transfer">
<span id="src-lightvegemanager-transfer-module"></span><h2><a class="toc-backref" href="#id32"><a class="reference internal" href="#module-src.LightVegeManager_transfer" title="src.LightVegeManager_transfer"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_transfer</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_transfer" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-transfer">
<h3><a class="toc-backref" href="#id33">LightVegeManager_transfer</a><a class="headerlink" href="#lightvegemanager-transfer" title="Permalink to this headline">¶</a></h3>
<p>Handles transfer of LightVegeManager results to plant Models.</p>
<p>Currently, it manages CN-Wheat and l-egume. Only l-egume needs additionnal processes to
converts Dataframe results in a compatible format.</p>
<p>l-egume expects the absorb PAR either per plant or locally following a grid of voxels, and the transmitted PAR
locally following a grid of voxels. Here, we will convert and transform results for CARIBU and RATP to those l-egume format.</p>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_transfer.transfer_ratp_legume">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_transfer.</span></span><span class="sig-name descname"><span class="pre">transfer_ratp_legume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m_lais</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratp_grid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">voxels_outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-08</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_transfer.html#transfer_ratp_legume"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_transfer.transfer_ratp_legume" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfers LightVegeManager outputs from RATP to l-egume
Absorb and transmitted PAR will follow a RATP grid of voxels, matching the dimensions of intern l-egume grid of voxels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>m_lais</strong> (<em>numpy.array</em>) – leaf area represented in a numpy.array of dimension 
[number of species, number of z layers, number of y layers, number of x layers]</p></li>
<li><p><strong>energy</strong> (<em>float</em>) – input energy</p></li>
<li><p><strong>ratp_grid</strong> (<em>pyratp.grid</em>) – RATP grid of voxels</p></li>
<li><p><strong>voxels_outputs</strong> (<em>pandas.Dataframe</em>) – results from LightVegeManager</p></li>
<li><p><strong>nb0</strong> (<em>int</em>) – number of empty layers from top of the canopy and maximum z layers in m_lais</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – criteria of minimum intercepted portion of PAR in a non empty voxel</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>two array with lighting informations</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">res_abs_i</span></code>: absorb PAR in each voxel for RATP grid of voxels. It has the same dimensions as <code class="docutils literal notranslate"><span class="pre">m_lais</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">res_trans</span></code>: transmitted PAR in each voxel, i.e. the energy leaving the voxels from input rays. This value is not dependent on specy</p></li>
</ul>
</div></blockquote>
<p>dimensions are (number of z layers, number of y layers, number of x layers)</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array, numpy.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_transfer.transfer_caribu_legume">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_transfer.</span></span><span class="sig-name descname"><span class="pre">transfer_caribu_legume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skylayer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elements_outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensors_outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensors_dxyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensors_nxyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m_lais</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_invar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_lstring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_dicFeuilBilanR</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infinite</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_transfer.html#transfer_caribu_legume"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_transfer.transfer_caribu_legume" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfers LightVegeManager outputs from CARIBU to l-egume
We will update list_invar which stores the total intercepted energy for each plant, and return 
an array storing transmitted energy following the intern grid of voxels in l-egume. To do so, we
used virtual sensors in CARIBU to get incoming radiations in selected locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy</strong> (<em>float</em>) – input energy</p></li>
<li><p><strong>skylayer</strong> (<em>int</em>) – number of empty layers from top of the canopy and maximum z layers in m_lais</p></li>
<li><p><strong>id</strong> (<em>_type_</em>) – _description_</p></li>
<li><p><strong>elements_outputs</strong> (<em>pandas.Dataframe</em>) – Dataframe results of elements formatted by :func:LightVegeManager_outputs.out_caribu_elements</p></li>
<li><p><strong>sensors_outputs</strong> – lighting results of virtual sensors form CARIBU in the format</p></li>
</ul>
</dd>
</dl>
<dl>
<dt>for each bandwidth computed, </dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sensors_outputs</span><span class="p">[</span><span class="n">band</span><span class="o">+</span><span class="s2">&quot; Eabs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">sensor_id</span> <span class="p">:</span> <span class="n">energy</span><span class="p">}</span>
<span class="n">sensors_outputs</span><span class="p">[</span><span class="n">band</span><span class="o">+</span><span class="s2">&quot; Ei&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">sensor_id</span> <span class="p">:</span> <span class="n">energy</span><span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sensors_dxyz</strong> (<em>list</em>) – size of sides of a voxel in the grid of virtual sensors [dx, dy, dz]</p></li>
<li><p><strong>sensors_nxyz</strong> (<em>list</em>) – number of sensors in each direction in the grid [nx, ny, nz]</p></li>
<li><p><strong>m_lais</strong> (<em>numpy.array</em>) – leaf area represented in a numpy.array of dimension 
[number of species, number of z layers, number of y layers, number of x layers]</p></li>
<li><p><strong>list_invar</strong> – from l-egume, each element corresponds to an input specy of l-egume. Each element is a dict</p></li>
</ul>
</dd>
</dl>
<p>invar stores instant intern variables of l-egume.
:type list_invar: list of dict
:param list_lstring: from l-egume, each element corresponds to an input specy of l-egume. Each element is a dict
lstring stores the l-system of each plant
:type list_lstring: list of dict
:param list_dicFeuilBilanR: from l-egume, each element corresponds to an input specy of l-egume. Each element is a dict
dicFeuiBilanR stores correspondances between voxels grid and each plant
:type list_dicFeuilBilanR: list of dict
:param infinite: if the user wishes to activate infinitisation of the grid
:type infinite: bool
:param epsilon: criteria of minimum intercepted portion of PAR in a voxel (if res_abs_i is zero, l-egume will crash)
:type epsilon: float
:raises ValueError: Virtual sensors and finite scene doesn’t work yet with CARIBU
:return:</p>
<blockquote>
<div><ul class="simple">
<li><p>it updates <code class="docutils literal notranslate"><span class="pre">list_invar</span></code> and its key entries <code class="docutils literal notranslate"><span class="pre">&quot;parap&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;parip&quot;</span></code>, each element if the scipy.array is the sum of</p></li>
</ul>
<p>all intercepted energy for each plant. This process is a rewrite of <code class="docutils literal notranslate"><span class="pre">calc_paraF</span></code> in ShootMorpho.py module of l-egume, adapted to LightVegeManager numerotation of triangles</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">res_trans</span></code> an array of transmitted energy for each voxel in a grid of dimensions <code class="docutils literal notranslate"><span class="pre">sensors_dxyz</span> <span class="pre">*</span> <span class="pre">sensors_nxyz</span></code></p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-src.LightVegeManager_trianglesmesh">
<span id="src-lightvegemanager-trianglesmesh-module"></span><h2><a class="toc-backref" href="#id34"><a class="reference internal" href="#module-src.LightVegeManager_trianglesmesh" title="src.LightVegeManager_trianglesmesh"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_trianglesmesh</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_trianglesmesh" title="Permalink to this headline">¶</a></h2>
<p>LightVegeManager_trianglesmesh</p>
<p>It builds and handles triangulation mesh.</p>
<p>The main triangulation format in LightVegeManager is the CARIBU format:
scene (dict): a {primitive_id: [triangle,]} dict. A triangle is a list of 3-tuples points coordinates.
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">scene</span> <span class="o">=</span> <span class="p">{</span>   <span class="c1"># element 0</span>
            <span class="mi">0</span> <span class="p">:</span> <span class="p">[</span> 
                    <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)],</span>  <span class="c1"># triangle 0 of element 0</span>
                    <span class="p">[(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">)]</span> <span class="c1"># triangle 1 of element 0</span>
                <span class="p">]</span> <span class="p">,</span>

            <span class="c1"># element 1</span>
            <span class="mi">1</span> <span class="p">:</span> <span class="p">[</span>
                    <span class="p">[(</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span> <span class="p">(</span><span class="mi">21</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">22</span><span class="p">)],</span> 
                    <span class="p">[(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">)]</span>
                <span class="p">]</span>
        <span class="p">}</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more details <a class="reference internal" href="inputs.html#inputs"><span class="std std-ref">Inputs description</span></a></p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_trianglesmesh.triangles_entity">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_trianglesmesh.</span></span><span class="sig-name descname"><span class="pre">triangles_entity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cscene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_trianglesmesh.html#triangles_entity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_trianglesmesh.triangles_entity" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of triangles belonging to the specy <code class="docutils literal notranslate"><span class="pre">entity_id</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cscene</strong> (<em>dict of list</em>) – LightVegeManager triangulations mesh</p></li>
<li><p><strong>entity_id</strong> (<em>int</em>) – specy indice in matching_ids</p></li>
<li><p><strong>matching_ids</strong> (<em>dict</em>) – <p>dict that matches new element indices in cscene with specy indice and
input element indice, 
.. code:: matching_ids = { new_element_id : (input_element_id, specy_id)}</p>
<p>this dict allows us to look how species there is the inputs geometric data</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of triangles belonging to <code class="docutils literal notranslate"><span class="pre">entity_id</span></code> in <code class="docutils literal notranslate"><span class="pre">cscene</span></code>, a triangle is <code class="docutils literal notranslate"><span class="pre">[(x1,</span> <span class="pre">y1,</span> <span class="pre">z1),</span> <span class="pre">(x2,</span> <span class="pre">y2,</span> <span class="pre">z2),</span> <span class="pre">(x3,</span> <span class="pre">y3,</span> <span class="pre">z3)]</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_trianglesmesh.globalid_to_elementid">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_trianglesmesh.</span></span><span class="sig-name descname"><span class="pre">globalid_to_elementid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cscene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangleid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_trianglesmesh.html#globalid_to_elementid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_trianglesmesh.globalid_to_elementid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the element index in cscene from a global triangle indice, 
as if triangles were in a list without a sorting by element.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cscene</strong> (<em>dict of list</em>) – LightVegeManager triangulations mesh</p></li>
<li><p><strong>triangleid</strong> (<em>int</em>) – indice from 0 to total number of triangles in cscene</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>IndexError</strong> – if triangleid &gt; total number of triangles in cscene</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>element indice where triangleid belongs in cscene</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_trianglesmesh.globalid_to_triangle">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_trianglesmesh.</span></span><span class="sig-name descname"><span class="pre">globalid_to_triangle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cscene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">triangleid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_trianglesmesh.html#globalid_to_triangle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_trianglesmesh.globalid_to_triangle" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the corresponding triangle in cscene from a global triangle indice,
as if triangles were in a list without a sorting by element.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cscene</strong> (<em>dict of list</em>) – LightVegeManager triangulations mesh</p></li>
<li><p><strong>triangleid</strong> (<em>int</em>) – indice from 0 to total number of triangles in cscene</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>IndexError</strong> – if triangleid &gt; total number of triangles in cscene</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Corresponding triangle in cscene</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list of tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_trianglesmesh.compute_area_max">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_trianglesmesh.</span></span><span class="sig-name descname"><span class="pre">compute_area_max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cscene</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_trianglesmesh.html#compute_area_max"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_trianglesmesh.compute_area_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum triangle area in a triangulation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cscene</strong> (<em>dict of list</em>) – LightVegeManager triangulations mesh</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>maximum triangle area in <code class="docutils literal notranslate"><span class="pre">cscene</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_trianglesmesh.compute_minmax_coord">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_trianglesmesh.</span></span><span class="sig-name descname"><span class="pre">compute_minmax_coord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cscene</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_trianglesmesh.html#compute_minmax_coord"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_trianglesmesh.compute_minmax_coord" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum and minimum point in all triangulation mesh</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cscene</strong> (<em>dict of list</em>) – LightVegeManager triangulations mesh</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>minimum point, maximum point</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list, list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_trianglesmesh.compute_trilenght_max">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_trianglesmesh.</span></span><span class="sig-name descname"><span class="pre">compute_trilenght_max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cscene</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_trianglesmesh.html#compute_trilenght_max"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_trianglesmesh.compute_trilenght_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for maximum side of an axis oriented voxel where all triangles could fit in</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cscene</strong> (<em>dict of list</em>) – LightVegeManager triangulations mesh</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>maximum side of an axis oriented voxel where all triangles in cscene could fit in</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_trianglesmesh.chain_triangulations">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_trianglesmesh.</span></span><span class="sig-name descname"><span class="pre">chain_triangulations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_trianglesmesh.html#chain_triangulations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_trianglesmesh.chain_triangulations" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregates all input geometric scenes in one global triangulation</p>
<blockquote>
<div><p>Current known formats:</p>
<blockquote>
<div><ul class="simple">
<li><p>plantGL scene</p></li>
<li><p>VGX file</p></li>
<li><p>CARIBU triangulation format (which is used in LightVegeManager for the global scene)</p></li>
<li><p>MTG table with <code class="docutils literal notranslate"><span class="pre">&quot;geometry&quot;</span></code> identifier</p></li>
<li><p>l-egume grid: dict of two entries, leaf area through a voxels grid and leaf angle distribution, for each specy</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<p>Only l-egume grid can stores multiple species, otherwise each entry scene must represent one specy
:param scenes: <code class="docutils literal notranslate"><span class="pre">geometric[&quot;scenes&quot;]</span></code> from LightVegeManager inputs, list of geometric scenes. Scenes can be in different format in the list.
:type scenes: list
:return:</p>
<blockquote>
<div><p>it returns 4 objects</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">complete_trimesh</span></code>: global triangulation which aggregates all input scenes. It is in CARIBU format</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">matching_ids</span></code>: dict which stores correspondances between new element indice, element indice in the input and specy indice</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">legume_grid</span></code>: boolean specifing if at least one l-egume grid is among the input scenes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id_legume_scene</span></code>: indice in the input scenes of a l-egume grid</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict of list, dict of list, bool, int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_trianglesmesh.vgx_to_caribu">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_trianglesmesh.</span></span><span class="sig-name descname"><span class="pre">vgx_to_caribu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_element</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_trianglesmesh.html#vgx_to_caribu"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_trianglesmesh.vgx_to_caribu" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads VGX file and converts them in CARIBU scene format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>string</em>) – path name of the file</p></li>
<li><p><strong>id_element</strong> (<em>int</em>) – element indice where the triangulation will be stored</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>triangulation in CARIBU format <code class="docutils literal notranslate"><span class="pre">{id_element</span> <span class="pre">:</span> <span class="pre">[triangle,]}</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict of list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_trianglesmesh.apply_transformations">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_trianglesmesh.</span></span><span class="sig-name descname"><span class="pre">apply_transformations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cscene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cscene_unit</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_trianglesmesh.html#apply_transformations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_trianglesmesh.apply_transformations" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies geometric transformations on some part of the triangulation set in input datas
Each transformation applies on all triangles from the same input scene.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cscene</strong> (<em>dict of list</em>) – LightVegeManager triangulations mesh</p></li>
<li><p><strong>matching_ids</strong> (<em>dict</em>) – <p>dict that matches new element indices in cscene with specy indice and
input element indice,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">matching_ids</span> <span class="o">=</span> <span class="p">{</span> <span class="n">new_element_id</span> <span class="p">:</span> <span class="p">(</span><span class="n">input_element_id</span><span class="p">,</span> <span class="n">specy_id</span><span class="p">)}</span>
</pre></div>
</div>
<p>this dict allows us to look how species there is the inputs geometric data</p>
</p></li>
<li><p><strong>transformations</strong> – dict containing which geometric to apply on which element</p></li>
</ul>
</dd>
</dl>
<p>Possible transformations:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[&quot;scenes</span> <span class="pre">unit]</span> <span class="pre">=</span> <span class="pre">{id_scene:</span> <span class="pre">unit}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[&quot;rescale&quot;]</span> <span class="pre">=</span> <span class="pre">{id_scene:</span> <span class="pre">h}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[&quot;translate&quot;]</span> <span class="pre">=</span> <span class="pre">{id_scene:</span> <span class="pre">vector}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[&quot;xyz</span> <span class="pre">orientation&quot;]</span> <span class="pre">=</span> <span class="pre">{id_scene:</span> <span class="pre">orientation}</span></code></p></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">id_scene</span></code> is the index in the input geometric scenes list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cscene_unit</strong> (<em>string</em>) – measure unit of cscene</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – unit is not in the list <code class="docutils literal notranslate"><span class="pre">['mm','cm','dm','m','dam','hm','km']</span></code></p></li>
<li><p><strong>ValueError</strong> – unit is not in the list <code class="docutils literal notranslate"><span class="pre">['mm','cm','dm','m','dam','hm','km']</span></code></p></li>
<li><p><strong>ValueError</strong> – xyz orientation is not one of <code class="docutils literal notranslate"><span class="pre">&quot;x+</span> <span class="pre">=</span> <span class="pre">S&quot;,</span> <span class="pre">&quot;x+</span> <span class="pre">=</span> <span class="pre">E&quot;,</span> <span class="pre">&quot;x+</span> <span class="pre">=</span> <span class="pre">W&quot;,</span> <span class="pre">&quot;x+</span> <span class="pre">=</span> <span class="pre">N&quot;</span></code></p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">cscene</span></code> with transformations applied to inputs scene parts in the global mesh</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict of list</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-src.LightVegeManager_voxelsmesh">
<span id="src-lightvegemanager-voxelsmesh-module"></span><h2><a class="toc-backref" href="#id35"><a class="reference internal" href="#module-src.LightVegeManager_voxelsmesh" title="src.LightVegeManager_voxelsmesh"><code class="xref py py-mod docutils literal notranslate"><span class="pre">src.LightVegeManager_voxelsmesh</span></code></a> module</a><a class="headerlink" href="#module-src.LightVegeManager_voxelsmesh" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lightvegemanager-voxelsmesh">
<h3><a class="toc-backref" href="#id36">LightVegeManager_voxelsmesh</a><a class="headerlink" href="#lightvegemanager-voxelsmesh" title="Permalink to this headline">¶</a></h3>
<p>Builds and handles axis oriented voxels mesh</p>
<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_voxelsmesh.compute_grid_size_from_trimesh">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_voxelsmesh.</span></span><span class="sig-name descname"><span class="pre">compute_grid_size_from_trimesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pmin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_slicing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_voxelsmesh.html#compute_grid_size_from_trimesh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_voxelsmesh.compute_grid_size_from_trimesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamically compute number of voxels for each axis in the grid
The grid is ajusted to be the smallest box containing another mesh</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pmin</strong> (<em>list</em>) – Minimum point of a mesh <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code></p></li>
<li><p><strong>pmax</strong> (<em>list</em>) – Maximum point of a mesh <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code></p></li>
<li><p><strong>dv</strong> (<em>list</em>) – size a voxel in each direction <code class="docutils literal notranslate"><span class="pre">[dx,</span> <span class="pre">dy,</span> <span class="pre">dz]</span></code></p></li>
<li><p><strong>grid_slicing</strong> (<em>string</em><em>, </em><em>optional</em>) – possibility to force the ground to be at z=0, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of voxels in each direction x, y and z</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int, int, int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_voxelsmesh.tesselate_trimesh_on_grid">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_voxelsmesh.</span></span><span class="sig-name descname"><span class="pre">tesselate_trimesh_on_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratpgrid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levelmax</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_voxelsmesh.html#tesselate_trimesh_on_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_voxelsmesh.tesselate_trimesh_on_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop on all triangles of a triangulation to tesselate them for better matching a grid of voxels
Triangles will subdivide on sides of voxels respecting a certain maximum level</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trimesh</strong> (<em>dict of list</em>) – <p>triangles mesh aggregated by indice elements</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nb">id</span> <span class="p">:</span> <span class="p">[</span><span class="n">triangle1</span><span class="p">,</span> <span class="n">triangle2</span><span class="p">,</span> <span class="o">...</span><span class="p">]}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>ratpgrid</strong> (<em>pyratp.grid</em>) – RATP grid of voxels</p></li>
<li><p><strong>levelmax</strong> (<em>int</em>) – maximum level for subdividing triangles</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a copy of trimesh with subdivided triangles</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict of list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_voxelsmesh.fill_ratpgrid_from_trimesh">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_voxelsmesh.</span></span><span class="sig-name descname"><span class="pre">fill_ratpgrid_from_trimesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratpgrid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stems_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb_input_scenes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_voxelsmesh.html#fill_ratpgrid_from_trimesh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_voxelsmesh.fill_ratpgrid_from_trimesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills a RATP grid from a triangulation.
It gives barycenters and areas of triangles to update the leaf area density in the corresponding
voxel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trimesh</strong> (<em>dict of list</em>) – <p>triangles mesh aggregated by indice elements</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nb">id</span> <span class="p">:</span> <span class="p">[</span><span class="n">triangle1</span><span class="p">,</span> <span class="n">triangle2</span><span class="p">,</span> <span class="o">...</span><span class="p">]}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>matching_ids</strong> (<em>dict</em>) – <p>dict that matches new element indices in cscene with specy indice and
input element indice,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">matching_ids</span> <span class="o">=</span> <span class="p">{</span> <span class="n">new_element_id</span> <span class="p">:</span> <span class="p">(</span><span class="n">input_element_id</span><span class="p">,</span> <span class="n">specy_id</span><span class="p">)}</span>
</pre></div>
</div>
<p>this dict allows us to look how species there is the inputs geometric data</p>
</p></li>
<li><p><strong>ratpgrid</strong> (<em>pyratp.grid</em>) – RATP grid of voxels</p></li>
<li><p><strong>stems_id</strong> (<em>list of 2-tuple</em><em>, </em><em>optional</em>) – list of potential stems element in the input scenes, defaults to None</p></li>
<li><p><strong>nb_input_scenes</strong> – number of input geometrical scenes. It can be different with number of</p></li>
</ul>
</dd>
</dl>
<p>species if there is a l-egume grid in the input with several species in it, defaults to 0
:type nb_input_scenes: int, optional
:return: copy of <code class="docutils literal notranslate"><span class="pre">ratpgrid</span></code> with leaf area density values from barycenters and areas of the input triangles
:rtype: pyratp.grid</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_voxelsmesh.fill_ratpgrid_from_legumescene">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_voxelsmesh.</span></span><span class="sig-name descname"><span class="pre">fill_ratpgrid_from_legumescene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">legumescene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratpgrid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dvolume</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_voxelsmesh.html#fill_ratpgrid_from_legumescene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_voxelsmesh.fill_ratpgrid_from_legumescene" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills a RATP grid from a l-egume grid
It updates <code class="docutils literal notranslate"><span class="pre">ratpgrid</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>legumescene</strong> (<em>dict</em>) – <p>l-egume grid represented by a dict with two entries:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;LA&quot;</span></code>: equivalent to m_lais in l-egume, a numpy.array of dimension <code class="docutils literal notranslate"><span class="pre">(nent,</span> <span class="pre">nz,</span> <span class="pre">ny,</span> <span class="pre">nx)</span></code></p></li>
</ul>
<p>which represents leaf area in each voxel for each specy</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;distrib&quot;</span></code>: equivalent to ls_dif in l-egume, a numpy.array of dimension <code class="docutils literal notranslate"><span class="pre">(nent,</span> <span class="pre">nclasses)</span></code></p></li>
</ul>
<p>which represents the global leaf angle distribution for each input specy</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>legumescene is the only input geometric scene which can handle several species</p>
</div>
</p></li>
<li><p><strong>ratpgrid</strong> (<em>pyratp.grid</em>) – RATP grid of voxels</p></li>
<li><p><strong>nb0</strong> (<em>int</em>) – number of empty layers from top of the canopy and maximum z layers in m_lais</p></li>
<li><p><strong>dvolume</strong> (<em>float</em>) – volume of one voxel <code class="docutils literal notranslate"><span class="pre">(dx*dy*dz)</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="src.LightVegeManager_voxelsmesh.reduce_layers_from_trimesh">
<span class="sig-prename descclassname"><span class="pre">src.LightVegeManager_voxelsmesh.</span></span><span class="sig-name descname"><span class="pre">reduce_layers_from_trimesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trimesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pmax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dxyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nxyz</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matching_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/LightVegeManager_voxelsmesh.html#reduce_layers_from_trimesh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.LightVegeManager_voxelsmesh.reduce_layers_from_trimesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of empty layers in a grid of voxels, from the top of the canopy to the last expected layer. 
It computes this number from a triangles mesh</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trimesh</strong> (<em>dict of list</em>) – <p>triangles mesh aggregated by indice elements</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nb">id</span> <span class="p">:</span> <span class="p">[</span><span class="n">triangle1</span><span class="p">,</span> <span class="n">triangle2</span><span class="p">,</span> <span class="o">...</span><span class="p">]}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>pmax</strong> (<em>list</em>) – Maximum point of a mesh <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code></p></li>
<li><p><strong>dxyz</strong> (<em>list</em>) – size of sides of a voxel <code class="docutils literal notranslate"><span class="pre">[dx,</span> <span class="pre">dy,</span> <span class="pre">dz]</span></code></p></li>
<li><p><strong>nxyz</strong> (<em>list</em>) – number of voxels in each direction <code class="docutils literal notranslate"><span class="pre">[nx,</span> <span class="pre">ny,</span> <span class="pre">nz]</span></code>, nz is the expected number of layers</p></li>
<li><p><strong>matching_ids</strong> (<em>dict</em>) – <p>dict that matches new element indices in cscene with specy indice and
input element indice,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">matching_ids</span> <span class="o">=</span> <span class="p">{</span> <span class="n">new_element_id</span> <span class="p">:</span> <span class="p">(</span><span class="n">input_element_id</span><span class="p">,</span> <span class="n">specy_id</span><span class="p">)}</span>
</pre></div>
</div>
<p>this dict allows us to look how species there is the inputs geometric data</p>
</p></li>
<li><p><strong>ids</strong> (<em>list of int</em><em>, </em><em>optional</em>) – list of specy indices considered not empty, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of empty layers between top of the canopy (represented by <code class="docutils literal notranslate"><span class="pre">trimesh</span></code>) and <code class="docutils literal notranslate"><span class="pre">nxyz[2]</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="others.html" class="btn btn-neutral float-left" title="Additionnal Functionality" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2023, INRAE P3F

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>