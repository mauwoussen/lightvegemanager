%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}


\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{tgtermes}
\usepackage{tgheros}
\renewcommand{\ttdefault}{txtt}



\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=auto}
\usepackage{geometry}

\usepackage{nbsphinx}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\contentsname}{User Guide}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}



\title{LightVegeManager}
\date{Nov 27, 2023}
\release{0.0.0}
\author{INRAE P3F}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\ifdefined\shorthandoff
  \ifnum\catcode`\=\string=\active\shorthandoff{=}\fi
  \ifnum\catcode`\"=\active\shorthandoff{"}\fi
\fi

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}\phantomsection\label{\detokenize{index:lightvegemanager}}\phantomsection\label{\detokenize{index:module-lightvegemanager}}\phantomsection\label{\detokenize{index:lightvegemanager}}\index{module@\spxentry{module}!lightvegemanager@\spxentry{lightvegemanager}}\index{lightvegemanager@\spxentry{lightvegemanager}!module@\spxentry{module}}
\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics[width=896\sphinxpxdimen,height=526\sphinxpxdimen]{{illus_lightvegemanager}.png}
\end{figure}




\chapter{Module description}
\label{\detokenize{index:module-description}}
\begin{sphinxShadowBox}
\sphinxstylesidebartitle{Summary}
\begin{quote}\begin{description}
\sphinxlineitem{Version}
\sphinxAtStartPar


\sphinxlineitem{Date}
\sphinxAtStartPar
Nov 27, 2023

\sphinxlineitem{Author}
\sphinxAtStartPar
See {\hyperref[\detokenize{index:authors}]{\sphinxcrossref{Authors}}} section

\end{description}\end{quote}
\end{sphinxShadowBox}

\begin{sphinxShadowBox}
\sphinxstyletopictitle{Overview}

\sphinxAtStartPar
LightVegeManager is a Python package made for plant modeling and manage enlightment.
It serves as an interface to merge several plant models and a light model.
Applications involved by this tools are part of OpenAlea platform.
\end{sphinxShadowBox}


\chapter{Documentation}
\label{\detokenize{index:documentation}}
\sphinxstepscope


\section{Presentation}
\label{\detokenize{presentation:presentation}}\label{\detokenize{presentation:id1}}\label{\detokenize{presentation::doc}}

\subsection{Context}
\label{\detokenize{presentation:context}}
\sphinxAtStartPar
This package was born in the framework of the research project MobiDiv (\sphinxurl{https://anr.fr/ProjetIA-20-PCPA-0006}), which aims to find solutions for pesticide\sphinxhyphen{}free agriculture.
One of the targets of this project is to model coupled crops between wheats, modelled by CN\sphinxhyphen{}Wheat (\sphinxurl{https://www.quantitative-plant.org/model/CN-Wheat}), and alfalfas, thanks to l\sphinxhyphen{}egume model (\sphinxurl{https://github.com/glouarn/l-egume}).
Thus, LightVegeManager was created to manage the lighting in a vegetal simulation, in formats understandable by the tools proposed on the OpenAlea platform (\sphinxurl{https://github.com/openalea}).


\subsection{Intentions}
\label{\detokenize{presentation:intentions}}
\sphinxAtStartPar
We want to simplify the light management when several models, plant and lighting, are involved.
The tool manages many input and output formats, in order to match a wide variety of situations.


\subsection{How}
\label{\detokenize{presentation:how}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=2480\sphinxpxdimen,height=1319\sphinxpxdimen]{{how}.png}
\caption{General Functionning}\label{\detokenize{presentation:id2}}\end{figure}

\sphinxAtStartPar
It reads the following input formats:
\begin{itemize}
\item {} 
\sphinxAtStartPar
PlantGL scene

\item {} 
\sphinxAtStartPar
MTG table

\item {} 
\sphinxAtStartPar
VGX file

\item {} 
\sphinxAtStartPar
Caribu scene, dict storing a triangulation

\item {} 
\sphinxAtStartPar
Dict storing a grid of voxels with leaf area and leaf angle distribution

\end{itemize}

\sphinxAtStartPar
More details about the input formats here {\hyperref[\detokenize{inputs:scenes}]{\sphinxcrossref{\DUrole{std,std-ref}{Scenes format}}}}.

\sphinxAtStartPar
And it can return the outputs in the following formats:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Pandas Dataframe, in multiple scales (triangles, voxels, elements) depending on the light model.

\item {} 
\sphinxAtStartPar
updates a MTG table

\item {} 
\sphinxAtStartPar
returns two tables compatible with l\sphinxhyphen{}egume

\end{itemize}


\subsection{Lighting}
\label{\detokenize{presentation:lighting}}
\sphinxAtStartPar
At the moment, LightVegeManager can handle three lighting models, CARIBU (\sphinxurl{https://github.com/openalea-incubator/caribu}), PyRATP (\sphinxurl{https://github.com/openalea-incubator/PyRATP}), and RiRi modified in l\sphinxhyphen{}egume (\sphinxurl{https://github.com/glouarn/riri5}).
Those models are ajusted for virtual plant canopies with considerations, like infinitisation of the scene, which are preferred for simulating large crop fields.

\sphinxAtStartPar
They offers two different approach for light modelling:


\subsubsection{Surfacic approach (CARIBU)}
\label{\detokenize{presentation:surfacic-approach-caribu}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=851\sphinxpxdimen,height=769\sphinxpxdimen]{{triangles}.PNG}
\caption{Example of a triangulation}\label{\detokenize{presentation:id3}}\end{figure}

\sphinxAtStartPar
The radiations are computed on a set of triangles.
This approach offers a high precision of lighting on the different organs, but has a high cost in time computation.


\subsubsection{Volumic approach (PyRATP, RiRi)}
\label{\detokenize{presentation:volumic-approach-pyratp-riri}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=701\sphinxpxdimen,height=752\sphinxpxdimen]{{voxels}.PNG}
\caption{Example of a grid of voxels}\label{\detokenize{presentation:id4}}\end{figure}

\sphinxAtStartPar
The geometric scene is represented by a set of voxels, which contains a leaf area and a leaf angle informations.
Then, the models solves turbid medium equations from the rays inside the grid.
This approach has a higher approximation of geometry, but is well adapted for dense canopy.
The computation cost is highly reduced regarding the surfacic approach but the geometric scene must matches the turbid medium representation and hypothesis.

\sphinxstepscope


\section{Installation}
\label{\detokenize{installation:installation}}\label{\detokenize{installation:id1}}\label{\detokenize{installation::doc}}

\subsection{Setting a Python environment}
\label{\detokenize{installation:setting-a-python-environment}}
\sphinxAtStartPar
We recommend an installation with conda.
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Create a conda environment with miniconda3
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
conda\PYG{+w}{ }create\PYG{+w}{ }\PYGZhy{}n\PYG{+w}{ }myenvname\PYG{+w}{ }\PYG{n+nv}{python}\PYG{o}{=}\PYG{l+m}{3}\PYG{+w}{ }openalea.mtg\PYG{+w}{ }openalea.plantgl\PYG{+w}{ }alinea.caribu\PYG{+w}{ }alinea.astk\PYG{+w}{ }\PYG{n+nv}{numpy}\PYG{o}{=}\PYG{l+m}{1}.20.3\PYG{+w}{ }pandas\PYG{+w}{ }pytest\PYG{+w}{ }sphinx\PYG{+w}{ }sphinx\PYGZhy{}rtd\PYGZhy{}theme\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }conda\PYGZhy{}forge\PYG{+w}{ }\PYGZhy{}c\PYG{+w}{ }openalea3
\end{sphinxVerbatim}
\end{quote}

\item {} 
\sphinxAtStartPar
Place yourself in the created environment: \sphinxcode{\sphinxupquote{conda activate myenvname}}

\end{enumerate}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{virtual sensors}} and \sphinxcode{\sphinxupquote{soilmesh}} in Caribu \textgreater{} 8.0.10 are working correctly
\end{sphinxadmonition}


\subsection{Installation of Needed Packages}
\label{\detokenize{installation:installation-of-needed-packages}}

\subsubsection{PyRATP}
\label{\detokenize{installation:pyratp}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Git console:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git\PYG{+w}{ }clone\PYG{+w}{ }\PYGZhy{}b\PYG{+w}{ }update\PYGZus{}mobidiv\PYG{+w}{ }https://github.com/mwoussen/PyRATP
\end{sphinxVerbatim}
\end{quote}

\item {} 
\sphinxAtStartPar
Installation in the conda environment (in folder \sphinxcode{\sphinxupquote{PyRATP}})
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
make\PYG{+w}{ }\PYG{n+nv}{mode}\PYG{o}{=}develop
make\PYG{+w}{ }clean
\end{sphinxVerbatim}
\end{quote}

\end{enumerate}


\subsubsection{RiRi5}
\label{\detokenize{installation:riri5}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Git console:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git\PYG{+w}{ }clone\PYG{+w}{ }https://github.com/glouarn/riri5
\end{sphinxVerbatim}
\end{quote}

\item {} 
\sphinxAtStartPar
Installation in the conda environment (in folder \sphinxcode{\sphinxupquote{riri5}})
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }setup.py\PYG{+w}{ }develop
\end{sphinxVerbatim}
\end{quote}

\end{enumerate}


\subsubsection{LightVegeManager}
\label{\detokenize{installation:lightvegemanager}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Git console:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git\PYG{+w}{ }clone\PYG{+w}{ }https://github.com/mwoussen/lightvegemanager
\end{sphinxVerbatim}
\end{quote}

\item {} 
\sphinxAtStartPar
Installation in the conda environment (in folder \sphinxcode{\sphinxupquote{lightvegemanager}})
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python\PYG{+w}{ }setup.py\PYG{+w}{ }develop
\end{sphinxVerbatim}
\end{quote}

\end{enumerate}


\subsection{Quickstart}
\label{\detokenize{installation:quickstart}}\label{\detokenize{installation:id2}}
\sphinxAtStartPar
Small test to quickly test the tool. LightVegeManager needs at least a geometric information and a light model to call
between \sphinxcode{\sphinxupquote{"ratp"}}, \sphinxcode{\sphinxupquote{"caribu"}} or \sphinxcode{\sphinxupquote{"riri5"}}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{from} \PYG{n+nn}{lightvegeamanger}\PYG{n+nn}{.}\PYG{n+nn}{LVM} \PYG{k+kn}{import} \PYG{n}{LightVegeManager}

\PYG{c+c1}{\PYGZsh{} one triangle as a geometric element}
\PYG{c+c1}{\PYGZsh{} we write our triangle in a CaribuScene format}
\PYG{n}{organ\PYGZus{}id} \PYG{o}{=} \PYG{l+m+mi}{001}
\PYG{n}{triangle\PYGZus{}vertices} \PYG{o}{=} \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}
\PYG{n}{triangle} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{n}{organ\PYGZus{}id} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle\PYGZus{}vertices}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle}\PYG{p}{]} \PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} surfacic lighting with CARIBU}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} build the scene}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} compute lighting}
\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mi}{500}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264} \PYG{c+c1}{\PYGZsh{} 21st september}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} output}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}


\sphinxstrong{See also:}
\nopagebreak


\sphinxAtStartPar
For more details on default values, see \sphinxcode{\sphinxupquote{LightVegeManager\_defaultvalues}}



\sphinxstepscope


\section{Architecture of the tool}
\label{\detokenize{architecture:architecture-of-the-tool}}\label{\detokenize{architecture:architecture}}\label{\detokenize{architecture::doc}}

\subsection{Package Content}
\label{\detokenize{architecture:package-content}}\label{\detokenize{architecture:package}}
\sphinxAtStartPar
The package has 8 folders and 4 files in its root:
\begin{itemize}
\item {} 
\sphinxAtStartPar
data: data files used in some the use examples in the package

\item {} 
\sphinxAtStartPar
doc: user and reference documentations

\item {} 
\sphinxAtStartPar
notebooks: jupyter notebooks with documented tutorials exploring the tool features

\item {} 
\sphinxAtStartPar
s2v and s5: sources of analysis tools

\item {} 
\sphinxAtStartPar
src: sources of LightVegeManager

\item {} 
\sphinxAtStartPar
tests: unit testing files written in pytest format

\item {} 
\sphinxAtStartPar
.gitignore: files and folders to ignore by git

\item {} 
\sphinxAtStartPar
.readthedocs.yaml: config file for read\sphinxhyphen{}the\sphinxhyphen{}docs

\item {} 
\sphinxAtStartPar
requirements.txt: packages needed for read\sphinxhyphen{}the\sphinxhyphen{}docs in order to compile

\item {} 
\sphinxAtStartPar
README.md: Read Me file

\item {} 
\sphinxAtStartPar
pytest.ini: config file for pytest

\item {} 
\sphinxAtStartPar
setup.py: setup script used for installation

\end{itemize}


\subsection{Code structure}
\label{\detokenize{architecture:code-structure}}\label{\detokenize{architecture:structure}}
\sphinxAtStartPar
The code structure of the tool is designed with a main class LightVegeManager, which calls modules for computing specific
parts depending on the inputs.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=798\sphinxpxdimen,height=402\sphinxpxdimen]{{diagram_classmodules}.png}
\caption{Dependances between modules}\label{\detokenize{architecture:id1}}\end{figure}

\sphinxAtStartPar
Modules are:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_tool}} Main class of the tool. Calls all the other modules in \sphinxcode{\sphinxupquote{src}}.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_CARIBUinputs}} Manages and prepares input information for CARIBU.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_RATPinputs}} Manage vegetation and meteo input informations for RATP

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_RiRi5inputs}} Manage grid of voxels for RiRi5

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_VTK}} Writes VTK files from LightVegeManager geometry and lighting data. Used for visualisation

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_basicgeometry}} Provides basic geometric operations in 3D used by LightVegeManager.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_buildRATPscene}} Build a PyRATP.grid from inputs.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_defaultvalues}} Default for simulation fixed parameters

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_leafangles}} Handles leaf angle distribution, both in its dynamic computing or reading a file

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_outputs}} Manages and reformats output results from the light models in pandas.Dataframe with similar columns names

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_plantGL}} Visualisation with plantGL

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_sky}} Build a sky from LightVegeManager input informations

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_stems}} Manages stems element

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_sun}} Build a sun respecting each light model format

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_tesselator}} Manages subdivision of a triangulation

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_transfer}} Manages transfer of LightVegeManager results to plant Models

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_trianglesmesh}} Builds and handles triangulation mesh.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{LightVegeManager\_voxelsmesh}} Builds and handles axis oriented voxels mesh

\end{itemize}


\subsection{Front End: the main commands}
\label{\detokenize{architecture:front-end-the-main-commands}}\label{\detokenize{architecture:frontend}}
\sphinxAtStartPar
th tool is used through the class \sphinxcode{\sphinxupquote{LightVegeManager}} and the following methods:
\begin{itemize}
\item {} 
\sphinxAtStartPar
constructor \sphinxcode{\sphinxupquote{\_\_init\_\_}} builds the sky, which stays the same throughout all the simulation. It sets also default values if not precised in the inputs.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{build()}} creates a common geometric scene from inputs and set parameters for the light model.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{run()}} computes the lighting.

\end{itemize}

\sphinxAtStartPar
The outputs from radiations are automatically gathered in a pandas Dataframe and accessible from the getters \sphinxcode{\sphinxupquote{elements\_outputs()}}, \sphinxcode{\sphinxupquote{triangles\_outputs()}} and \sphinxcode{\sphinxupquote{voxels\_outputs()}}.

\sphinxAtStartPar
As part of our initial objective, we added two methods in order to convert the results in formats understandable by CN\sphinxhyphen{}Wheat and l\sphinxhyphen{}egume:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{to\_MTG()}}, which updates a MTG table read by CN\sphinxhyphen{}Wheat

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{to\_l\_egume()}}, which updates two tables read by l\sphinxhyphen{}egume

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
l\sphinxhyphen{}egume needs a local information of transmitted lighting among a voxel grid. Then, you need to provide the grid dimensions to LightVegeManager.
\end{sphinxadmonition}

\sphinxAtStartPar
The other getters available are:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{sensors\_outputs()}}, outputs of virtual sensors, only with CARIBU

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{soilenergy()}}, radiation received by the soil, only with CARIBU

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:module-sun}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{sun()}}}}}, object containing sun position xyz

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{maxtrianglearea()}}, if you entered a triangle mesh, return the largest triangle

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{tesselationtime()}}, if you activated tesselation of a triangle mesh (redraw of triangles), return computation time

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{modelruntime()}}, return the computation time of the light model

\end{itemize}

\sphinxAtStartPar
Finally, you also have additional tools available for analysing the inputs and visualising the outputs ({\hyperref[\detokenize{others:other}]{\sphinxcrossref{\DUrole{std,std-ref}{additional tools}}}}).


\subsection{Back End: More details about how the tool works}
\label{\detokenize{architecture:back-end-more-details-about-how-the-tool-works}}\label{\detokenize{architecture:backend}}
\sphinxAtStartPar
First of all, the geometric merging is set in a Caribu scene format. It is a dict where keys are indices and values are list of triangles, one triangle is list of 3 3\sphinxhyphen{}tuple representing the vertices.
Here is an example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} organ 1}
\PYG{n}{triangle1} \PYG{o}{=} \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{]}
\PYG{n}{triangle2} \PYG{o}{=} \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}

\PYG{c+c1}{\PYGZsh{} organ 2}
\PYG{n}{triangle3} \PYG{o}{=} \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{)}\PYG{p}{]}

\PYG{n}{caribuscene} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+m+mi}{1} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle1}\PYG{p}{,} \PYG{n}{triangle2}\PYG{p}{]} \PYG{p}{,}
                \PYG{l+m+mi}{2} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle3}\PYG{p}{]} \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
We choose this format for its low processing cost, because it uses basic python objects.

\sphinxAtStartPar
We also save and recreate a dict to organize the indices inside each input scene called \sphinxcode{\sphinxupquote{matching\_ids}} ({\hyperref[\detokenize{architecture:indexes}]{\sphinxcrossref{\DUrole{std,std-ref}{index managment}}}}).

\sphinxAtStartPar
The input parameters defines a common way for setting each light model parameters.


\subsubsection{Geometric merging}
\label{\detokenize{architecture:geometric-merging}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=731\sphinxpxdimen,height=741\sphinxpxdimen]{{merging}.png}
\caption{Tool workflow for geometry}\label{\detokenize{architecture:id2}}\end{figure}

\sphinxAtStartPar
We built a module to tesselate one triangle into four smaller triangles. The tesselation is applied either uniformly among all the triangle mesh or on a sides of a voxels grid.
The tesselation following a grid is made in order to have a better matching of triangles in a voxels grid and attenuate the error of converting the mesh type.

\sphinxAtStartPar
We also built the possibility to compute dynamicaly the leaf angle distribution, either globally among all triangles, or locally inside each voxel.


\subsubsection{Managing indexes}
\label{\detokenize{architecture:managing-indexes}}\label{\detokenize{architecture:indexes}}
\sphinxAtStartPar
LightVegeManager expects a list of geometric scenes in its inputs. Each scene represents a plant specy.
Each scene can also by sorted by elements, which can represent plant organs or just sets of triangles.
The tool will then reorder all the indexes in order to avoid any confusion.
The correspondance between input indices and new indices is stored in the dict attribute \sphinxcode{\sphinxupquote{matching\_ids}}.

\sphinxAtStartPar
Example of reordering:

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=451\sphinxpxdimen,height=291\sphinxpxdimen]{{indices}.png}
\caption{Reordering indices in LightVegeManager}\label{\detokenize{architecture:id3}}\end{figure}


\subsubsection{Triangle subdivision}
\label{\detokenize{architecture:triangle-subdivision}}
\sphinxAtStartPar
We implemented an algorithm for subdividing a triangle in 4 triangles according to triangle position in a grid of voxels.
The goal was to have a better matching between a triangulation and a grid of voxels.
Triangles are subdivided if they are between several voxels.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=512.00000\sphinxpxdimen,height=230.00000\sphinxpxdimen]{{tesselation}.PNG}
\caption{Subdivision of a triangle}\label{\detokenize{architecture:id4}}\end{figure}


\subsubsection{CARIBU, l\sphinxhyphen{}egume and virtual sensors}
\label{\detokenize{architecture:caribu-l-egume-and-virtual-sensors}}
\sphinxAtStartPar
l\sphinxhyphen{}egume needs two different values to understand lighting results:
\begin{itemize}
\item {} 
\sphinxAtStartPar
total intercepted radiation for each plant

\item {} 
\sphinxAtStartPar
local transmitted radiation following a voxel grid

\end{itemize}

\sphinxAtStartPar
In order to use CARIBU with l\sphinxhyphen{}egume, you need to retrieve transmitted radiations for each position of a voxel grid.
LightVegeManager implements functions which can create a set of virtual sensors following a voxel grid.
Then, with the virtual sensors and the soilmesh options activated, you can calculate the local transmitted radiation.
Make sure to have the same grid dimensions as l\sphinxhyphen{}egume intern grid.

\sphinxstepscope


\section{Inputs}
\label{\detokenize{inputs:inputs}}\label{\detokenize{inputs:id1}}\label{\detokenize{inputs::doc}}
\sphinxAtStartPar
In LightVegeManager, we choose to organize the input parameters in 3 python dict: geometric, environment and light model parameters.


\subsection{Geometric inputs}
\label{\detokenize{inputs:geometric-inputs}}\label{\detokenize{inputs:geometric}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{scene0}\PYG{p}{,} \PYG{n}{scene1}\PYG{p}{,} \PYG{n}{scene2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]} \PYG{p}{,}
                       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{domain}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{(}\PYG{p}{(}\PYG{n}{xmin}\PYG{p}{,} \PYG{n}{ymin}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{n}{xmax}\PYG{p}{,} \PYG{n}{ymax}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
                       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{stems id}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{p}{(}\PYG{n}{id\PYGZus{}element}\PYG{p}{,} \PYG{n}{id\PYGZus{}scene}\PYG{p}{)}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
                       \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{transformations}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{\PYGZob{}}
                                                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes unit}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg} \PYG{p}{,}
                                                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rescale}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg} \PYG{p}{,}
                                                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{translate}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg} \PYG{p}{,}
                                                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{xyz orientation}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg}
                                                                    \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
It contains the geometric scenes and directives to operate on them.
You can also add descriptions on the scenes, especially if you have a large numbers of scenes and plant model evolved.
Each scene must contains only one specy of plant, except for l\sphinxhyphen{}egume grid format, which can contains multiple species.
As the geometric informations are likely to change during a simulation, this dict is not read by the constructor but rather by the \sphinxcode{\sphinxupquote{build()}} method.


\subsubsection{Scenes}
\label{\detokenize{inputs:scenes}}\label{\detokenize{inputs:id2}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"scenes"}} key needs a list of the geometric scenes.
Each scene represents one plant specie, except for voxel grid format. There is no restrictions on the numbers of input scenes.
Possible format are:
\begin{itemize}
\item {} 
\sphinxAtStartPar
PlantGL scene

\item {} 
\sphinxAtStartPar
MTG table

\item {} 
\sphinxAtStartPar
VGX file

\item {} 
\sphinxAtStartPar
CaribuScene dict
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} a vertice is a 3\PYGZhy{}tuple of float}
\PYG{n}{triangle1} \PYG{o}{=} \PYG{p}{[} \PYG{p}{(}\PYG{n}{x1}\PYG{p}{,} \PYG{n}{y1}\PYG{p}{,} \PYG{n}{z1}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{n}{x2}\PYG{p}{,} \PYG{n}{y2}\PYG{p}{,} \PYG{n}{z2}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{n}{x3}\PYG{p}{,} \PYG{n}{y3}\PYG{p}{,} \PYG{n}{z3}\PYG{p}{)} \PYG{p}{]}
\PYG{n}{triangle2} \PYG{o}{=} \PYG{p}{[} \PYG{p}{(}\PYG{n}{x4}\PYG{p}{,} \PYG{n}{y4}\PYG{p}{,} \PYG{n}{z4}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{n}{x5}\PYG{p}{,} \PYG{n}{y5}\PYG{p}{,} \PYG{n}{z5}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{n}{x6}\PYG{p}{,} \PYG{n}{y6}\PYG{p}{,} \PYG{n}{z6}\PYG{p}{)} \PYG{p}{]}
\PYG{n}{mycaribuscene} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+m+mi}{888} \PYG{p}{:} \PYG{p}{[} \PYG{n}{triangle1}\PYG{p}{,} \PYG{n}{triangle2} \PYG{p}{]} \PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} 888 is the id of the element composed by triangle1 and triangle2}
\end{sphinxVerbatim}
\end{quote}

\item {} 
\sphinxAtStartPar
Voxels grid: a dict with two keys:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"LA"}}: a \sphinxcode{\sphinxupquote{scipy.array}} of dimension \sphinxcode{\sphinxupquote{{[}number of species, nz, ny, nx{]}}} and stores for each voxel of each specie a leaf area

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"distrib"}}: a list of \sphinxcode{\sphinxupquote{scipy.array}} for each specy storing a leaf angle distribution

\end{itemize}

\end{itemize}

\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"domain"}} is necessary for CARIBU and infinite scene, it defines the xy square to replicate.
\sphinxcode{\sphinxupquote{"stems id"}} indicates the organ id of possible stems. They will be considered as strictly opaque element.


\subsubsection{Geometric transformations}
\label{\detokenize{inputs:geometric-transformations}}
\sphinxAtStartPar
There is an optional fourth input key in the geometric dict, used to specify geometric transformations on several scenes.
For example, you can arrange your inputs scenes in a specific pattern by translating them.
The value of each entry is a dict:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{transformation}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{\PYGZob{}} \PYG{n}{index\PYGZus{}from\PYGZus{}input\PYGZus{}scenes} \PYG{p}{:} \PYG{n}{transformation\PYGZus{}value}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Possible keys are the following:


\paragraph{\sphinxstyleliteralintitle{\sphinxupquote{"scenes unit"}}}
\label{\detokenize{inputs:scenes-unit}}
\sphinxAtStartPar
Associates a measure unit among this list \sphinxcode{\sphinxupquote{{[}\textquotesingle{}mm\textquotesingle{},\textquotesingle{}cm\textquotesingle{},\textquotesingle{}dm\textquotesingle{},\textquotesingle{}m\textquotesingle{},\textquotesingle{}dam\textquotesingle{},\textquotesingle{}hm\textquotesingle{},\textquotesingle{}km\textquotesingle{}{]}}} with a scene.
You can also assign a unit to the inside global scene, the tool will rescale all the scenes in the same unit.

\sphinxAtStartPar
example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{transformations}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes unit}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+m+mi}{0} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{m}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                                  \PYG{l+m+mi}{1} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{cm}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
                                  \PYG{l+m+mi}{2} \PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{hm}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\paragraph{\sphinxstyleliteralintitle{\sphinxupquote{"rescale"}}}
\label{\detokenize{inputs:rescale}}
\sphinxAtStartPar
Multiply all the lengths of a scene by a ratio.

\sphinxAtStartPar
example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{transformations}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rescale}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+m+mi}{0} \PYG{p}{:} \PYG{l+m+mf}{0.5}\PYG{p}{,}
                              \PYG{l+m+mi}{2} \PYG{p}{:} \PYG{l+m+mi}{5}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\paragraph{\sphinxstyleliteralintitle{\sphinxupquote{"translate"}}}
\label{\detokenize{inputs:translate}}
\sphinxAtStartPar
Apply a translation vector to a scene. A vector is 3\sphinxhyphen{}tuple.

\sphinxAtStartPar
example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{transformations}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{translate}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+m+mi}{0} \PYG{p}{:} \PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{,} \PYG{l+m+mf}{0.2}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,}
                                \PYG{l+m+mi}{1} \PYG{p}{:} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{5}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\paragraph{\sphinxstyleliteralintitle{\sphinxupquote{"xyz orientation"}}}
\label{\detokenize{inputs:xyz-orientation}}
\sphinxAtStartPar
Change the orientation of a scene among the xyz axis.
When a model creates a scene in a different convention used by the light models, LightVegeManager allows for a common convention.
RATP and CARIBU use the convention x+ matches to North.

\sphinxAtStartPar
Possible convention:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"x+ = S"}}: x+ matches to South

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"x+ = W"}}: x+ matches to West

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"x+ = E"}}: x+ matches to East

\end{itemize}

\sphinxAtStartPar
example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{transformations}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{xyz orientation}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+m+mi}{0} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x+ = S}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                                      \PYG{l+m+mi}{1} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x+ = W}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Environment parameters}
\label{\detokenize{inputs:environment-parameters}}\label{\detokenize{inputs:environment}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{environment} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{latitude}\PYG{p}{,} \PYG{n}{longitude}\PYG{p}{,} \PYG{n}{timezone}\PYG{p}{]} \PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{turtle46}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{filepath}\PYG{p}{]} \PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{nb\PYGZus{}azimut}\PYG{p}{,} \PYG{n}{nb\PYGZus{}zenith}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soc}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o+ow}{or} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{uoc}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{direct}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} sun radiations}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{diffus}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} sky radiations}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflected}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} reflected radiation in the canopy}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infinite}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} infinitisation of the scene}
                \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Contains parameters related to the environment of modelling and static parameters during all the simulation.

\sphinxAtStartPar
The sky is defined by the \sphinxcode{\sphinxupquote{"sky"}} key and has 3 different possibilities:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"turtle46"}} : SOC sky with 46 directions in “turtle” shape

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}"file", filepath{]}}} : sky defined by the file \sphinxcode{\sphinxupquote{filepath}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}nb\_azimut, nb\_zenith, "soc" ou "uoc"{]}}}: computes dynamically the source directions

\end{itemize}


\subsection{Light model parameters}
\label{\detokenize{inputs:light-model-parameters}}
\sphinxAtStartPar
Specific parameters for each light model, as they use very different syntax and approach.


\subsubsection{CARIBU: surfacic approach}
\label{\detokenize{inputs:caribu-surfacic-approach}}\label{\detokenize{inputs:caribuparam}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{caribu\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{\PYGZob{}}
                                    \PYG{n}{band0} \PYG{o}{=} \PYG{p}{(}\PYG{n}{reflectance}\PYG{p}{,} \PYG{n}{transmittance}\PYG{p}{)}\PYG{p}{,}
                                    \PYG{n}{band1} \PYG{o}{=} \PYG{p}{(}\PYG{n}{reflectance}\PYG{p}{,} \PYG{n}{transmittance}\PYG{p}{)}\PYG{p}{,}
                                    \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
                                    \PYG{p}{\PYGZcb{}}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{debug}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil mesh}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sensors}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{dxyz}\PYG{p}{,} \PYG{n}{nxyz}\PYG{p}{,} \PYG{n}{orig}\PYG{p}{,} \PYG{n}{vtkpath}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vtk}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The key \sphinxcode{\sphinxupquote{"sun algo"}} specifies how to calculate the sun position. Possibilities are \sphinxcode{\sphinxupquote{"ratp"}} or \sphinxcode{\sphinxupquote{"caribu"}}, which will call the function related to either one of the light models.

\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"caribu opt"}} defines the optical parameters in CARIBU format. For example:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{par}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{0.10}\PYG{p}{,} \PYG{l+m+mf}{0.07}\PYG{p}{)} \PYG{p}{,}
                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{nir}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{0.15}\PYG{p}{,} \PYG{l+m+mf}{0.05}\PYG{p}{)}
                                    \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\end{quote}

\sphinxAtStartPar
For virtual sensors, we propose the construction following a grid of voxels, where a sensor is the bottom side of a voxel.
\begin{quote}
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sensors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{dxyz}\PYG{p}{,} \PYG{n}{nxyz}\PYG{p}{,} \PYG{n}{orig}\PYG{p}{,} \PYG{n}{path}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vtk}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
\end{sphinxVerbatim}

\sphinxAtStartPar
Where:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{dxyz = {[}x, y, z{]}}} : list of size of each side of a voxel

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{nxyz = {[}nx, ny, nz{]}}} : list of number of voxels in each direction

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{path}} : string of file path where to save the vtk file of the sensors

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"vtk"}} : flag to specify you want to write sensors in VTK format for visualisation

\end{itemize}

\sphinxAtStartPar
\sphinxcode{\sphinxupquote{path}} and \sphinxcode{\sphinxupquote{"vtk"}} are optional elements in the list
\end{quote}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
At the moment, only grid option is available for sensors
\end{sphinxadmonition}
\end{quote}


\subsubsection{RATP: volumic approach}
\label{\detokenize{inputs:ratp-volumic-approach}}\label{\detokenize{inputs:ratpparam}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{ratp\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{c+c1}{\PYGZsh{} Grid specifications}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{dx}\PYG{p}{,} \PYG{n}{dy}\PYG{p}{,} \PYG{n}{dz}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dynamic}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{full grid}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{xorigin}\PYG{p}{,} \PYG{n}{yorigin}\PYG{p}{,} \PYG{n}{zorigin}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{xorigin}\PYG{p}{,} \PYG{n}{yorigin}\PYG{p}{]}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{number voxels}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{nx}\PYG{p}{,} \PYG{n}{ny}\PYG{p}{,} \PYG{n}{nz}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid slicing}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ground = 0.}\PYG{l+s+s2}{\PYGZdq{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tesselation level}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{int}

                \PYG{c+c1}{\PYGZsh{} Leaf angle distribution}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute global}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute voxel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{nb angle classes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib file}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{filepath}\PYG{p}{,}

                \PYG{c+c1}{\PYGZsh{} Vegetation type}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil reflectance}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{reflectance\PYGZus{}band0}\PYG{p}{,} \PYG{n}{reflectance\PYGZus{}band1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflectance coefficients}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{reflectance\PYGZus{}band0}\PYG{p}{,} \PYG{n}{reflectance\PYGZus{}band1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mu}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{mu\PYGZus{}scene0}\PYG{p}{,} \PYG{n}{mu\PYGZus{}scene1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}
            \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\paragraph{Grid specifications}
\label{\detokenize{inputs:grid-specifications}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"voxel size"}}: defines the size of one voxel, 2 possibilities
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}float, float, float{]}}}: for a length on each direction (xyz)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"dynamic"}}: create squared voxels where the length of a side is l = 5.max(area(triangle))

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"number voxels"}}: \sphinxcode{\sphinxupquote{{[}nx, ny, nz{]}}}, defines the number of voxels on each xyz axis. If not specified, the tool computes dynamically the grid size according to input geometries.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"origin"}}: possibility to define the grid origin.
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}xorigin, yorigin, zorigin{]}}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}xorigin, yorigin{]}}} and \sphinxcode{\sphinxupquote{zorigin = \sphinxhyphen{}zmin}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"grid slicing"}}: if \sphinxcode{\sphinxupquote{"grid slicing" : "ground = 0."}} and \sphinxcode{\sphinxupquote{"number voxels"}} is not specified and there are triangles in the input geometries, it rescales the grid to avoid the soil layer \textless{} 0

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"tesselation level"}}: if there are triangles in the input geometries, you can tesselate them a certain number of times to match the voxel grid.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"full grid"}}: option to fill all empty voxels with a \sphinxcode{\sphinxupquote{1e\sphinxhyphen{}10}}.

\end{itemize}


\paragraph{Leaf angle distribution}
\label{\detokenize{inputs:leaf-angle-distribution}}
\sphinxAtStartPar
You can specify how the leaf angle distribution is computed. It can be computed dynamically from a triangulation.
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"angle distrib algo"}}: 3 possibilities
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"compute global"}}: LightVegeManager computes a global leaf angle distribution

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"compute voxel"}}: LightVegeManager computes a local leaf angle distribution in each voxel of the grid

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{file}}: LightVegeManager reads a global leaf angle distribution in a file

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"nb angle classes"}}: if \sphinxcode{\sphinxupquote{"angle distrib algo" = "compute global"}} or \sphinxcode{\sphinxupquote{"angle distrib algo" = "compute voxel"}}, number of angle classes in the distribution

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"angle distrib file"}}: if \sphinxcode{\sphinxupquote{"angle distrib algo" = file"}} string precising the file path to read

\end{itemize}


\paragraph{Vegetation type}
\label{\detokenize{inputs:vegetation-type}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"soil reflectance"}}: if precised, soil reflects rays by a coefficient, one float by wavelength \sphinxcode{\sphinxupquote{{[}coef\_par, coef\_nir{]}}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"reflectance coefficients"}}: if precised, leaf reflects rays by a coefficient, one float by wavelength \sphinxcode{\sphinxupquote{{[}coef\_par, coef\_nir{]}}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"mu"}}: clumping effect for each input species

\end{itemize}

\sphinxstepscope


\section{Additionnal Functionalities}
\label{\detokenize{others:additionnal-functionalities}}\label{\detokenize{others:other}}\label{\detokenize{others::doc}}
\sphinxAtStartPar
Here are more functionalities implemented in the tool.


\subsection{Inputs analysis Tool}
\label{\detokenize{others:inputs-analysis-tool}}
\sphinxAtStartPar
For computing a leaf area distribution, you can run s5 or s2v tools, which was developped in previous projects.
This tools are accessible with the methods \sphinxcode{\sphinxupquote{s5()}} and \sphinxcode{\sphinxupquote{s2v()}}.
Those tools will create output files with leaf angle distribution, leaf area density and
other informations related to turbid medium, from a triangles mesh inside a LightVegeManager object.


\subsection{Visualisation}
\label{\detokenize{others:visualisation}}

\subsubsection{VTK files}
\label{\detokenize{others:vtk-files}}
\sphinxAtStartPar
You can create VTK files from the geometric information you have in the inputs. Files can be either triangles or voxels mesh. Available methods
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VTK\_nolight()}}: write only geometric informations from the common scene

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VTK\_light()}}: write geometric informations associated with radiation values for each element

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VTK\_sun()}}: write a line representing the sun position

\end{itemize}


\subsubsection{PlantGL visualizer}
\label{\detokenize{others:plantgl-visualizer}}
\sphinxAtStartPar
You can export a plantGL scene from geometric scene inside an isntance. Available methods
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{plantGL\_nolight()}}: write only geometric informations from the common scene

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{plantGL\_light()}}: write geometric informations associated with radiation values for each element

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{plantGL\_sensors()}}: write virtual sensors stock in the instance

\end{itemize}

\sphinxstepscope


\section{Tutorials with jupyter notebooks}
\label{\detokenize{tutorials:tutorials-with-jupyter-notebooks}}\label{\detokenize{tutorials:tutorials}}\label{\detokenize{tutorials::doc}}
\sphinxAtStartPar
Jupyter notebooks are available with documented tutorials exploring the tool features.

\sphinxstepscope


\subsection{LightVegeManager first steps}
\label{\detokenize{tool_basics:LightVegeManager-first-steps}}\label{\detokenize{tool_basics::doc}}

\subsubsection{Content:}
\label{\detokenize{tool_basics:Content:}}\begin{itemize}
\item {} 
\sphinxAtStartPar
One triangle
\begin{itemize}
\item {} 
\sphinxAtStartPar
CARIBU

\item {} 
\sphinxAtStartPar
RATP

\end{itemize}

\item {} 
\sphinxAtStartPar
Set of triangles
\begin{itemize}
\item {} 
\sphinxAtStartPar
CARIBU

\item {} 
\sphinxAtStartPar
RATP

\end{itemize}

\end{itemize}


\subsubsection{Introduction}
\label{\detokenize{tool_basics:Introduction}}
\sphinxAtStartPar
This notebook provides an introduction to the tool and its default parameters. Visualization is provided with PlantGL and and its adapation to jupyter notebook plantgl\sphinxhyphen{}jupyter.

\sphinxAtStartPar
The main methods of a LightVegeManager instance are : \sphinxhyphen{} constructor \sphinxcode{\sphinxupquote{\_\_init\_\_}}: returns an instance and initialize static parameters such as sky and default parameters \sphinxhyphen{} \sphinxcode{\sphinxupquote{build}}: build and arrange the geometric scene following the chosen light model format \sphinxhyphen{} \sphinxcode{\sphinxupquote{run}}: compute lighting \sphinxhyphen{} DataFrame outputs are stored in \sphinxcode{\sphinxupquote{triangles\_ouputs}}, \sphinxcode{\sphinxupquote{voxels\_ouputs}} and \sphinxcode{\sphinxupquote{elements\_ouputs}}

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[1]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} imports the LightVegeManager object and SceneWidget for visual representation}
\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{LVM} \PYG{k+kn}{import} \PYG{n}{LightVegeManager}
\PYG{k+kn}{from} \PYG{n+nn}{pgljupyter} \PYG{k+kn}{import} \PYG{n}{SceneWidget}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{One triangle}
\label{\detokenize{tool_basics:One-triangle}}
\sphinxAtStartPar
As a first example, we can compute lighting on a single 3D triangle. A triangle is reprented with a list of 3 cartesian points (x, y, z)

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{t} \PYG{o}{=} \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{)}\PYG{p}{]}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{CARIBU (surfarcic modelling)}
\label{\detokenize{tool_basics:CARIBU-(surfarcic-modelling)}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{)}%
\item {} 
\sphinxAtStartPar
Initialize the instance. The \sphinxcode{\sphinxupquote{lightmodel}} must be entered, at the moment you can choose between \sphinxcode{\sphinxupquote{"caribu"}}, \sphinxcode{\sphinxupquote{"ratp"}} and \sphinxcode{\sphinxupquote{"riri5"}}

\end{enumerate}

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} initialize the instance}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{)}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
Build the geometry. The triangle will be save inside the instance.

\end{enumerate}

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} build the scene}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{t}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
In order to visualize the scene in the instance, you can give a plantGL Scene in SceneWidget through two methods: \sphinxhyphen{} \sphinxcode{\sphinxupquote{plantGL\_nolight}}: plots only geometric elements \sphinxhyphen{} \sphinxcode{\sphinxupquote{plantGL\_light}}: plots geometric elements and colors the scene according to PAR values

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,} \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,} \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{4}\PYG{p}{,} \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'F8IKbCRRTrC164vqQvjmte6n0', 'data': b'x\textbackslash{}xdaSLrw\textbackslash{}xf5\textbackslash{}xf7e`Pp\textbackslash{}xe0\textbackslash{}…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{)}%
\setcounter{enumi}{2}
\item {} 
\sphinxAtStartPar
Compute the lighting. By default it will compute direct and diffuse lighting.

\end{enumerate}

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
Then, you can print the Dataframe outputs

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} print the outputs}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   Day  Hour  Triangle  Organ  VegetationType      Area    par Eabs  \textbackslash{}
0  264    15         0      0               0  0.707107  397.268686

       par Ei
0  467.374925
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{RATP}
\label{\detokenize{tool_basics:RATP}}
\sphinxAtStartPar
To use RATP, you need to create a new instance. The others methods can be used in the same way as with CARIBU

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} initialize the instance}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} build the scene}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{t}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
With \sphinxcode{\sphinxupquote{plantGL\_nolight}} you can precise if you want to plot the voxels. By default, if not precised, a voxel side is set as 3 times the longest triangle side.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} visualisation}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{4}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': '7Btw3DEYYw3MHgwE6O2FD7CTm', 'data': b'x\textbackslash{}xdaSLrw\textbackslash{}xf5\textbackslash{}xf7e`Pp\textbackslash{}xe0\textbackslash{}…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[12]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} compute the lighting}
\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
You can get the outputs of the voxels or the triangles

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} print the outputs}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{voxels\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   VegetationType    Day  Hour  Voxel  Nx  Ny  Nz   ShadedPAR   SunlitPAR  \textbackslash{}
0             1.0  264.0  15.0    1.0   1   1   1  380.635895  473.640411

   ShadedArea  SunlitArea      Area        PARa  Intercepted  Transmitted
0    0.010761    0.696346  0.707107  472.225067     0.667827     8.742233
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} print the outputs}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   Triangle  Organ  Voxel  VegetationType  primitive\_area    Day  Hour  Nx  \textbackslash{}
0         0      0    1.0               1        0.707107  264.0  15.0   1

   Ny  Nz   ShadedPAR   SunlitPAR  ShadedArea  SunlitArea      Area  \textbackslash{}
0   1   1  380.635895  473.640411    0.010761    0.696346  0.707107

         PARa  Intercepted  Transmitted
0  472.225067     0.667827     8.742233
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Set of triangles}
\label{\detokenize{tool_basics:Set-of-triangles}}
\sphinxAtStartPar
For this second example, we will generate a set of random 3D triangles. A function is already implemented in the package.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{trianglesmesh} \PYG{k+kn}{import} \PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{5000}
\PYG{n}{spheresize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{10.}\PYG{p}{,} \PYG{l+m+mf}{2.}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} vertices of the triangles are on the sphere surface}
\PYG{n}{triangles} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
\PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{triangles}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{CARIBU}
\label{\detokenize{tool_basics:CARIBU}}
\sphinxAtStartPar
We repeat the same steps as with one triangle

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} initialize the instance}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} build the scene}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} visualisation}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'pDz6JofPFF1NBjazXszznt9TX', 'data': b'x\textbackslash{}xda\textbackslash{}x8c]\textbackslash{}x07|M\textbackslash{}xd9\textbackslash{}xf6\textbackslash{}x…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} compute the lighting}
\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} print the outputs}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
      Day  Hour  Triangle  Organ  VegetationType       Area    par Eabs  \textbackslash{}
0     264    15         0      0               0  78.834450  139.160806
1     264    15         1      0               0  47.966120    0.886467
2     264    15         2      0               0  13.309912   27.693806
3     264    15         3      0               0  52.267733    2.489935
4     264    15         4      0               0  12.524847    0.198283
{\ldots}   {\ldots}   {\ldots}       {\ldots}    {\ldots}             {\ldots}        {\ldots}         {\ldots}
4995  264    15      4995      0               0  71.155347   17.388605
4996  264    15      4996      0               0  15.119594   67.661091
4997  264    15      4997      0               0  12.947871   57.176758
4998  264    15      4998      0               0  27.825938   28.413648
4999  264    15      4999      0               0  25.764540    2.044766

          par Ei
0     163.718595
1       1.042902
2      32.580948
3       2.929335
4       0.233274
{\ldots}          {\ldots}
4995   20.457182
4996   79.601283
4997   67.266774
4998   33.427821
4999    2.405607

[5000 rows x 8 columns]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'OGd2X5hD1gviccEoC1jTR7rLb', 'data': b'x\textbackslash{}xda\textbackslash{}x8c\}\textbackslash{}x07X\textbackslash{}x15\textbackslash{}xd7\textbackslash{}xf…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{RATP}
\label{\detokenize{tool_basics:id1}}
\sphinxAtStartPar
Now, we will set the voxels size. It needs to be specified in a dict which stores all RATP parameters. Here, you need to precise the length on each axis of one voxel.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{ratp\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{l+m+mf}{20.}\PYG{p}{]} \PYG{o}{*} \PYG{l+m+mi}{3} \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
Then, the dict is an argument in the instance creation.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} initialize the instance}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} build the scene}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} visualisation}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{n}{printtriangles}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'llGiOBzghQcYBBjj3iUAJ4Iks', 'data': b'x\textbackslash{}xda\textbackslash{}x8c\}\textbackslash{}x07|O\textbackslash{}xd9\textbackslash{}xd6v\textbackslash{}…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} compute the lighting}
\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} print the outputs}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{voxels\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
     VegetationType    Day  Hour  Voxel  Nx  Ny  Nz   ShadedPAR   SunlitPAR  \textbackslash{}
0               1.0  264.0  15.0    1.0   3   3   5   40.732689  136.623886
1               1.0  264.0  15.0    2.0   5   6   6   28.347637  124.238831
2               1.0  264.0  15.0    3.0   1   4   3  137.707138  233.598343
3               1.0  264.0  15.0    4.0   3   3   2  183.874008  279.765198
4               1.0  264.0  15.0    5.0   2   6   5   41.833862  137.725067
..              {\ldots}    {\ldots}   {\ldots}    {\ldots}  ..  ..  ..         {\ldots}         {\ldots}
213             1.0  264.0  15.0  214.0   4   2   4   63.669552  159.560745
214             1.0  264.0  15.0  215.0   1   7   6  146.115402  242.006592
215             1.0  264.0  15.0  216.0   6   3   7   82.600769  178.491959
216             1.0  264.0  15.0  217.0   1   7   2  339.311615  435.202850
217             1.0  264.0  15.0  218.0   4   5   1  375.165588  471.056763

      ShadedArea  SunlitArea         Area        PARa  Intercepted  \textbackslash{}
0    1024.282715   10.943428  1035.226196   41.746357    86.433853
1    1377.175171  283.350006  1660.525146   44.710396   148.485474
2     172.634308  291.246674   463.880981  197.912231   183.615433
3     486.705994  360.075684   846.781677  224.649658   380.458435
4    1375.770874   41.413651  1417.184570   44.636040   126.515022
..           {\ldots}         {\ldots}          {\ldots}         {\ldots}          {\ldots}
213   626.312683  157.908005   784.220703   82.977875   130.145935
214    57.020470   86.957054   143.977524  204.030106    58.751499
215   197.366257  156.226395   353.592651  124.967972    88.375519
216     4.840422   17.089012    21.929434  414.037079    18.159195
217     0.815029   39.664459    40.479488  469.126038    37.979965

     Transmitted
0      31.874031
1      18.599306
2     119.887787
3     101.195755
4      33.631508
..           {\ldots}
213    52.329762
214   128.099014
215    82.136887
216   328.422760
217   385.791229

[218 rows x 15 columns]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[23]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} print the outputs}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
      Triangle  Organ  Voxel  VegetationType  primitive\_area    Day  Hour  Nx  \textbackslash{}
0            0      0    1.0               1        6.008933  264.0  15.0   5
49           1      0    2.0               1       64.911050  264.0  15.0   4
77           2      0    3.0               1       48.494517  264.0  15.0   3
84           3      0    4.0               1        5.762879  264.0  15.0   1
91           4      0    5.0               1       21.321846  264.0  15.0   3
{\ldots}        {\ldots}    {\ldots}    {\ldots}             {\ldots}             {\ldots}    {\ldots}   {\ldots}  ..
586       4995      0   21.0               1       21.090689  264.0  15.0   5
3641      4996      0  136.0               1       32.577000  264.0  15.0   4
1051      4997      0   37.0               1       76.699258  264.0  15.0   6
1822      4998      0   63.0               1        1.464895  264.0  15.0   2
3443      4999      0  129.0               1       51.065793  264.0  15.0   5

      Ny  Nz   ShadedPAR   SunlitPAR   ShadedArea  SunlitArea         Area  \textbackslash{}
0      6   3   48.783260  144.457764  1669.359253  307.066376  1976.425659
49     2   6   50.222652  145.897171   639.340942  467.153961  1106.494873
77     7   7   76.529640  172.204147   131.880585   49.266487   181.147064
84     7   4  162.029709  257.704224   114.480240  108.982895   223.463135
91     5   5   36.165016  131.839523  1061.264648    3.100358  1064.364990
{\ldots}   ..  ..         {\ldots}         {\ldots}          {\ldots}         {\ldots}          {\ldots}
586    4   6   28.958939  124.633453   982.723572  278.425110  1261.148682
3641   4   4   20.419191  116.093712  1379.531006   34.760368  1414.291382
1051   6   5   68.352638  164.027176  1125.141846    1.110655  1126.252441
1822   5   5   39.313770  134.988281  1225.665894   14.276536  1239.942383
3443   2   6   60.735207  156.409714   431.796021  383.754333   815.550354

            PARa  Intercepted  Transmitted
0      63.647678   251.589828    31.452011
49     90.615723   200.531677    35.146641
77    102.550201    37.153339    72.656891
84    208.690125    93.269104   155.314255
91     36.443703    77.578804    28.307266
{\ldots}          {\ldots}          {\ldots}          {\ldots}
586    50.081097   126.319427    21.615057
3641   22.770676    64.408737    13.644242
1051   68.446991   154.177170    60.248528
1822   40.415356   100.225418    28.215555
3443  105.754509   172.496262    47.396954

[5000 rows x 18 columns]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} visualisation}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{n}{printtriangles}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'OaYtClMfKTsXFShXk1ESHgnYz', 'data': b'x\textbackslash{}xda\textbackslash{}x84]\textbackslash{}x07xMY\textbackslash{}xd7\textbackslash{}x8e\textbackslash{}…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} visualisation}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{n}{printtriangles}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,} \PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'jWP5jHrIFv0YocDTC7u66AES2', 'data': b'x\textbackslash{}xda\textbackslash{}x95]K\textbackslash{}x8f\textbackslash{}xa6\textbackslash{}xc7U\textbackslash{}x…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxstepscope


\subsection{Environment parameters: ways to set the simulation environment}
\label{\detokenize{environment_parameters:Environment-parameters:-ways-to-set-the-simulation-environment}}\label{\detokenize{environment_parameters::doc}}

\subsubsection{Content}
\label{\detokenize{environment_parameters:Content}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Coordinates and other boolean options

\item {} 
\sphinxAtStartPar
sky
\begin{itemize}
\item {} 
\sphinxAtStartPar
turtle of 46 directions

\item {} 
\sphinxAtStartPar
file

\item {} 
\sphinxAtStartPar
custom number of sky directions

\end{itemize}

\end{itemize}


\subsubsection{Introduction}
\label{\detokenize{environment_parameters:Introduction}}
\sphinxAtStartPar
Environment parameters are stored in a dict and transferred as an input argument for a LightVegeManager instance. It defines all static parameters during a simulation, such the sky type, radiative options etc…

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{environment} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{latitude}\PYG{p}{,} \PYG{n}{longitude}\PYG{p}{,} \PYG{n}{timezone}\PYG{p}{]} \PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{turtle46}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{filepath}\PYG{p}{]} \PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{nb\PYGZus{}azimut}\PYG{p}{,} \PYG{n}{nb\PYGZus{}zenith}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soc}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o+ow}{or} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{uoc}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{direct}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} sun radiations}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{diffus}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} sky radiations}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflected}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} reflected radiation in the canopy}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infinite}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} infinitisation of the scene}
                \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[1]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{LVM} \PYG{k+kn}{import} \PYG{n}{LightVegeManager}
\PYG{k+kn}{from} \PYG{n+nn}{pgljupyter} \PYG{k+kn}{import} \PYG{n}{SceneWidget}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
As a geometric example, we will use a random set of 3D triangles

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{trianglesmesh} \PYG{k+kn}{import} \PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}

\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{50}
\PYG{n}{spheresize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{10.}\PYG{p}{,} \PYG{l+m+mf}{2.}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} vertices of triangles are the sphere surface}
\PYG{n}{triangles} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
\PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{triangles}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{First options}
\label{\detokenize{environment_parameters:First-options}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"coordinates"}}: sets the coordinates of the simulation, this matters if you want direct radiations

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"infinite"}}: activates infinite reproduction

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"reflected"}}: activates the reflections in the scene

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"direct"}}: activates the direct radiations (sun)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"diffuse"}}: activates the diffuse radiations (sky)

\end{itemize}

\sphinxAtStartPar
An example of use

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{longitude} \PYG{o}{=} \PYG{l+m+mf}{2.}
\PYG{n}{latitude} \PYG{o}{=} \PYG{l+m+mf}{46.}
\PYG{n}{timezone} \PYG{o}{=} \PYG{l+m+mi}{1}
\PYG{n}{coordinates} \PYG{o}{=} \PYG{p}{[}\PYG{n}{latitude}\PYG{p}{,} \PYG{n}{longitude}\PYG{p}{,} \PYG{n}{timezone}\PYG{p}{]}
\PYG{n}{infinite} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{reflected} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{direct} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{diffuse} \PYG{o}{=} \PYG{k+kc}{True}

\PYG{n}{environment} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{coordinates} \PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infinite}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{infinite}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflected}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{reflected}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{direct}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{direct}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{diffuse}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{diffuse}
                \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
    Day  Hour  Triangle  Organ  VegetationType        Area  par Eabs  \textbackslash{}
0   264    15         0      0               0   99.480976  313.1030
1   264    15         1      0               0  140.415211  318.7210
2   264    15         2      0               0   20.519232  384.2305
3   264    15         3      0               0   23.926310  372.2110
4   264    15         4      0               0    5.986450  414.9295
5   264    15         5      0               0   10.845583  389.0330
6   264    15         6      0               0    0.882299  385.6705
7   264    15         7      0               0   32.812203  350.8225
8   264    15         8      0               0   36.321775  375.5740
9   264    15         9      0               0    5.071856  409.3300
10  264    15        10      0               0   52.628089  366.5175
11  264    15        11      0               0  103.885213  365.5105
12  264    15        12      0               0   65.457326  362.9340
13  264    15        13      0               0    0.567605  371.0460
14  264    15        14      0               0    7.122030  398.2765
15  264    15        15      0               0    5.181860  342.8800
16  264    15        16      0               0  271.820976  384.4815
17  264    15        17      0               0   91.585066  382.0960
18  264    15        18      0               0   36.315518  352.2335
19  264    15        19      0               0   31.149412  375.1325
20  264    15        20      0               0   35.587854  371.4830
21  264    15        21      0               0   14.172730  387.1420
22  264    15        22      0               0   31.918145  306.4970
23  264    15        23      0               0   76.036115  360.8220
24  264    15        24      0               0   13.932378  348.0675
25  264    15        25      0               0   55.601914  391.2430
26  264    15        26      0               0   84.448667  373.2410
27  264    15        27      0               0   90.626852  390.3190
28  264    15        28      0               0   19.211308  305.5760
29  264    15        29      0               0    7.412773  342.4710
30  264    15        30      0               0   50.867131  386.5955
31  264    15        31      0               0   22.183195  356.0750
32  264    15        32      0               0    5.146020  341.1475
33  264    15        33      0               0   14.648915  367.1705
34  264    15        34      0               0   64.285771  355.4715
35  264    15        35      0               0   15.752372  373.9875
36  264    15        36      0               0   34.818585  365.3500
37  264    15        37      0               0   61.748544  363.2435
38  264    15        38      0               0  102.627411  413.6665
39  264    15        39      0               0    6.460148  330.7685
40  264    15        40      0               0   45.802731  373.1850
41  264    15        41      0               0   21.008426  356.8730
42  264    15        42      0               0    9.276760  334.7805
43  264    15        43      0               0   28.316439  353.1385
44  264    15        44      0               0   36.758141  335.3380
45  264    15        45      0               0  121.996376  346.0755
46  264    15        46      0               0   69.352270  351.8705
47  264    15        47      0               0   71.266675  365.3110
48  264    15        48      0               0   81.346766  401.6110
49  264    15        49      0               0   13.311873  406.2700

        par Ei
0   368.356471
1   374.965882
2   452.035882
3   437.895294
4   488.152353
5   457.685882
6   453.730000
7   412.732353
8   441.851765
9   481.564706
10  431.197059
11  430.012353
12  426.981176
13  436.524706
14  468.560588
15  403.388235
16  452.331176
17  449.524706
18  414.392353
19  441.332353
20  437.038824
21  455.461176
22  360.584706
23  424.496471
24  409.491176
25  460.285882
26  439.107059
27  459.198824
28  359.501176
29  402.907059
30  454.818235
31  418.911765
32  401.350000
33  431.965294
34  418.201765
35  439.985294
36  429.823529
37  427.345294
38  486.666471
39  389.139412
40  439.041176
41  419.850588
42  393.859412
43  415.457059
44  394.515294
45  407.147647
46  413.965294
47  429.777647
48  472.483529
49  477.964706
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Different ways to set a sky}
\label{\detokenize{environment_parameters:Different-ways-to-set-a-sky}}

\paragraph{Turtle46}
\label{\detokenize{environment_parameters:Turtle46}}
\sphinxAtStartPar
This options creates a sky in a turtle of 46 directions. It is the default sky in the tool.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{sky} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{turtle46}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{environment}\PYG{o}{.}\PYG{n}{update}\PYG{p}{(}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{sky}\PYG{p}{\PYGZcb{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
    Day  Hour  Triangle  Organ  VegetationType        Area  par Eabs  \textbackslash{}
0   264    15         0      0               0   99.480976  313.1030
1   264    15         1      0               0  140.415211  318.7210
2   264    15         2      0               0   20.519232  384.2305
3   264    15         3      0               0   23.926310  372.2110
4   264    15         4      0               0    5.986450  414.9295
5   264    15         5      0               0   10.845583  389.0330
6   264    15         6      0               0    0.882299  385.6705
7   264    15         7      0               0   32.812203  350.8225
8   264    15         8      0               0   36.321775  375.5740
9   264    15         9      0               0    5.071856  409.3300
10  264    15        10      0               0   52.628089  366.5175
11  264    15        11      0               0  103.885213  365.5105
12  264    15        12      0               0   65.457326  362.9340
13  264    15        13      0               0    0.567605  371.0460
14  264    15        14      0               0    7.122030  398.2765
15  264    15        15      0               0    5.181860  342.8800
16  264    15        16      0               0  271.820976  384.4815
17  264    15        17      0               0   91.585066  382.0960
18  264    15        18      0               0   36.315518  352.2335
19  264    15        19      0               0   31.149412  375.1325
20  264    15        20      0               0   35.587854  371.4830
21  264    15        21      0               0   14.172730  387.1420
22  264    15        22      0               0   31.918145  306.4970
23  264    15        23      0               0   76.036115  360.8220
24  264    15        24      0               0   13.932378  348.0675
25  264    15        25      0               0   55.601914  391.2430
26  264    15        26      0               0   84.448667  373.2410
27  264    15        27      0               0   90.626852  390.3190
28  264    15        28      0               0   19.211308  305.5760
29  264    15        29      0               0    7.412773  342.4710
30  264    15        30      0               0   50.867131  386.5955
31  264    15        31      0               0   22.183195  356.0750
32  264    15        32      0               0    5.146020  341.1475
33  264    15        33      0               0   14.648915  367.1705
34  264    15        34      0               0   64.285771  355.4715
35  264    15        35      0               0   15.752372  373.9875
36  264    15        36      0               0   34.818585  365.3500
37  264    15        37      0               0   61.748544  363.2435
38  264    15        38      0               0  102.627411  413.6665
39  264    15        39      0               0    6.460148  330.7685
40  264    15        40      0               0   45.802731  373.1850
41  264    15        41      0               0   21.008426  356.8730
42  264    15        42      0               0    9.276760  334.7805
43  264    15        43      0               0   28.316439  353.1385
44  264    15        44      0               0   36.758141  335.3380
45  264    15        45      0               0  121.996376  346.0755
46  264    15        46      0               0   69.352270  351.8705
47  264    15        47      0               0   71.266675  365.3110
48  264    15        48      0               0   81.346766  401.6110
49  264    15        49      0               0   13.311873  406.2700

        par Ei
0   368.356471
1   374.965882
2   452.035882
3   437.895294
4   488.152353
5   457.685882
6   453.730000
7   412.732353
8   441.851765
9   481.564706
10  431.197059
11  430.012353
12  426.981176
13  436.524706
14  468.560588
15  403.388235
16  452.331176
17  449.524706
18  414.392353
19  441.332353
20  437.038824
21  455.461176
22  360.584706
23  424.496471
24  409.491176
25  460.285882
26  439.107059
27  459.198824
28  359.501176
29  402.907059
30  454.818235
31  418.911765
32  401.350000
33  431.965294
34  418.201765
35  439.985294
36  429.823529
37  427.345294
38  486.666471
39  389.139412
40  439.041176
41  419.850588
42  393.859412
43  415.457059
44  394.515294
45  407.147647
46  413.965294
47  429.777647
48  472.483529
49  477.964706
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{File}
\label{\detokenize{environment_parameters:File}}
\sphinxAtStartPar
You can set sky directions in a file. It needs azimut, zenit, weight and solid angle of each direction.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{os}
\PYG{n}{datafile} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{data}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky\PYGZus{}5.data}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{datafile}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}'C:\textbackslash{}\textbackslash{}Users\textbackslash{}\textbackslash{}mwoussen\textbackslash{}\textbackslash{}cdd\textbackslash{}\textbackslash{}codes\textbackslash{}\textbackslash{}dev\textbackslash{}\textbackslash{}lightvegemanager\textbackslash{}\textbackslash{}data\textbackslash{}\textbackslash{}sky\_5.data'
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{sky} \PYG{o}{=} \PYG{n}{datafile}
\PYG{n}{environment}\PYG{o}{.}\PYG{n}{update}\PYG{p}{(}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{sky}\PYG{p}{\PYGZcb{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
    Day  Hour  Triangle  Organ  VegetationType        Area  par Eabs  \textbackslash{}
0   264    15         0      0               0   99.480976  321.8920
1   264    15         1      0               0  140.415211  410.9825
2   264    15         2      0               0   20.519232  349.7725
3   264    15         3      0               0   23.926310  390.1275
4   264    15         4      0               0    5.986450  404.9985
5   264    15         5      0               0   10.845583  405.4615
6   264    15         6      0               0    0.882299  388.1070
7   264    15         7      0               0   32.812203  375.9985
8   264    15         8      0               0   36.321775  378.9715
9   264    15         9      0               0    5.071856  393.7835
10  264    15        10      0               0   52.628089  391.1865
11  264    15        11      0               0  103.885213  396.1285
12  264    15        12      0               0   65.457326  381.3970
13  264    15        13      0               0    0.567605  382.6855
14  264    15        14      0               0    7.122030  392.8865
15  264    15        15      0               0    5.181860  336.5425
16  264    15        16      0               0  271.820976  393.6545
17  264    15        17      0               0   91.585066  357.0890
18  264    15        18      0               0   36.315518  383.2600
19  264    15        19      0               0   31.149412  361.9780
20  264    15        20      0               0   35.587854  376.8490
21  264    15        21      0               0   14.172730  380.3260
22  264    15        22      0               0   31.918145  361.1125
23  264    15        23      0               0   76.036115  399.0185
24  264    15        24      0               0   13.932378  343.3480
25  264    15        25      0               0   55.601914  411.6490
26  264    15        26      0               0   84.448667  396.3155
27  264    15        27      0               0   90.626852  376.1960
28  264    15        28      0               0   19.211308  283.1020
29  264    15        29      0               0    7.412773  384.0860
30  264    15        30      0               0   50.867131  357.6440
31  264    15        31      0               0   22.183195  383.9450
32  264    15        32      0               0    5.146020  430.5005
33  264    15        33      0               0   14.648915  416.5190
34  264    15        34      0               0   64.285771  414.2600
35  264    15        35      0               0   15.752372  263.4695
36  264    15        36      0               0   34.818585  389.2345
37  264    15        37      0               0   61.748544  336.5750
38  264    15        38      0               0  102.627411  402.2385
39  264    15        39      0               0    6.460148  373.0750
40  264    15        40      0               0   45.802731  397.2810
41  264    15        41      0               0   21.008426  417.2495
42  264    15        42      0               0    9.276760  404.4165
43  264    15        43      0               0   28.316439  386.4300
44  264    15        44      0               0   36.758141  411.7950
45  264    15        45      0               0  121.996376  379.8200
46  264    15        46      0               0   69.352270  327.2225
47  264    15        47      0               0   71.266675  389.3355
48  264    15        48      0               0   81.346766  381.5730
49  264    15        49      0               0   13.311873  383.4205

        par Ei
0   378.696471
1   483.508824
2   411.497059
3   458.973529
4   476.468824
5   477.013529
6   456.596471
7   442.351176
8   445.848824
9   463.274706
10  460.219412
11  466.033529
12  448.702353
13  450.218235
14  462.219412
15  395.932353
16  463.122941
17  420.104706
18  450.894118
19  425.856471
20  443.351765
21  447.442353
22  424.838235
23  469.433529
24  403.938824
25  484.292941
26  466.253529
27  442.583529
28  333.061176
29  451.865882
30  420.757647
31  451.700000
32  506.471176
33  490.022353
34  487.364706
35  309.964118
36  457.922941
37  395.970588
38  473.221765
39  438.911765
40  467.389412
41  490.881765
42  475.784118
43  454.623529
44  484.464706
45  446.847059
46  384.967647
47  458.041765
48  448.909412
49  451.082941
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Custom number of directions}
\label{\detokenize{environment_parameters:Custom-number-of-directions}}
\sphinxAtStartPar
You can directly precise the number of directions for each spherical axis.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{nazimuts} \PYG{o}{=} \PYG{l+m+mi}{5}
\PYG{n}{nzenits} \PYG{o}{=} \PYG{l+m+mi}{5}
\PYG{n}{skytype} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soc}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{sky} \PYG{o}{=} \PYG{p}{[}\PYG{n}{nazimuts}\PYG{p}{,} \PYG{n}{nzenits}\PYG{p}{,} \PYG{n}{skytype}\PYG{p}{]}
\PYG{n}{environment}\PYG{o}{.}\PYG{n}{update}\PYG{p}{(}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{sky}\PYG{p}{\PYGZcb{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
    Day  Hour  Triangle  Organ  VegetationType        Area  par Eabs  \textbackslash{}
0   264    15         0      0               0   99.480976  312.9400
1   264    15         1      0               0  140.415211  307.4715
2   264    15         2      0               0   20.519232  376.8230
3   264    15         3      0               0   23.926310  380.4820
4   264    15         4      0               0    5.986450  400.4520
5   264    15         5      0               0   10.845583  410.6180
6   264    15         6      0               0    0.882299  382.5890
7   264    15         7      0               0   32.812203  342.8405
8   264    15         8      0               0   36.321775  378.7905
9   264    15         9      0               0    5.071856  409.1425
10  264    15        10      0               0   52.628089  358.2720
11  264    15        11      0               0  103.885213  370.8735
12  264    15        12      0               0   65.457326  373.1205
13  264    15        13      0               0    0.567605  372.0525
14  264    15        14      0               0    7.122030  408.1645
15  264    15        15      0               0    5.181860  320.8560
16  264    15        16      0               0  271.820976  382.6820
17  264    15        17      0               0   91.585066  340.6655
18  264    15        18      0               0   36.315518  339.7660
19  264    15        19      0               0   31.149412  385.4065
20  264    15        20      0               0   35.587854  357.5670
21  264    15        21      0               0   14.172730  393.8765
22  264    15        22      0               0   31.918145  307.1930
23  264    15        23      0               0   76.036115  352.0500
24  264    15        24      0               0   13.932378  341.7345
25  264    15        25      0               0   55.601914  387.1755
26  264    15        26      0               0   84.448667  375.2625
27  264    15        27      0               0   90.626852  391.0160
28  264    15        28      0               0   19.211308  285.6480
29  264    15        29      0               0    7.412773  359.1335
30  264    15        30      0               0   50.867131  393.6610
31  264    15        31      0               0   22.183195  343.9185
32  264    15        32      0               0    5.146020  315.2815
33  264    15        33      0               0   14.648915  357.9085
34  264    15        34      0               0   64.285771  357.0725
35  264    15        35      0               0   15.752372  371.3890
36  264    15        36      0               0   34.818585  370.8550
37  264    15        37      0               0   61.748544  349.6305
38  264    15        38      0               0  102.627411  413.2585
39  264    15        39      0               0    6.460148  317.7325
40  264    15        40      0               0   45.802731  377.5860
41  264    15        41      0               0   21.008426  335.8295
42  264    15        42      0               0    9.276760  346.0530
43  264    15        43      0               0   28.316439  370.1290
44  264    15        44      0               0   36.758141  333.0075
45  264    15        45      0               0  121.996376  362.9850
46  264    15        46      0               0   69.352270  347.6555
47  264    15        47      0               0   71.266675  371.9740
48  264    15        48      0               0   81.346766  397.0950
49  264    15        49      0               0   13.311873  406.0575

        par Ei
0   368.164706
1   361.731176
2   443.321176
3   447.625882
4   471.120000
5   483.080000
6   450.104706
7   403.341765
8   445.635882
9   481.344118
10  421.496471
11  436.321765
12  438.965294
13  437.708824
14  480.193529
15  377.477647
16  450.214118
17  400.782941
18  399.724706
19  453.419412
20  420.667059
21  463.384118
22  361.403529
23  414.176471
24  402.040588
25  455.500588
26  441.485294
27  460.018824
28  336.056471
29  422.510000
30  463.130588
31  404.610000
32  370.919412
33  421.068824
34  420.085294
35  436.928235
36  436.300000
37  411.330000
38  486.186471
39  373.802941
40  444.218824
41  395.093529
42  407.121176
43  435.445882
44  391.773529
45  427.041176
46  409.006471
47  437.616471
48  467.170588
49  477.714706
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{And RATP ?}
\label{\detokenize{environment_parameters:And-RATP-?}}
\sphinxAtStartPar
All the skies defined above are available with RATP as the light model

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[12]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
    Triangle  Organ  Voxel  VegetationType  primitive\_area    Day  Hour  Nx  \textbackslash{}
0          0      0    1.0               1       99.480976  264.0  15.0   2
7          1      0    2.0               1      140.415211  264.0  15.0   2
14         2      0    3.0               1       20.519232  264.0  15.0   1
25         3      0    4.0               1       23.926310  264.0  15.0   1
26         4      0    4.0               1        5.986450  264.0  15.0   1
15         5      0    3.0               1       10.845583  264.0  15.0   1
16         6      0    3.0               1        0.882299  264.0  15.0   1
29         7      0    5.0               1       32.812203  264.0  15.0   1
27         8      0    4.0               1       36.321775  264.0  15.0   1
1          9      0    1.0               1        5.071856  264.0  15.0   2
34        10      0    6.0               1       52.628089  264.0  15.0   2
2         11      0    1.0               1      103.885213  264.0  15.0   2
17        12      0    3.0               1       65.457326  264.0  15.0   1
18        13      0    3.0               1        0.567605  264.0  15.0   1
19        14      0    3.0               1        7.122030  264.0  15.0   1
39        15      0    7.0               1        5.181860  264.0  15.0   1
20        16      0    3.0               1      271.820976  264.0  15.0   1
21        17      0    3.0               1       91.585066  264.0  15.0   1
3         18      0    1.0               1       36.315518  264.0  15.0   2
42        19      0    8.0               1       31.149412  264.0  15.0   2
8         20      0    2.0               1       35.587854  264.0  15.0   2
22        21      0    3.0               1       14.172730  264.0  15.0   1
40        22      0    7.0               1       31.918145  264.0  15.0   1
43        23      0    8.0               1       76.036115  264.0  15.0   2
35        24      0    6.0               1       13.932378  264.0  15.0   2
44        25      0    8.0               1       55.601914  264.0  15.0   2
36        26      0    6.0               1       84.448667  264.0  15.0   2
30        27      0    5.0               1       90.626852  264.0  15.0   1
4         28      0    1.0               1       19.211308  264.0  15.0   2
45        29      0    8.0               1        7.412773  264.0  15.0   2
9         30      0    2.0               1       50.867131  264.0  15.0   2
46        31      0    8.0               1       22.183195  264.0  15.0   2
47        32      0    8.0               1        5.146020  264.0  15.0   2
31        33      0    5.0               1       14.648915  264.0  15.0   1
28        34      0    4.0               1       64.285771  264.0  15.0   1
48        35      0    8.0               1       15.752372  264.0  15.0   2
32        36      0    5.0               1       34.818585  264.0  15.0   1
10        37      0    2.0               1       61.748544  264.0  15.0   2
5         38      0    1.0               1      102.627411  264.0  15.0   2
11        39      0    2.0               1        6.460148  264.0  15.0   2
41        40      0    7.0               1       45.802731  264.0  15.0   1
6         41      0    1.0               1       21.008426  264.0  15.0   2
12        42      0    2.0               1        9.276760  264.0  15.0   2
23        43      0    3.0               1       28.316439  264.0  15.0   1
49        44      0    8.0               1       36.758141  264.0  15.0   2
24        45      0    3.0               1      121.996376  264.0  15.0   1
13        46      0    2.0               1       69.352270  264.0  15.0   2
37        47      0    6.0               1       71.266675  264.0  15.0   2
38        48      0    6.0               1       81.346766  264.0  15.0   2
33        49      0    5.0               1       13.311873  264.0  15.0   1

    Ny  Nz   ShadedPAR   SunlitPAR  ShadedArea  SunlitArea        Area  \textbackslash{}
0    2   1  514.910706  514.910706    8.961945  378.638763  387.600708
7    1   2  508.419556  508.419556   10.553925  363.153992  373.707916
14   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
25   1   1  520.405823  520.405823    1.771942  128.748367  130.520309
26   1   1  520.405823  520.405823    1.771942  128.748367  130.520309
15   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
16   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
29   2   1  519.076111  519.076111    2.660919  183.557510  186.218430
27   1   1  520.405823  520.405823    1.771942  128.748367  130.520309
1    2   1  514.910706  514.910706    8.961945  378.638763  387.600708
34   1   1  516.687439  516.687439    6.621002  297.001587  303.622589
2    2   1  514.910706  514.910706    8.961945  378.638763  387.600708
17   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
18   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
19   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
39   1   2  514.584290  514.584290    1.922020   80.980721   82.902740
20   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
21   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
3    2   1  514.910706  514.910706    8.961945  378.638763  387.600708
42   2   2  508.459503  508.459503    6.290421  243.749527  250.039948
8    1   2  508.419556  508.419556   10.553925  363.153992  373.707916
22   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
40   1   2  514.584290  514.584290    1.922020   80.980721   82.902740
43   2   2  508.459503  508.459503    6.290421  243.749527  250.039948
35   1   1  516.687439  516.687439    6.621002  297.001587  303.622589
44   2   2  508.459503  508.459503    6.290421  243.749527  250.039948
36   1   1  516.687439  516.687439    6.621002  297.001587  303.622589
30   2   1  519.076111  519.076111    2.660919  183.557510  186.218430
4    2   1  514.910706  514.910706    8.961945  378.638763  387.600708
45   2   2  508.459503  508.459503    6.290421  243.749527  250.039948
9    1   2  508.419556  508.419556   10.553925  363.153992  373.707916
46   2   2  508.459503  508.459503    6.290421  243.749527  250.039948
47   2   2  508.459503  508.459503    6.290421  243.749527  250.039948
31   2   1  519.076111  519.076111    2.660919  183.557510  186.218430
28   1   1  520.405823  520.405823    1.771942  128.748367  130.520309
48   2   2  508.459503  508.459503    6.290421  243.749527  250.039948
32   2   1  519.076111  519.076111    2.660919  183.557510  186.218430
10   1   2  508.419556  508.419556   10.553925  363.153992  373.707916
5    2   1  514.910706  514.910706    8.961945  378.638763  387.600708
11   1   2  508.419556  508.419556   10.553925  363.153992  373.707916
41   1   2  514.584290  514.584290    1.922020   80.980721   82.902740
6    2   1  514.910706  514.910706    8.961945  378.638763  387.600708
12   1   2  508.419556  508.419556   10.553925  363.153992  373.707916
23   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
49   2   2  508.459503  508.459503    6.290421  243.749527  250.039948
24   2   2  503.838837  503.838837   19.746033  613.539612  633.285645
13   1   2  508.419556  508.419556   10.553925  363.153992  373.707916
37   1   1  516.687439  516.687439    6.621002  297.001587  303.622589
38   1   1  516.687439  516.687439    6.621002  297.001587  303.622589
33   2   1  519.076111  519.076111    2.660919  183.557510  186.218430

          PARa  Intercepted  Transmitted
0   514.910706   399.159515  4677.770020
7   508.419586   380.000824  4636.436523
14  503.838837   638.147766  4564.685547
25  520.405823   135.847061  4753.783691
26  520.405823   135.847061  4753.783691
15  503.838837   638.147766  4564.685547
16  503.838837   638.147766  4564.685547
29  519.076111   193.323074  4734.602051
27  520.405823   135.847061  4753.783691
1   514.910706   399.159515  4677.770020
34  516.687439   313.755951  4702.907227
2   514.910706   399.159515  4677.770020
17  503.838837   638.147766  4564.685547
18  503.838837   638.147766  4564.685547
19  503.838837   638.147766  4564.685547
39  514.584290    85.320900  4692.383789
20  503.838837   638.147766  4564.685547
21  503.838837   638.147766  4564.685547
3   514.910706   399.159515  4677.770020
42  508.459503   254.270370  4635.730469
8   508.419586   380.000824  4636.436523
22  503.838837   638.147766  4564.685547
40  514.584290    85.320900  4692.383789
43  508.459503   254.270370  4635.730469
35  516.687439   313.755951  4702.907227
44  508.459503   254.270370  4635.730469
36  516.687439   313.755951  4702.907227
30  519.076111   193.323074  4734.602051
4   514.910706   399.159515  4677.770020
45  508.459503   254.270370  4635.730469
9   508.419586   380.000824  4636.436523
46  508.459503   254.270370  4635.730469
47  508.459503   254.270370  4635.730469
31  519.076111   193.323074  4734.602051
28  520.405823   135.847061  4753.783691
48  508.459503   254.270370  4635.730469
32  519.076111   193.323074  4734.602051
10  508.419586   380.000824  4636.436523
5   514.910706   399.159515  4677.770020
11  508.419586   380.000824  4636.436523
41  514.584290    85.320900  4692.383789
6   514.910706   399.159515  4677.770020
12  508.419586   380.000824  4636.436523
23  503.838837   638.147766  4564.685547
49  508.459503   254.270370  4635.730469
24  503.838837   638.147766  4564.685547
13  508.419586   380.000824  4636.436523
37  516.687439   313.755951  4702.907227
38  516.687439   313.755951  4702.907227
33  519.076111   193.323074  4734.602051
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxstepscope


\subsection{Geometric inputs}
\label{\detokenize{input_scenes:Geometric-inputs}}\label{\detokenize{input_scenes::doc}}

\subsubsection{Content}
\label{\detokenize{input_scenes:Content}}\begin{itemize}
\item {} 
\sphinxAtStartPar
input formats
\begin{itemize}
\item {} 
\sphinxAtStartPar
Dict of triangles

\item {} 
\sphinxAtStartPar
PlantGL scene

\item {} 
\sphinxAtStartPar
VGX file

\item {} 
\sphinxAtStartPar
Voxels grid

\item {} 
\sphinxAtStartPar
MTG object from adelwheat

\item {} 
\sphinxAtStartPar
RATP inputs

\item {} 
\sphinxAtStartPar
RiRi5 inputs

\end{itemize}

\item {} 
\sphinxAtStartPar
organization levels: species and organs

\item {} 
\sphinxAtStartPar
stems management

\item {} 
\sphinxAtStartPar
geometric transformations

\end{itemize}


\subsubsection{Introduction}
\label{\detokenize{input_scenes:Introduction}}
\sphinxAtStartPar
The main purpose of this tool was to merge several geometric scenes in various formats and apply a radiative modelling on it. Here, we will precise the different possiblities for manipulating geometry.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[1]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{LVM} \PYG{k+kn}{import} \PYG{n}{LightVegeManager}
\PYG{k+kn}{from} \PYG{n+nn}{pgljupyter} \PYG{k+kn}{import} \PYG{n}{SceneWidget}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} Environment parameters for this notebook}
\PYG{n}{longitude} \PYG{o}{=} \PYG{l+m+mf}{2.}
\PYG{n}{latitude} \PYG{o}{=} \PYG{l+m+mf}{46.}
\PYG{n}{timezone} \PYG{o}{=} \PYG{l+m+mi}{1}
\PYG{n}{coordinates} \PYG{o}{=} \PYG{p}{[}\PYG{n}{latitude}\PYG{p}{,} \PYG{n}{longitude}\PYG{p}{,} \PYG{n}{timezone}\PYG{p}{]}
\PYG{n}{infinite} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{reflected} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{direct} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{diffuse} \PYG{o}{=} \PYG{k+kc}{True}
\PYG{n}{sky} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{turtle46}\PYG{l+s+s2}{\PYGZdq{}}

\PYG{n}{environment} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{coordinates} \PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infinite}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{infinite}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflected}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{reflected}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{direct}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{direct}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{diffuse}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{diffuse}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{sky}
                \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Inputs Formats}
\label{\detokenize{input_scenes:Inputs-Formats}}
\sphinxAtStartPar
In this section, we won’t present single triangle and list of triangles as input geometry, as they were present in the \sphinxcode{\sphinxupquote{tool\_basics.ipynb}} notebook. Also, these two formats can be direct inputs of the \sphinxcode{\sphinxupquote{geometry}} argument of the \sphinxcode{\sphinxupquote{build}} method, unlike the following formats which needs to be included in a list, such as:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{scene1}\PYG{p}{,} \PYG{n}{scene2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]} \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\paragraph{dict of triangles}
\label{\detokenize{input_scenes:dict-of-triangles}}
\sphinxAtStartPar
A mesh of triangles can be represented as a dict, where each key is an organ ID and its value, a list of triangles belonging to the organ. A triangle is a list of a 3 vertices represented by \sphinxcode{\sphinxupquote{(x,y,z)}}points.

\sphinxAtStartPar
In this example, we will generate random 3D triangles for 3 differents organs.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[12]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{trianglesmesh} \PYG{k+kn}{import} \PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}

\PYG{n}{spheresize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{10.}\PYG{p}{,} \PYG{l+m+mf}{2.}\PYG{p}{)}
\PYG{n}{organized\PYGZus{}triangles} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+m+mi}{111}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{,} \PYG{n}{worldsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
    \PYG{l+m+mi}{222}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{,} \PYG{n}{worldsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{,}\PYG{l+m+mi}{50}\PYG{p}{)}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
    \PYG{l+m+mi}{333}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{,} \PYG{n}{worldsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{50}\PYG{p}{,}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
Input geometry looks like:

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{organized\PYGZus{}triangles}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
Then, we compute lighting and run a visualization of the scene.

\sphinxAtStartPar
Note: \sphinxcode{\sphinxupquote{elements\_outputs}} method will return a Dataframe where results are integrated on each organ.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} compute the lighting}
\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   Day  Hour  Organ  VegetationType        Area    par Eabs      par Ei
0  264    15    111               0  812.660080  254.783023  299.744733
1  264    15    222               0  906.791550  326.191765  383.755017
2  264    15    333               0  456.917637  368.655503  433.712356
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'BwxHSpLTosrUCKkss9pQniZu1', 'data': b'x\textbackslash{}xda\textbackslash{}x85\textbackslash{}x9a\textbackslash{}t\textbackslash{}\textbackslash{}U\textbackslash{}xd5\textbackslash{}xf6…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{PlantGL scene}
\label{\detokenize{input_scenes:PlantGL-scene}}
\sphinxAtStartPar
A plantGL Scene is a list of plantGL Shape which can be considered as organ. The ID of the plantGL Shape are stored as organs ID.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{openalea}\PYG{n+nn}{.}\PYG{n+nn}{plantgl}\PYG{n+nn}{.}\PYG{n+nn}{all} \PYG{k}{as} \PYG{n+nn}{pgl}

\PYG{n}{pgl\PYGZus{}scene} \PYG{o}{=} \PYG{n}{pgl}\PYG{o}{.}\PYG{n}{Scene}\PYG{p}{(}\PYG{p}{[}\PYG{n}{pgl}\PYG{o}{.}\PYG{n}{Shape}\PYG{p}{(}\PYG{n}{pgl}\PYG{o}{.}\PYG{n}{Box}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,} \PYG{n}{pgl}\PYG{o}{.}\PYG{n}{Material}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{888}\PYG{p}{)}\PYG{p}{,}
                        \PYG{n}{pgl}\PYG{o}{.}\PYG{n}{Shape}\PYG{p}{(}\PYG{n}{pgl}\PYG{o}{.}\PYG{n}{Translated}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{n}{pgl}\PYG{o}{.}\PYG{n}{Cylinder}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{n}{pgl}\PYG{o}{.}\PYG{n}{Material}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{999}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{pgl\PYGZus{}scene}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{5}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   Day  Hour  Organ  VegetationType      Area    par Eabs      par Ei
0  264    15    888               0  6.000000  159.643042  187.815343
1  264    15    999               0  4.475681  185.076017  217.736490
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': '8kU7diEsaj9G3BXsKdlxCbLNN', 'data': b'x\textbackslash{}xda\textbackslash{}x95\textbackslash{}x99\textbackslash{}xddn\textbackslash{}x1bE\textbackslash{}x1…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{VGX file}
\label{\detokenize{input_scenes:VGX-file}}
\sphinxAtStartPar
The tool can read a VGX file as an input entry. It extracts triangles which are considered as leaves, following its colors, if Red != 42 . All triangles are stored in the same organ, where its ID is set to 0.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{os}

\PYG{n}{vgx\PYGZus{}path} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{data}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NICatObs1P2.vgx}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{vgx\PYGZus{}path}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}'C:\textbackslash{}\textbackslash{}Users\textbackslash{}\textbackslash{}mwoussen\textbackslash{}\textbackslash{}cdd\textbackslash{}\textbackslash{}codes\textbackslash{}\textbackslash{}dev\textbackslash{}\textbackslash{}lightvegemanager\textbackslash{}\textbackslash{}data\textbackslash{}\textbackslash{}NICatObs1P2.vgx'
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{vgx\PYGZus{}path}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\PYG{c+c1}{\PYGZsh{} compute the lighting}
\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   Day  Hour  Organ  VegetationType         Area    par Eabs      par Ei
0  264    15      0               0  6062.836763  193.704509  227.887658
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'bOBZCLMbmtxLySxt6uCQ3jfKw', 'data': b'x\textbackslash{}xda\textbackslash{}x94\textbackslash{}x9d\textbackslash{}x07\textbackslash{}x9c\textbackslash{}x15E…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Grid of voxels}
\label{\detokenize{input_scenes:Grid-of-voxels}}
\sphinxAtStartPar
A voxel grid is represented as a dict of two entries: \sphinxhyphen{} \sphinxcode{\sphinxupquote{"LA"}} corresponding to leaf area, is a table (\sphinxcode{\sphinxupquote{numpy.array}}) of dimension \$:nbsphinx\sphinxhyphen{}math:\sphinxtitleref{text\{number of species\}} \times `:nbsphinx-math:text\{number of z layers\}\textasciigrave{} \times `:nbsphinx-math:text\{number of x layers\}\textasciigrave{} \times `:nbsphinx-math:text\{number of y layers\}\textasciigrave{} \$ \sphinxhyphen{} \sphinxcode{\sphinxupquote{"distrib"}} corresponding to leaf angle distribution, is a list of list, where is entered a leaf angle distribution
for each specy

\sphinxAtStartPar
Grid dimensions and voxel size are set in the input parameters of RATP.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{numpy}

\PYG{n}{l\PYGZus{}scene} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LA}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{numpy}\PYG{o}{.}\PYG{n}{ones}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{,} \PYG{l+m+mi}{3}\PYG{p}{,} \PYG{l+m+mi}{4}\PYG{p}{,} \PYG{l+m+mi}{4}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{distrib}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{p}{[}\PYG{l+m+mf}{0.5}\PYG{p}{,} \PYG{l+m+mf}{0.5}\PYG{p}{]}\PYG{p}{,} \PYG{p}{[}\PYG{l+m+mf}{0.3}\PYG{p}{,} \PYG{l+m+mf}{0.7}\PYG{p}{]}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{vgx\PYGZus{}path}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\PYG{n}{ratp\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+m+mf}{20.}\PYG{p}{]} \PYG{o}{*} \PYG{l+m+mi}{3}
\PYG{p}{\PYGZcb{}}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{n}{printtriangles}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,} \PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
     Day  Hour  Organ  VegetationType         Area        PARa  Intercepted  \textbackslash{}
0  264.0  15.0      0               1  6062.836763  307.604456   215.922903

   Transmitted   SunlitPAR  SunlitArea   ShadedPAR  ShadedArea
0   215.922903  307.604461  252.377915  307.604461  126.601372
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'OgKLbEOYkRT69libXrZkXUjuC', 'data': b'x\textbackslash{}xda\textbackslash{}x95XMh]E\textbackslash{}x14\textbackslash{}xbe4\textbackslash{}x8…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{MTG object from adelwheat}
\label{\detokenize{input_scenes:MTG-object-from-adelwheat}}
\sphinxAtStartPar
Finally, you can also give a MTG object with a \sphinxcode{\sphinxupquote{"scene"}} property. The package adelwheat offers such objects.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{from} \PYG{n+nn}{alinea}\PYG{n+nn}{.}\PYG{n+nn}{adel}\PYG{n+nn}{.}\PYG{n+nn}{adel\PYGZus{}dynamic} \PYG{k+kn}{import} \PYG{n}{AdelDyn}
\PYG{k+kn}{from} \PYG{n+nn}{alinea}\PYG{n+nn}{.}\PYG{n+nn}{adel}\PYG{n+nn}{.}\PYG{n+nn}{echap\PYGZus{}leaf} \PYG{k+kn}{import} \PYG{n}{echap\PYGZus{}leaves}
\PYG{n}{INPUTS\PYGZus{}DIRPATH} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{data}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{adel\PYGZus{}wheat} \PYG{o}{=} \PYG{n}{AdelDyn}\PYG{p}{(}\PYG{n}{seed}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{scene\PYGZus{}unit}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{m}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{leaves}\PYG{o}{=}\PYG{n}{echap\PYGZus{}leaves}\PYG{p}{(}\PYG{n}{xy\PYGZus{}model}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Soissons\PYGZus{}byleafclass}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{g} \PYG{o}{=} \PYG{n}{adel\PYGZus{}wheat}\PYG{o}{.}\PYG{n}{load}\PYG{p}{(}\PYG{n+nb}{dir}\PYG{o}{=}\PYG{n}{INPUTS\PYGZus{}DIRPATH}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[18]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{g}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mf}{0.1}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   Day  Hour  Organ  VegetationType      Area    par Eabs      par Ei
0  264    15     19               0  0.000228  159.208612  187.304249
1  264    15     34               0  0.000013   80.953500   95.239412
2  264    15    813               0  0.000194  385.317031  453.314154
3  264    15    814               0  0.000240  367.646906  432.525772
4  264    15     51               0  0.000284  347.458387  408.774573
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[18]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'nOBWAHxiPOAKSUmQc0cHKQkiR', 'data': b'x\textbackslash{}xda\textbackslash{}x95\textbackslash{}x9a\{pUW\textbackslash{}x15\textbackslash{}xc6/…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{RATP inputs}
\label{\detokenize{input_scenes:RATP-inputs}}
\sphinxAtStartPar
All the above scenes can be geometric inputs if the lightmodel argument is set to \sphinxcode{\sphinxupquote{"ratp"}}.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[21]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{g}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mf}{0.1}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
     Day  Hour  Organ  VegetationType      Area        PARa  Intercepted  \textbackslash{}
0  264.0  15.0     19               1  0.000228  435.713379     0.000693
1  264.0  15.0     34               1  0.000013  435.713379     0.000693
2  264.0  15.0    813               1  0.000194  435.713379     0.000693
3  264.0  15.0    814               1  0.000240  441.368498     0.000288
4  264.0  15.0     51               1  0.000284  435.713379     0.000693

   Transmitted   SunlitPAR  SunlitArea   ShadedPAR  ShadedArea
0     0.000693  435.713379    0.000776  435.713379    0.000019
1     0.000693  435.713379    0.000776  435.713379    0.000019
2     0.000693  435.713379    0.000776  435.713379    0.000019
3     0.000288  441.368498    0.000322  441.368498    0.000007
4     0.000693  435.713379    0.000776  435.713379    0.000019
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[21]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'wctv0d7i6YHequCnJz21Y8umG', 'data': b'x\textbackslash{}xda\textbackslash{}x95\textbackslash{}x9a\textbackslash{}x0bpT\textbackslash{}xd5\textbackslash{}x1…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{RiRi5 inputs}
\label{\detokenize{input_scenes:RiRi5-inputs}}
\sphinxAtStartPar
RiRi5 can have the same inputs as RATP.

\sphinxAtStartPar
A scene grid of voxels must have exactly 9 angle classes for its leaf angle distribution, and at least one empty layer above the canopy.

\sphinxAtStartPar
Triangles mesh inputs are processed through the RATP pipeline, then is converted to RiRi5.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{numpy}

\PYG{n}{l\PYGZus{}scene} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LA}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{numpy}\PYG{o}{.}\PYG{n}{ones}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mi}{2}\PYG{p}{,} \PYG{l+m+mi}{3}\PYG{p}{,} \PYG{l+m+mi}{4}\PYG{p}{,} \PYG{l+m+mi}{4}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{distrib}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{p}{[}\PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.2}\PYG{p}{,} \PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.05}\PYG{p}{,} \PYG{l+m+mf}{0.05}\PYG{p}{,} \PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.2}\PYG{p}{,} \PYG{l+m+mf}{0.1}\PYG{p}{]}\PYG{p}{,}
                                                        \PYG{p}{[}\PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.05}\PYG{p}{,} \PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.2}\PYG{p}{,} \PYG{l+m+mf}{0.2}\PYG{p}{,} \PYG{l+m+mf}{0.05}\PYG{p}{]}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{for} \PYG{n}{j} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{:}
        \PYG{n}{l\PYGZus{}scene}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LA}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mf}{0.}
        \PYG{n}{l\PYGZus{}scene}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LA}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}\PYG{p}{[}\PYG{n}{j}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mf}{0.}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{l\PYGZus{}scene}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{riri5}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[21]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{riri5\PYGZus{}intercepted\PYGZus{}light}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
[[[[  0.           0.           0.           0.        ]
   [  0.           0.           0.           0.        ]
   [  0.           0.           0.           0.        ]
   [  0.           0.           0.           0.        ]]

  [[208.05400092 208.05400092 208.05400092 208.05400092]
   [208.05400092 208.05400092 208.05400092 208.05400092]
   [208.05400092 208.05400092 208.05400092 208.05400092]
   [208.05400092 208.05400092 208.05400092 208.05400092]]

  [[ 33.75896074  33.75896074  33.75896074  33.75896074]
   [ 33.75896074  33.75896074  33.75896074  33.75896074]
   [ 33.75896074  33.75896074  33.75896074  33.75896074]
   [ 33.75896074  33.75896074  33.75896074  33.75896074]]]


 [[[  0.           0.           0.           0.        ]
   [  0.           0.           0.           0.        ]
   [  0.           0.           0.           0.        ]
   [  0.           0.           0.           0.        ]]

  [[207.34450322 207.34450322 207.34450322 207.34450322]
   [207.34450322 207.34450322 207.34450322 207.34450322]
   [207.34450322 207.34450322 207.34450322 207.34450322]
   [207.34450322 207.34450322 207.34450322 207.34450322]]

  [[ 33.2079505   33.2079505   33.2079505   33.2079505 ]
   [ 33.2079505   33.2079505   33.2079505   33.2079505 ]
   [ 33.2079505   33.2079505   33.2079505   33.2079505 ]
   [ 33.2079505   33.2079505   33.2079505   33.2079505 ]]]]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[22]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{riri5\PYGZus{}transmitted\PYGZus{}light}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
[[[500.         500.         500.         500.        ]
  [500.         500.         500.         500.        ]
  [500.         500.         500.         500.        ]
  [500.         500.         500.         500.        ]]

 [[ 84.60149586  84.60149586  84.60149586  84.60149586]
  [ 84.60149586  84.60149586  84.60149586  84.60149586]
  [ 84.60149586  84.60149586  84.60149586  84.60149586]
  [ 84.60149586  84.60149586  84.60149586  84.60149586]]

 [[ 17.63458462  17.63458462  17.63458462  17.63458462]
  [ 17.63458462  17.63458462  17.63458462  17.63458462]
  [ 17.63458462  17.63458462  17.63458462  17.63458462]
  [ 17.63458462  17.63458462  17.63458462  17.63458462]]]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[12]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{organized\PYGZus{}triangles}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}

\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{riri5\PYGZus{}intercepted\PYGZus{}light}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
[[[[0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   {\ldots}
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]]

  [[0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   {\ldots}
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]]

  [[0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   {\ldots}
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]]

  {\ldots}

  [[0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   {\ldots}
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]]

  [[0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   {\ldots}
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]]

  [[0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   {\ldots}
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]
   [0. 0. 0. {\ldots} 0. 0. 0.]]]]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{riri5\PYGZus{}transmitted\PYGZus{}light}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
[[[500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  {\ldots}
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]]

 [[500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  {\ldots}
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]]

 [[500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  {\ldots}
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]]

 {\ldots}

 [[500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  {\ldots}
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]]

 [[500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  {\ldots}
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]]

 [[500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  {\ldots}
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]
  [500. 500. 500. {\ldots} 500. 500. 500.]]]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Organizing the inputs}
\label{\detokenize{input_scenes:Organizing-the-inputs}}
\sphinxAtStartPar
They are two levels of possible organization: \sphinxhyphen{} species \sphinxhyphen{} organs

\sphinxAtStartPar
Each triangle are bound to a specy ID and a organ ID. Each specy is represented as a input scene. The organs ID are set inside each scene depending on its format.

\sphinxAtStartPar
\sphinxincludegraphics[width=451\sphinxpxdimen,height=291\sphinxpxdimen]{{60cdbe3e00d50d19e86902d14e45f11226181b95}.png}

\sphinxAtStartPar
An example with several scenes with the same organs ID and CARIBU.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[22]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{scene1} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+m+mi}{111}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
    \PYG{l+m+mi}{222}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
    \PYG{l+m+mi}{333}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
\PYG{p}{\PYGZcb{}}

\PYG{n}{scene2} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+m+mi}{111}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
    \PYG{l+m+mi}{222}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
    \PYG{l+m+mi}{333}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
\PYG{p}{\PYGZcb{}}

\PYG{n}{scene3} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+m+mi}{111}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
    \PYG{l+m+mi}{222}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
    \PYG{l+m+mi}{333}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
We have 3 species

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[23]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{scenes} \PYG{o}{=} \PYG{p}{[}\PYG{n}{scene1}\PYG{p}{,} \PYG{n}{scene2}\PYG{p}{,} \PYG{n}{scene3}\PYG{p}{]}
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{scenes} \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[24]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} compute the lighting}
\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   Day  Hour  Organ  VegetationType         Area    par Eabs      par Ei
0  264    15    111               0   865.848719  367.620782  432.495038
1  264    15    222               0   904.093391  343.903742  404.592638
2  264    15    333               0   500.476649  374.891932  441.049332
3  264    15    111               1   719.501340  330.624848  388.970410
4  264    15    222               1  1023.379192  351.641676  413.696090
5  264    15    333               1   129.105369  391.022326  460.026266
6  264    15    111               2  1047.414777  335.930702  395.212591
7  264    15    222               2  1174.044647  349.124635  410.734865
8  264    15    333               2   521.903258  361.052748  424.767939
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[25]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{50.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[25]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'sNiVT3L9ABichdb2gAyBsVr2f', 'data': b'x\textbackslash{}xda\textbackslash{}x85\}\textbackslash{}x07|\textbackslash{}x8d\textbackslash{}xd7\textbackslash{}xf…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
The two level organization are also kept with RATP

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[27]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
     Day  Hour  Organ  VegetationType         Area        PARa  Intercepted  \textbackslash{}
0  264.0  15.0    111               1   865.848719  444.431609   438.050846
1  264.0  15.0    222               1   904.093391  439.138654   508.370824
2  264.0  15.0    333               1   500.476649  438.358519   466.758357
3  264.0  15.0    111               2   719.501340  441.984838   374.664274
4  264.0  15.0    222               2  1023.379192  436.324817   446.932608
5  264.0  15.0    333               2   129.105369  442.768841   373.148804
6  264.0  15.0    111               3  1047.414777  437.256257   728.403508
7  264.0  15.0    222               3  1174.044647  443.465415   536.007093
8  264.0  15.0    333               3   521.903258  432.082470   816.087594

   Transmitted   SunlitPAR  SunlitArea   ShadedPAR  ShadedArea
0   438.050846  450.722334  463.402916  356.222905   49.407779
1   508.370824  446.126727  538.617195  351.627301   58.372064
2   466.758357  446.387940  492.094716  351.888516   56.801907
3   374.664274  449.154416  395.429864  352.554837   42.809579
4   446.932608  444.042247  473.516975  347.442668   51.797538
5   373.148804  449.336097  395.819748  352.736518   45.454794
6   728.403508  444.694193  770.345275  349.806482   81.342446
7   536.007093  450.321284  565.173551  355.433568   58.993793
8   816.087594  440.468993  864.084337  345.581276   97.832614
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{nbsphinx-stderr}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{stderr}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
c:\textbackslash{}users\textbackslash{}mwoussen\textbackslash{}cdd\textbackslash{}codes\textbackslash{}dev\textbackslash{}lightvegemanager\textbackslash{}src\textbackslash{}lightvegemanager\textbackslash{}outputs.py:255: UserWarning: You are merging on int and float columns where the float values are not equal to their int representation.
  trianglesoutputs = pandas.merge(dftriangles, voxels\_outputs)
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Stems}
\label{\detokenize{input_scenes:Stems}}
\sphinxAtStartPar
If there are stems elements in the inputs, you can precise their ID and the tool will manage them, depending on the lightmodel: \sphinxhyphen{} with CARIBU, the optical parameters associated to the organ won’t have a transmission value (rays won’t cross the triangle) \sphinxhyphen{} with RATP, stems are separated in a new specy with its own leaf angle distribution and their leaf area is divided by 2

\sphinxAtStartPar
We reuse the wheat geometry given by adelwheat

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{g}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
stems are stored in list where each element is a 2\sphinxhyphen{}tuple \sphinxcode{\sphinxupquote{(organ ID, specy ID)}}

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{stems} \PYG{o}{=} \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{19}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{34}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{]}
\PYG{n}{geometry}\PYG{o}{.}\PYG{n}{update}\PYG{p}{(}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{stems id}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{stems}\PYG{p}{\PYGZcb{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mf}{0.1}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'jZ9Zexz60T6u6TydCb9uVlZBe', 'data': b'x\textbackslash{}xda\textbackslash{}x95\textbackslash{}x9a\textbackslash{}r\textbackslash{}x8cT\textbackslash{}xd5\textbackslash{}x…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[32]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mf}{0.1}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   Day  Hour  Organ  VegetationType      Area    par Eabs      par Ei
0  264    15     19               0  0.000228  194.070089  215.633432
1  264    15     34               0  0.000013   93.806573  104.229526
2  264    15    813               0  0.000194  458.967637  539.961926
3  264    15    814               0  0.000240  392.729426  462.034618
4  264    15     51               0  0.000284  350.644177  412.522561
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[32]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'X6MEhdoPOJgZ1bvsYLGzPEHsk', 'data': b'x\textbackslash{}xda\textbackslash{}x95\textbackslash{}x9a\{p\textbackslash{}x15\textbackslash{}xd5\textbackslash{}x1…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Geometric transformations}
\label{\detokenize{input_scenes:Geometric-transformations}}
\sphinxAtStartPar
You can apply geometric transformations on some of the inputs scenes. We have currently 3 available transformations \sphinxhyphen{} translation by a vector \sphinxhyphen{} rescale by a factor or following scenes metric unit \sphinxhyphen{} rotation on the xy plane

\sphinxAtStartPar
\sphinxincludegraphics[width=1333\sphinxpxdimen,height=512\sphinxpxdimen]{{transform_geo}.png}

\sphinxAtStartPar
Transformations are stored in a dict, which is stored at key \sphinxcode{\sphinxupquote{"transformations"}} in the geometry entry. Structure of transformations :

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{transformations} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes unit}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}} \PYG{n}{specy} \PYG{n}{ID}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{metric unit}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rescale}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}} \PYG{n}{specy} \PYG{n}{ID}\PYG{p}{:} \PYG{n+nb}{float}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{translate}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}} \PYG{n}{specy} \PYG{n}{ID}\PYG{p}{:} \PYG{l+m+mi}{3}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{tuple} \PYG{p}{(}\PYG{n}{x}\PYG{p}{,}\PYG{n}{y}\PYG{p}{,}\PYG{n}{z}\PYG{p}{)}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{xyz orientation}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}  \PYG{p}{\PYGZob{}} \PYG{n}{specy} \PYG{n}{ID}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x+ = NEWS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Main scenes}

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{spheresize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{2.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{)}
\PYG{n}{scene1} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+m+mi}{0}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{,} \PYG{n}{worldsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\PYG{n}{scene2} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+m+mi}{0}\PYG{p}{:} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{,} \PYG{n}{worldsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}

\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{scene1}\PYG{p}{,} \PYG{n}{scene2}\PYG{p}{]} \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mf}{50.}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'DOLcNoqMANQw6VQcJjZQN4EVH', 'data': b'x\textbackslash{}xda\textbackslash{}x85Y\{TUu\textbackslash{}x16\textbackslash{}xbe\textbackslash{}x80…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Translate}
\label{\detokenize{input_scenes:Translate}}
\sphinxAtStartPar
The translation vector is a 3\sphinxhyphen{}tuple (x,y,z). Transformations is a dict in the geometry dict.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[15]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{tvec} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{10.}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{10.}\PYG{p}{,} \PYG{l+m+mf}{10.}\PYG{p}{)}
\PYG{n}{transformations} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{translate}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
        \PYG{l+m+mi}{0}\PYG{p}{:} \PYG{n}{tvec}
    \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{scene1}\PYG{p}{,} \PYG{n}{scene2}\PYG{p}{]} \PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{transformations}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{transformations}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mf}{50.}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'WtsDD3lUn5IdvzQMKP8sVF7J8', 'data': b'x\textbackslash{}xda\textbackslash{}x8d\textbackslash{}x99\textbackslash{}rTTe\textbackslash{}x1a\textbackslash{}xc7…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Rescale following metric unit}
\label{\detokenize{input_scenes:Rescale-following-metric-unit}}
\sphinxAtStartPar
You can precise the metric unit of each scene from this list: \sphinxcode{\sphinxupquote{"mm", "cm", "dm", "m", "dam", "hm", "km"}}. By default the merged scene is in m but you can change its unit when you create an instance.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[17]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{transformations} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes unit}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
        \PYG{l+m+mi}{0}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dm}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{scene1}\PYG{p}{,} \PYG{n}{scene2}\PYG{p}{]} \PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{transformations}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{transformations}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[18]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{main\PYGZus{}unit}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{m}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mf}{50.}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[18]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'xZEoaWgcFvXiGSLzBxMdGtVPm', 'data': b'x\textbackslash{}xda\textbackslash{}x85\textbackslash{}x98\textbackslash{}t\textbackslash{}\textbackslash{}\textbackslash{}x95e\textbackslash{}x16…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Rescale by a scalar factor}
\label{\detokenize{input_scenes:Rescale-by-a-scalar-factor}}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[19]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{transformations} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rescale}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
        \PYG{l+m+mi}{0}\PYG{p}{:} \PYG{l+m+mf}{2.}\PYG{p}{,}
    \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{scene1}\PYG{p}{,} \PYG{n}{scene2}\PYG{p}{]} \PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{transformations}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{transformations}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[20]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mf}{50.}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[20]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': '5z82zPETDhTAdHCoB1NtdJC6R', 'data': b'x\textbackslash{}xda\textbackslash{}x8d\textbackslash{}x99\{T\textbackslash{}x94\textbackslash{}xe5\textbackslash{}x1…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Rotate}
\label{\detokenize{input_scenes:Rotate}}
\sphinxAtStartPar
Finally, you can also rotate the scene around the z axis, in order to match the x+ convention for each input scene. You have the choice between: \sphinxhyphen{} \sphinxcode{\sphinxupquote{"x+ = N"}} \sphinxhyphen{} \sphinxcode{\sphinxupquote{"x+ = S"}} \sphinxhyphen{} \sphinxcode{\sphinxupquote{"x+ = E"}} \sphinxhyphen{} \sphinxcode{\sphinxupquote{"x+ = W"}}

\sphinxAtStartPar
The merged scene convention is x+ = N, which the convention in RATP and CARIBU.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[21]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{transformations} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{xyz orientation}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{\PYGZob{}}
        \PYG{l+m+mi}{0}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x+ = S}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+m+mi}{1}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x+ = E}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{n}{scene1}\PYG{p}{,} \PYG{n}{scene2}\PYG{p}{]} \PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{transformations}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{transformations}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[22]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{geometry}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mf}{50.}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[22]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'vEFGxUQjZl3lco2qrN9j8zsDG', 'data': b'x\textbackslash{}xda\textbackslash{}x8d\textbackslash{}x99\textbackslash{}x0bTUe\textbackslash{}x16\textbackslash{}x…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxstepscope


\subsection{Light models options: how to set up the light models}
\label{\detokenize{lightmodels_functionnalities:Light-models-options:-how-to-set-up-the-light-models}}\label{\detokenize{lightmodels_functionnalities::doc}}

\subsubsection{Content}
\label{\detokenize{lightmodels_functionnalities:Content}}\begin{itemize}
\item {} 
\sphinxAtStartPar
CARIBU
\begin{itemize}
\item {} 
\sphinxAtStartPar
Computing the sun position

\item {} 
\sphinxAtStartPar
Grid of virtual sensors

\item {} 
\sphinxAtStartPar
Other parameters

\end{itemize}

\item {} 
\sphinxAtStartPar
RATP
\begin{itemize}
\item {} 
\sphinxAtStartPar
Leaf angle distribution

\item {} 
\sphinxAtStartPar
Triangles tesselation in a grid

\item {} 
\sphinxAtStartPar
Other parameters

\end{itemize}

\end{itemize}


\subsubsection{Introduction}
\label{\detokenize{lightmodels_functionnalities:Introduction}}
\sphinxAtStartPar
During our use of lightvegemanager, we added special features for each known light models. This notebook gives you a small introduction to them.

\sphinxAtStartPar
The parameters of those features are stored in a dict.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[1]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{os}
\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{LVM} \PYG{k+kn}{import} \PYG{n}{LightVegeManager}
\PYG{k+kn}{from} \PYG{n+nn}{pgljupyter} \PYG{k+kn}{import} \PYG{n}{SceneWidget}
\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{trianglesmesh} \PYG{k+kn}{import} \PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{CARIBU}
\label{\detokenize{lightmodels_functionnalities:CARIBU}}
\sphinxAtStartPar
This is the complete parameters you can provide with CARIBU:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{caribu\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{\PYGZob{}}
                                    \PYG{n}{band0} \PYG{o}{=} \PYG{p}{(}\PYG{n}{reflectance}\PYG{p}{,} \PYG{n}{transmittance}\PYG{p}{)}\PYG{p}{,}
                                    \PYG{n}{band1} \PYG{o}{=} \PYG{p}{(}\PYG{n}{reflectance}\PYG{p}{,} \PYG{n}{transmittance}\PYG{p}{)}\PYG{p}{,}
                                    \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
                                    \PYG{p}{\PYGZcb{}}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{debug}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil mesh}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sensors}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{dxyz}\PYG{p}{,} \PYG{n}{nxyz}\PYG{p}{,} \PYG{n}{orig}\PYG{p}{,} \PYG{n}{vtkpath}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vtk}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\paragraph{Computing the sun position}
\label{\detokenize{lightmodels_functionnalities:Computing-the-sun-position}}
\sphinxAtStartPar
In order to compute the sun position, you can use either the algorithm from RATP or CARIBU. The (x, y, z) output is formatted in CARIBU format.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{caribu\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}

\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{caribu\PYGZus{}args}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}

\PYG{n}{sun\PYGZus{}caribu} \PYG{o}{=} \PYG{n}{lighting}\PYG{o}{.}\PYG{n}{sun}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{sun\PYGZus{}caribu}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
(0.33506553253259913, -0.8798617206271511, -0.3370080733212115)
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{caribu\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}

\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{caribu\PYGZus{}args}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}

\PYG{n}{sun\PYGZus{}ratp} \PYG{o}{=} \PYG{n}{lighting}\PYG{o}{.}\PYG{n}{sun}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{sun\PYGZus{}ratp}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
(0.33241183146897624, -0.8800565622452903, -0.3391206592769639)
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{dist} \PYG{o}{=} \PYG{p}{(}\PYG{n+nb}{sum}\PYG{p}{(}\PYG{p}{[} \PYG{p}{(}\PYG{n}{x}\PYG{o}{\PYGZhy{}}\PYG{n}{y}\PYG{p}{)}\PYG{o}{*}\PYG{o}{*}\PYG{l+m+mi}{2} \PYG{k}{for} \PYG{n}{x}\PYG{p}{,}\PYG{n}{y} \PYG{o+ow}{in} \PYG{n+nb}{zip}\PYG{p}{(}\PYG{n}{sun\PYGZus{}ratp}\PYG{p}{,} \PYG{n}{sun\PYGZus{}caribu}\PYG{p}{)} \PYG{p}{]}\PYG{p}{)}\PYG{p}{)} \PYG{o}{*}\PYG{o}{*} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{o}{/}\PYG{l+m+mi}{2}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{euclidean dist = }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{n}{dist}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ m}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
euclidean dist =  0.003397515564596359  m
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Grid of virtual sensors}
\label{\detokenize{lightmodels_functionnalities:Grid-of-virtual-sensors}}
\sphinxAtStartPar
If you can to match a grid of voxels, you can generate a set of virtual sensors following a 3D grid. You need to precise the dimension of the grid: \sphinxhyphen{} dxyz: \sphinxcode{\sphinxupquote{{[}dx, dy, dz{]}}} size of one voxel \sphinxhyphen{} nxyz: \sphinxcode{\sphinxupquote{{[}nx, ny, nz{]}}} number of voxels on each xyz axis \sphinxhyphen{} orig: \sphinxcode{\sphinxupquote{{[}0x, 0y, 0z{]}}} origin point of the grid

\sphinxAtStartPar
Optionnaly, you can write a geometric visualisation of the sensors in VTK format. You need to provide the file path and the flag \sphinxcode{\sphinxupquote{"vtk"}}.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} grid dimensions}
\PYG{n}{dxyz} \PYG{o}{=} \PYG{p}{[}\PYG{l+m+mf}{1.}\PYG{p}{]} \PYG{o}{*} \PYG{l+m+mi}{3}
\PYG{n}{nxyz} \PYG{o}{=} \PYG{p}{[}\PYG{l+m+mi}{5}\PYG{p}{,} \PYG{l+m+mi}{5}\PYG{p}{,} \PYG{l+m+mi}{7}\PYG{p}{]}
\PYG{n}{orig} \PYG{o}{=} \PYG{p}{[}\PYG{l+m+mf}{0.}\PYG{p}{]} \PYG{o}{*} \PYG{l+m+mi}{3}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} random triangles}
\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{50}
\PYG{n}{spheresize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.3}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} vertices of triangles are the sphere surface}
\PYG{n}{triangles} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
\PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{triangles}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{5.}\PYG{p}{)}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{caribu\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sensors}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{dxyz}\PYG{p}{,} \PYG{n}{nxyz}\PYG{p}{,} \PYG{n}{orig}\PYG{p}{]} \PYG{p}{\PYGZcb{}}

\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{caribu\PYGZus{}args}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infinite}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{True}\PYG{p}{\PYGZcb{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
You can visualize the grid of sensors with plantGL through the method \sphinxcode{\sphinxupquote{plantGL\_sensors}}

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}sensors}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'PeUbme32J7raIm5wbjhizJGRd', 'data': b'x\textbackslash{}xda\textbackslash{}x85\textbackslash{}x9ai\textbackslash{}xbf\textbackslash{}x15G\textbackslash{}x1…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
The lighting results are stored in \sphinxcode{\sphinxupquote{sensors\_outputs}}

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}

\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{sensors\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\{'par': \{0: 0.5357183881257019, 1: 0.4686494843618967, 2: 0.43585410695767945, 3: 0.7773054342426935, 4: 0.7653565097977126, 5: 0.8234079750501035, 6: 0.4758490954881396, 7: 0.5623902514683649, 8: 0.6648303684704121, 9: 0.7523744755517257, 10: 0.757628513619047, 11: 0.7759095328197766, 12: 0.5042164344666725, 13: 0.5273952940619577, 14: 0.618460535502636, 15: 0.7471856369784272, 16: 0.7002461334186968, 17: 0.8083881379807872, 18: 0.5731391756180516, 19: 0.6005392197593685, 20: 0.5830230691495272, 21: 0.668598834740319, 22: 0.7491856052337844, 23: 0.7778896638896193, 24: 0.45941263771422963, 25: 0.5231994757990336, 26: 0.5730702589058677, 27: 0.6802830730422291, 28: 0.768563206195468, 29: 0.8783160299524551, 30: 0.4879256729568832, 31: 0.3986838108537597, 32: 0.5107879595674222, 33: 0.7104544959233176, 34: 0.6104289235914225, 35: 0.8335714361222757, 36: 0.49402264002060914, 37: 0.5236661627298473, 38: 0.5559437694123442, 39: 0.7801809144392181, 40: 0.7482355370820352, 41: 0.8703959530204384, 42: 0.4437212327094782, 43: 0.48943914843165776, 44: 0.6265471398912993, 45: 0.6242676962673399, 46: 0.6242541832847409, 47: 0.8029465687456536, 48: 0.4552489809791363, 49: 0.5706269863386113, 50: 0.6707753329147661, 51: 0.6173647331272717, 52: 0.5817093348224309, 53: 0.8761273435958801, 54: 0.39061205289281303, 55: 0.4876144245567773, 56: 0.6081462607497906, 57: 0.6490748578167109, 58: 0.6112989310198034, 59: 0.9081399625253275, 60: 0.4382387194995509, 61: 0.24511969967129915, 62: 0.5564013821314899, 63: 0.6811375757235048, 64: 0.770734538810677, 65: 0.6876474556435463, 66: 0.4333876306307797, 67: 0.5117511864924423, 68: 0.5452643050348251, 69: 0.5855297120040052, 70: 0.7679378169458118, 71: 0.7374054106105965, 72: 0.46718762617607673, 73: 0.515406942360565, 74: 0.5498630958709402, 75: 0.38157016078052153, 76: 0.6230183331063252, 77: 0.9297880197486428, 78: 0.42012696485414797, 79: 0.43441190921900263, 80: 0.576547648435128, 81: 0.575563926783583, 82: 0.5587431661289568, 83: 0.9428844615982549, 84: 0.40797647513225416, 85: 0.32045180842520204, 86: 0.3860501936085704, 87: 0.6035746806015782, 88: 0.6761415094988514, 89: 0.9147231881446279, 90: 0.35723846481058197, 91: 0.29971902254716964, 92: 0.4617676006672053, 93: 0.6670186733643282, 94: 0.7729889949287282, 95: 0.8223626142139061, 96: 0.43689040185742767, 97: 0.5034266289477778, 98: 0.614485119215983, 99: 0.6753609146208617, 100: 0.8209389374222003, 101: 0.88137358368075, 102: 0.5060744695288328, 103: 0.5006922321596806, 104: 0.5450143532935812, 105: 0.669825913948119, 106: 0.7948585486270389, 107: 0.9497236962858565, 108: 0.5240235293870577, 109: 0.5291828813059647, 110: 0.5584025594129878, 111: 0.7009911880575855, 112: 0.6644575143621863, 113: 0.896722396622886, 114: 0.48066310311501675, 115: 0.45339172597584754, 116: 0.4928664818657807, 117: 0.6921498380364002, 118: 0.6582322232034805, 119: 0.8062622917317241, 120: 0.4165301298570477, 121: 0.47752211531730254, 122: 0.5422072915168136, 123: 0.7320985553256096, 124: 0.760961505134305, 125: 0.8425522336315453, 126: 0.48285036844495494, 127: 0.4897295356464291, 128: 0.6751897497018744, 129: 0.7650357314236249, 130: 0.6888417962718921, 131: 0.9099594684378505, 132: 0.4801370709108044, 133: 0.5233846696457297, 134: 0.5942217135899492, 135: 0.7384234333722701, 136: 0.8064837117567087, 137: 0.955340358423788, 138: 0.5755258055313021, 139: 0.5351956047253674, 140: 0.5430459909905389, 141: 0.7603523762894485, 142: 0.8096038729562012, 143: 0.9210479253387107, 144: 0.49256349385820036, 145: 0.4352151194578986, 146: 0.4353486297408457, 147: 0.7458275318718196, 148: 0.7991276473463365, 149: 0.9117731862505419\}\}
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
You can also visualize the results in the plantGL scene

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}sensors}\PYG{p}{(}\PYG{n}{light}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'h4EUPTlkwcC9SjqSa9KdhgS4D', 'data': b'x\textbackslash{}xda\textbackslash{}x85\textbackslash{}x9bk\textbackslash{}x7fVG\textbackslash{}x15\textbackslash{}x…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}sensors}\PYG{p}{(}\PYG{n}{light}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)} \PYG{o}{+} \PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'whSP4mA3wlgKFoL4Li9pam9AQ', 'data': b'x\textbackslash{}xda\textbackslash{}x8d\textbackslash{}x9cy\textbackslash{}x98\textbackslash{}x15\textbackslash{}xc5…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Other parameters}
\label{\detokenize{lightmodels_functionnalities:Other-parameters}}
\sphinxAtStartPar
In additional features, you can activate the debug mode in CARIBU, which describe the internal steps.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{caribu\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{debug}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{k+kc}{True} \PYG{p}{\PYGZcb{}}

\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{caribu\PYGZus{}args}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
Prepare scene 1
done
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\textcolor{ansi-red-intense}{\textbf{---------------------------------------------------------------------------}}
\textcolor{ansi-red-intense}{\textbf{FileNotFoundError}}                         Traceback (most recent call last)
Cell \textcolor{ansi-green-intense}{\textbf{In[6], line 9}}
\textcolor{ansi-green}{      7} hour \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{15}
\textcolor{ansi-green}{      8} day \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{264}
\textcolor{ansi-green-intense}{\textbf{----> 9}} \setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{lighting\strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{.\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{run\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{(\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{energy\strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{=\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{energy\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{,\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{ \strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{hour\strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{=\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{hour\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{,\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{ \strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{day\strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{=\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{day\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{)\strut}

File \textcolor{ansi-green-intense}{\textbf{c:\textbackslash{}users\textbackslash{}mwoussen\textbackslash{}cdd\textbackslash{}codes\textbackslash{}dev\textbackslash{}lightvegemanager\textbackslash{}src\textbackslash{}lightvegemanager\textbackslash{}tool.py:533}}, in \textcolor{ansi-cyan}{LightVegeManager.run}\textcolor{ansi-blue-intense}{\textbf{(self, energy, day, hour, parunit, truesolartime, id\_sensors)}}
\textcolor{ansi-green}{    531} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{\textbf{if}} sun\_sky\_option \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{==} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{"}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{mix}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{"}:
\textcolor{ansi-green}{    532}     start \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} time\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}time()
\textcolor{ansi-green-intense}{\textbf{--> 533}}     raw\_sun, aggregated\_sun \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} \setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{run\_caribu\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{(\strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{*\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{arg\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{)\strut}
\textcolor{ansi-green}{    534}     arg[\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{0}] \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} c\_scene\_sky
\textcolor{ansi-green}{    535}     raw\_sky, aggregated\_sky \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} run\_caribu(\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{*}arg)

File \textcolor{ansi-green-intense}{\textbf{c:\textbackslash{}users\textbackslash{}mwoussen\textbackslash{}cdd\textbackslash{}codes\textbackslash{}dev\textbackslash{}lightvegemanager\textbackslash{}src\textbackslash{}lightvegemanager\textbackslash{}CARIBUinputs.py:370}}, in \textcolor{ansi-cyan}{run\_caribu}\textcolor{ansi-blue-intense}{\textbf{(c\_scene, direct\_active, infinite, sensors, energy)}}
\textcolor{ansi-green}{    329} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{"""runs caribu depending on input options}
\textcolor{ansi-green}{    330}
\textcolor{ansi-green}{    331} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{:param c\_scene: instance of CaribuScene containing geometry, light source(s), opt etc{\ldots}}
\textcolor{ansi-green-intense}{\textbf{   ({\ldots})}}
\textcolor{ansi-green}{    367} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{:rtype: dict of dict, dict of dict}
\textcolor{ansi-green}{    368} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{"""}
\textcolor{ansi-green}{    369} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{\textbf{if}} sensors \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,255}}{\textbf{is}} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{\textbf{None}} :
\textcolor{ansi-green-intense}{\textbf{--> 370}}     raw, aggregated \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} \setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{c\_scene\strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{.\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{run\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{(\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{direct\strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{=\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{direct\_active\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{,\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{ \strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{infinite\strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{=\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{infinite\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{)\strut}
\textcolor{ansi-green}{    371} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{\textbf{else}} :
\textcolor{ansi-green}{    372}     raw, aggregated \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} c\_scene\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}run(direct\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=}direct\_active, infinite\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=}infinite,
\textcolor{ansi-green}{    373}                                                         sensors\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=}sensors)

File \textcolor{ansi-green-intense}{\textbf{\textasciitilde{}\textbackslash{}AppData\textbackslash{}Local\textbackslash{}miniconda3\textbackslash{}envs\textbackslash{}mobidivpy37\textbackslash{}lib\textbackslash{}site-packages\textbackslash{}alinea.caribu-8.0.7-py3.8.egg\textbackslash{}alinea\textbackslash{}caribu\textbackslash{}CaribuScene.py:568}}, in \textcolor{ansi-cyan}{CaribuScene.run}\textcolor{ansi-blue-intense}{\textbf{(self, direct, infinite, d\_sphere, layers, height, screen\_size, screen\_resolution, sensors, split\_face, simplify)}}
\textcolor{ansi-green}{    566}         \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{self}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}canfile \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} os\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}path\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}join(\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{self}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}tempdir,\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{'}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{cscene.can}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{'})
\textcolor{ansi-green}{    567}         \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{self}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}optfile \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} os\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}path\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}join(\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{self}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}tempdir,\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{'}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{band0.opt}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{'})
\textcolor{ansi-green-intense}{\textbf{--> 568}}         \setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{write\_scene\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{(\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{triangles\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{,\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{ \strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{materials\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{,\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{ \strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{canfile\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{ \strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{=\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{ \strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{self\strut}}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{.\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{canfile\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{,\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{ \strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{optfile\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{ \strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{=\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{ \strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{self\strut}}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{.\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{optfile\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{)\strut}
\textcolor{ansi-green}{    570} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{\textbf{else}}:
\textcolor{ansi-green}{    571}     \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{95,135,135}}{\# self.materialvalues is a cache for the computation of the material list}
\textcolor{ansi-green}{    572}     materials \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{self}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}materialvalues

File \textcolor{ansi-green-intense}{\textbf{\textasciitilde{}\textbackslash{}AppData\textbackslash{}Local\textbackslash{}miniconda3\textbackslash{}envs\textbackslash{}mobidivpy37\textbackslash{}lib\textbackslash{}site-packages\textbackslash{}alinea.caribu-8.0.7-py3.8.egg\textbackslash{}alinea\textbackslash{}caribu\textbackslash{}caribu.py:177}}, in \textcolor{ansi-cyan}{write\_scene}\textcolor{ansi-blue-intense}{\textbf{(triangles, materials, canfile, optfile)}}
\textcolor{ansi-green}{    175} o\_string, labels \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} opt\_string\_and\_labels(materials)
\textcolor{ansi-green}{    176} can\_string \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{=} triangles\_string(triangles, labels)
\textcolor{ansi-green-intense}{\textbf{--> 177}} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{open\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{(\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{canfile\strut}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{,\strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{'\strut}}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{w\strut}}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{'\strut}}\setlength{\fboxsep}{0pt}\colorbox{ansi-yellow}{)\strut}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}write(can\_string)
\textcolor{ansi-green}{    178} \def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{0,135,0}}{open}(optfile,\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{'}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{w}\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{175,0,0}}{'})\def\tcRGB{\textcolor[RGB]}\expandafter\tcRGB\expandafter{\detokenize{98,98,98}}{.}write(o\_string)

\textcolor{ansi-red-intense}{\textbf{FileNotFoundError}}: [Errno 2] No such file or directory: './caribuscene\_2672400716080\textbackslash{}\textbackslash{}cscene.can'
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
You can also use the soilmesh option and get the lighting hitting the soil. The method \sphinxcode{\sphinxupquote{soilenergy}} get you access to its result.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[12]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{caribu\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil mesh}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{k+kc}{True} \PYG{p}{\PYGZcb{}}

\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{caribu\PYGZus{}args}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}

\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{soilenergy}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\{'Qi': 0.6750540873627096, 'Einc': 0.6750540873627096\}
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{RATP}
\label{\detokenize{lightmodels_functionnalities:RATP}}
\sphinxAtStartPar
This is the complete parameters you can provide with CARIBU:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{ratp\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{c+c1}{\PYGZsh{} Grid specifications}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{dx}\PYG{p}{,} \PYG{n}{dy}\PYG{p}{,} \PYG{n}{dz}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dynamic}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{full grid}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{xorigin}\PYG{p}{,} \PYG{n}{yorigin}\PYG{p}{,} \PYG{n}{zorigin}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{xorigin}\PYG{p}{,} \PYG{n}{yorigin}\PYG{p}{]}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{number voxels}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{nx}\PYG{p}{,} \PYG{n}{ny}\PYG{p}{,} \PYG{n}{nz}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid slicing}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ground = 0.}\PYG{l+s+s2}{\PYGZdq{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tesselation level}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{int}

                \PYG{c+c1}{\PYGZsh{} Leaf angle distribution}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute global}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute voxel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{nb angle classes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib file}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{filepath}\PYG{p}{,}

                \PYG{c+c1}{\PYGZsh{} Vegetation type}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil reflectance}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{reflectance\PYGZus{}band0}\PYG{p}{,} \PYG{n}{reflectance\PYGZus{}band1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflectance coefficients}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{reflectance\PYGZus{}band0}\PYG{p}{,} \PYG{n}{reflectance\PYGZus{}band1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mu}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{mu\PYGZus{}scene0}\PYG{p}{,} \PYG{n}{mu\PYGZus{}scene1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}
            \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\paragraph{Leaf angle distribution}
\label{\detokenize{lightmodels_functionnalities:Leaf-angle-distribution}}
\sphinxAtStartPar
Leaf angle distribution can be generated in 3 ways: \sphinxhyphen{} from a file, one distribution per specy \sphinxhyphen{} global and dynamically, it generates a distribution from a triangles mesh for each specy \sphinxhyphen{} per voxel and dynamically, it generates a distribution from the triangles located in each voxel

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} random triangles}
\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{50}
\PYG{n}{spheresize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.3}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} vertices of triangles are the sphere surface}
\PYG{n}{worldsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{5.}\PYG{p}{)}
\PYG{n}{triangles} \PYG{o}{=} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{n}{worldsize}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{]}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{File}
\label{\detokenize{lightmodels_functionnalities:File}}
\sphinxAtStartPar
You need the flag \sphinxcode{\sphinxupquote{"file"}} and to specify the file path.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[15]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{filepath} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{data}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{luzerne\PYGZus{}angle\PYGZus{}distrib.data}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{ratp\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib file}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{filepath} \PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} initialize the instance}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} build the scene}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}

\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{leafangledistribution}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\{'global': [[0.1382, 0.1664, 0.1972, 0.1925, 0.1507, 0.0903, 0.0425, 0.0172, 0.005]]\}
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{Global distribution}
\label{\detokenize{lightmodels_functionnalities:Global-distribution}}
\sphinxAtStartPar
You need the flag \sphinxcode{\sphinxupquote{"compute global"}} and to specify the number of angle classes you need.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{ratp\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute global}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{nb angle classes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+m+mi}{9} \PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} initialize the instance}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} build the scene}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}

\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{leafangledistribution}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\{'global': [[0.0, 0.01403472520994376, 0.14553389876181141, 0.13870880399511626, 0.17786938035077418, 0.06842434118299212, 0.09608726894836216, 0.20983153542452182, 0.14951004612647875]]\}
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{Local distribution}
\label{\detokenize{lightmodels_functionnalities:Local-distribution}}
\sphinxAtStartPar
You need the flag \sphinxcode{\sphinxupquote{"compute voxel"}} and to specify the number of angle classes you need. You will get one distribution for each voxel of your grid and each specy.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{ratp\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{]}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute voxel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{nb angle classes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+m+mi}{9}
                    \PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} initialize the instance}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} build the scene}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}

\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Global}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{leafangledistribution}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{global}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{ Local}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{for} \PYG{n}{a} \PYG{o+ow}{in} \PYG{n}{lighting}\PYG{o}{.}\PYG{n}{leafangledistribution}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{:}
    \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{a}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
Global
[[0.009674637223767685, 0.06468549489243054, 0.10705660994810652, 0.10196105003699654, 0.07575759861707439, 0.3044721953841436, 0.06446975879644407, 0.14828246866341796, 0.12364018643761852]]


 Local
[0. 0. 0. 0. 0. 0. 0. 1. 0.]
[0. 0. 0. 0. 0. 0. 0. 0. 1.]
[0. 0. 1. 0. 0. 0. 0. 0. 0.]
[0.         0.         0.55805526 0.44194474 0.         0.
 0.         0.         0.        ]
[0. 0. 0. 0. 0. 0. 1. 0. 0.]
[0. 0. 0. 0. 1. 0. 0. 0. 0.]
[0. 0. 0. 0. 0. 1. 0. 0. 0.]
[0. 0. 0. 0. 0. 0. 0. 1. 0.]
[0. 0. 0. 0. 0. 0. 0. 0. 1.]
[0. 0. 0. 0. 1. 0. 0. 0. 0.]
[0. 1. 0. 0. 0. 0. 0. 0. 0.]
[0. 1. 0. 0. 0. 0. 0. 0. 0.]
[0. 1. 0. 0. 0. 0. 0. 0. 0.]
[0. 0. 0. 1. 0. 0. 0. 0. 0.]
[0. 1. 0. 0. 0. 0. 0. 0. 0.]
[0. 0. 0. 0. 1. 0. 0. 0. 0.]
[0.         0.         0.41000514 0.58999486 0.         0.
 0.         0.         0.        ]
[0. 0. 0. 0. 0. 1. 0. 0. 0.]
[0. 0. 0. 0. 0. 0. 0. 0. 1.]
[0. 0. 1. 0. 0. 0. 0. 0. 0.]
[0. 0. 0. 0. 1. 0. 0. 0. 0.]
[0. 0. 0. 0. 0. 0. 0. 1. 0.]
[1. 0. 0. 0. 0. 0. 0. 0. 0.]
[0. 0. 0. 0. 1. 0. 0. 0. 0.]
[0. 0. 0. 0. 1. 0. 0. 0. 0.]
[0. 0. 0. 0. 0. 1. 0. 0. 0.]
[0.         0.         0.58893012 0.41106988 0.         0.
 0.         0.         0.        ]
[0. 0. 0. 0. 1. 0. 0. 0. 0.]
[0. 0. 0. 0. 0. 1. 0. 0. 0.]
[0.         0.30170822 0.         0.         0.         0.
 0.         0.         0.69829178]
[0.         0.         0.         0.17828753 0.         0.
 0.         0.         0.82171247]
[0. 0. 0. 1. 0. 0. 0. 0. 0.]
[0. 0. 0. 0. 0. 1. 0. 0. 0.]
[0. 0. 0. 0. 0. 0. 0. 0. 1.]
[0. 0. 0. 1. 0. 0. 0. 0. 0.]
[0. 1. 0. 0. 0. 0. 0. 0. 0.]
[1. 0. 0. 0. 0. 0. 0. 0. 0.]
[0. 0. 0. 0. 0. 0. 0. 1. 0.]
[0. 0. 0. 1. 0. 0. 0. 0. 0.]
[0. 0. 0. 0. 0. 1. 0. 0. 0.]
[0. 0. 0. 0. 0. 0. 0. 0. 1.]
[0. 0. 1. 0. 0. 0. 0. 0. 0.]
[0. 0. 0. 0. 0. 0. 0. 1. 0.]
[0. 0. 0. 0. 0. 0. 1. 0. 0.]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
For visualization of the situation

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{n}{printtriangles}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'Rp6rgkWOhuO88XZzffdSscV0V', 'data': b'x\textbackslash{}xda\textbackslash{}x8d\textbackslash{}x9b\{\textbackslash{}x9c\textbackslash{}x8d\textbackslash{}xd5…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Triangles tesselation in a grid}
\label{\detokenize{lightmodels_functionnalities:Triangles-tesselation-in-a-grid}}
\sphinxAtStartPar
You can reduce the error while transferring a triangle mesh to a voxel mesh by subdividing triangles across multiple voxels.



\sphinxAtStartPar
\sphinxincludegraphics[width=500\sphinxpxdimen]{{tesselation_voxels}.png}



\sphinxAtStartPar
You only need to precise how many times you want to subdivide the triangles.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[21]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{ratp\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{]}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tesselation level}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+m+mi}{7} \PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} initialize the instance}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} build the scene}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}

\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{n}{printtriangles}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[21]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'w9mu1jQPBqZrSzDk4B45B9Wav', 'data': b'x\textbackslash{}xda\textbackslash{}x94\}\textbackslash{}x07\textbackslash{}x9c\^{}E\textbackslash{}xd5\textasciitilde{}\textbackslash{}…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Other parameters}
\label{\detokenize{lightmodels_functionnalities:id1}}
\sphinxAtStartPar
By default, the number of voxels is dynamically computed following the voxel size and mesh limits, but you can force its number.

\sphinxAtStartPar
Voxel size can also be dynamically computed and is based on 3 times the longest triangle.

\sphinxstepscope


\subsection{Output formats and transfer methods}
\label{\detokenize{outputs_and_plantmodels_transfer:Output-formats-and-transfer-methods}}\label{\detokenize{outputs_and_plantmodels_transfer::doc}}

\subsubsection{Content}
\label{\detokenize{outputs_and_plantmodels_transfer:Content}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Main light outputs

\item {} 
\sphinxAtStartPar
transfer results to l\sphinxhyphen{}egume

\item {} 
\sphinxAtStartPar
transfer results to CN\sphinxhyphen{}Wheat

\end{itemize}


\subsubsection{Introduction}
\label{\detokenize{outputs_and_plantmodels_transfer:Introduction}}
\sphinxAtStartPar
This notebook will present the different output formats given by the tool.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[1]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{LVM} \PYG{k+kn}{import} \PYG{n}{LightVegeManager}
\PYG{k+kn}{from} \PYG{n+nn}{pgljupyter} \PYG{k+kn}{import} \PYG{n}{SceneWidget}
\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{trianglesmesh} \PYG{k+kn}{import} \PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Main light outputs: Pandas dataframe}
\label{\detokenize{outputs_and_plantmodels_transfer:Main-light-outputs:-Pandas-dataframe}}
\sphinxAtStartPar
Outputs are stored in at least two different scales, by triangle or voxel, and by organ. We will use a set of random triangles as an illustration.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} random triangles}
\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{20}
\PYG{n}{spheresize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.3}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} vertices of triangles are the sphere surface}
\PYG{n}{worldsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{5.}\PYG{p}{)}
\PYG{n}{triangles} \PYG{o}{=} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{n}{worldsize}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{]}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
We compute one iteration with CARIBU

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
Results for each triangle

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n+nb}{type}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>

    Day  Hour  Triangle  Organ  VegetationType      Area    par Eabs  \textbackslash{}
0   264    15         0      0               0  0.536966  432.528062
1   264    15         1      0               0  0.504415  473.973825
2   264    15         2      0               0  0.314083  466.696396
3   264    15         3      0               0  0.057297  427.303344
4   264    15         4      0               0  0.266138  346.795923
5   264    15         5      0               0  0.318387  359.266951
6   264    15         6      0               0  0.089070  480.230969
7   264    15         7      0               0  0.436727  383.952401
8   264    15         8      0               0  0.094307  380.840868
9   264    15         9      0               0  0.501522  388.825138
10  264    15        10      0               0  0.051670  382.490896
11  264    15        11      0               0  0.193144  407.201836
12  264    15        12      0               0  0.585857  414.603624
13  264    15        13      0               0  0.139755  427.431809
14  264    15        14      0               0  0.805939  317.704624
15  264    15        15      0               0  0.104366  420.622125
16  264    15        16      0               0  0.214229  461.347939
17  264    15        17      0               0  0.273954  426.103905
18  264    15        18      0               0  0.986628  376.478502
19  264    15        19      0               0  0.303850  469.840116

        par Ei
0   508.856544
1   557.616265
2   549.054584
3   502.709816
4   407.995204
5   422.667001
6   564.977611
7   451.708707
8   448.048080
9   457.441339
10  449.989290
11  479.060984
12  487.768969
13  502.860951
14  373.770146
15  494.849559
16  542.762281
17  501.298712
18  442.915885
19  552.753077
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
We can try to group multiple sets of triangles

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{10}
\PYG{n}{triangles1} \PYG{o}{=} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{n}{worldsize}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{]}

\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{9}
\PYG{n}{triangles2} \PYG{o}{=} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{n}{worldsize}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{]}

\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{8}
\PYG{n}{triangles3} \PYG{o}{=} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{n}{worldsize}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{]}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{scene} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+m+mi}{0}\PYG{p}{:} \PYG{n}{triangles1}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{:} \PYG{n}{triangles2}\PYG{p}{,} \PYG{l+m+mi}{2}\PYG{p}{:} \PYG{n}{triangles3}\PYG{p}{\PYGZcb{}}

\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{scene}\PYG{p}{]} \PYG{p}{\PYGZcb{}}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
    Day  Hour  Triangle  Organ  VegetationType      Area    par Eabs  \textbackslash{}
0   264    15         0      0               0  0.347893  466.934112
1   264    15         1      0               0  0.230175  343.491693
2   264    15         2      0               0  0.236752  406.441366
3   264    15         3      0               0  0.055911  431.671508
4   264    15         4      0               0  2.047361  349.189980
5   264    15         5      0               0  0.132022  305.537738
6   264    15         6      0               0  0.179736  347.226774
7   264    15         7      0               0  0.353962  391.605479
8   264    15         8      0               0  1.065609  441.957469
9   264    15         9      0               0  0.196493  334.393347
10  264    15        10      1               0  0.014315  335.982872
11  264    15        11      1               0  0.047547  409.832578
12  264    15        12      1               0  0.932423  417.792230
13  264    15        13      1               0  0.078560  330.173348
14  264    15        14      1               0  0.037776  413.308224
15  264    15        15      1               0  1.845328  393.111328
16  264    15        16      1               0  0.212917  402.681041
17  264    15        17      1               0  0.367550  360.846221
18  264    15        18      1               0  0.104118  339.165224
19  264    15        19      2               0  0.051821  481.839430
20  264    15        20      2               0  0.172513  316.689490
21  264    15        21      2               0  0.274700  360.822712
22  264    15        22      2               0  0.150917  274.216253
23  264    15        23      2               0  0.028843  372.272165
24  264    15        24      2               0  0.643578  373.151609
25  264    15        25      2               0  0.094779  340.286767
26  264    15        26      2               0  0.069499  388.224866

        par Ei
0   549.334249
1   404.107874
2   478.166313
3   507.848832
4   410.811741
5   359.456163
6   408.502087
7   460.712328
8   519.949964
9   393.403938
10  395.273967
11  482.155974
12  491.520271
13  388.439233
14  486.244970
15  462.483915
16  473.742402
17  424.524966
18  399.017911
19  566.869918
20  372.575870
21  424.497308
22  322.607357
23  437.967253
24  439.001893
25  400.337373
26  456.735136
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
And the grouped results

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   Day  Hour  Organ  VegetationType      Area    par Eabs      par Ei
0  264    15      0               0  4.845914  382.756535  450.301806
1  264    15      1               0  3.640534  394.037183  463.573157
2  264    15      2               0  1.486650  356.659092  419.598932
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
With RATP, you have another output for each voxel

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{scene} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+m+mi}{0}\PYG{p}{:} \PYG{n}{triangles1}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{:} \PYG{n}{triangles2}\PYG{p}{,} \PYG{l+m+mi}{2}\PYG{p}{:} \PYG{n}{triangles3}\PYG{p}{\PYGZcb{}}

\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{scene}\PYG{p}{]} \PYG{p}{\PYGZcb{}}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{triangles\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
    Triangle  Organ  Voxel  VegetationType  primitive\_area    Day  Hour  Nx  \textbackslash{}
0          0      0    1.0               1        0.347893  264.0  15.0   1
1          1      0    1.0               1        0.230175  264.0  15.0   1
2          2      0    1.0               1        0.236752  264.0  15.0   1
3          3      0    1.0               1        0.055911  264.0  15.0   1
4          4      0    1.0               1        2.047361  264.0  15.0   1
5          5      0    1.0               1        0.132022  264.0  15.0   1
6          6      0    1.0               1        0.179736  264.0  15.0   1
7          7      0    1.0               1        0.353962  264.0  15.0   1
8          8      0    1.0               1        1.065609  264.0  15.0   1
9          9      0    1.0               1        0.196493  264.0  15.0   1
10        10      1    1.0               1        0.014315  264.0  15.0   1
11        11      1    1.0               1        0.047547  264.0  15.0   1
12        12      1    1.0               1        0.932423  264.0  15.0   1
13        13      1    1.0               1        0.078560  264.0  15.0   1
14        14      1    1.0               1        0.037776  264.0  15.0   1
15        15      1    1.0               1        1.845328  264.0  15.0   1
16        16      1    1.0               1        0.212917  264.0  15.0   1
17        17      1    1.0               1        0.367550  264.0  15.0   1
18        18      1    1.0               1        0.104118  264.0  15.0   1
19        19      2    1.0               1        0.051821  264.0  15.0   1
20        20      2    1.0               1        0.172513  264.0  15.0   1
21        21      2    1.0               1        0.274700  264.0  15.0   1
22        22      2    1.0               1        0.150917  264.0  15.0   1
23        23      2    1.0               1        0.028843  264.0  15.0   1
24        24      2    1.0               1        0.643578  264.0  15.0   1
25        25      2    1.0               1        0.094779  264.0  15.0   1
26        26      2    1.0               1        0.069499  264.0  15.0   1

    Ny  Nz   ShadedPAR   SunlitPAR  ShadedArea  SunlitArea      Area  \textbackslash{}
0    1   1  363.182404  461.736481    0.416941    9.556157  9.973098
1    1   1  363.182404  461.736481    0.416941    9.556157  9.973098
2    1   1  363.182404  461.736481    0.416941    9.556157  9.973098
3    1   1  363.182404  461.736481    0.416941    9.556157  9.973098
4    1   1  363.182404  461.736481    0.416941    9.556157  9.973098
5    1   1  363.182404  461.736481    0.416941    9.556157  9.973098
6    1   1  363.182404  461.736481    0.416941    9.556157  9.973098
7    1   1  363.182404  461.736481    0.416941    9.556157  9.973098
8    1   1  363.182404  461.736481    0.416941    9.556157  9.973098
9    1   1  363.182404  461.736481    0.416941    9.556157  9.973098
10   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
11   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
12   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
13   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
14   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
15   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
16   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
17   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
18   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
19   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
20   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
21   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
22   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
23   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
24   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
25   1   1  363.182404  461.736481    0.416941    9.556157  9.973098
26   1   1  363.182404  461.736481    0.416941    9.556157  9.973098

          PARa  Intercepted  Transmitted
0   457.616241     9.127703    44.626312
1   457.616241     9.127703    44.626312
2   457.616241     9.127703    44.626312
3   457.616241     9.127703    44.626312
4   457.616241     9.127703    44.626312
5   457.616241     9.127703    44.626312
6   457.616241     9.127703    44.626312
7   457.616241     9.127703    44.626312
8   457.616241     9.127703    44.626312
9   457.616241     9.127703    44.626312
10  457.616241     9.127703    44.626312
11  457.616241     9.127703    44.626312
12  457.616241     9.127703    44.626312
13  457.616241     9.127703    44.626312
14  457.616241     9.127703    44.626312
15  457.616241     9.127703    44.626312
16  457.616241     9.127703    44.626312
17  457.616241     9.127703    44.626312
18  457.616241     9.127703    44.626312
19  457.616241     9.127703    44.626312
20  457.616241     9.127703    44.626312
21  457.616241     9.127703    44.626312
22  457.616241     9.127703    44.626312
23  457.616241     9.127703    44.626312
24  457.616241     9.127703    44.626312
25  457.616241     9.127703    44.626312
26  457.616241     9.127703    44.626312
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{voxels\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
   VegetationType    Day  Hour  Voxel  Nx  Ny  Nz   ShadedPAR   SunlitPAR  \textbackslash{}
0             1.0  264.0  15.0    1.0   1   1   1  363.182404  461.736481

   ShadedArea  SunlitArea      Area        PARa  Intercepted  Transmitted
0    0.416941    9.556157  9.973098  457.616241     9.127703    44.626312
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[12]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
     Day  Hour  Organ  VegetationType      Area        PARa  Intercepted  \textbackslash{}
0  264.0  15.0      0               1  4.845914  457.616241     9.127703
1  264.0  15.0      1               1  3.640534  457.616241     9.127703
2  264.0  15.0      2               1  1.486650  457.616241     9.127703

   Transmitted   SunlitPAR  SunlitArea   ShadedPAR  ShadedArea
0     9.127703  461.736481    9.556157  363.182404    0.416941
1     9.127703  461.736481    9.556157  363.182404    0.416941
2     9.127703  461.736481    9.556157  363.182404    0.416941
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{l\sphinxhyphen{}egume results transfer}
\label{\detokenize{outputs_and_plantmodels_transfer:l-egume-results-transfer}}
\sphinxAtStartPar
There are two possible scenarios: \sphinxhyphen{} with RATP, the tool reformats the data types. Grid specifications must match with l\sphinxhyphen{}egume internal grid instance \sphinxhyphen{} with CARIBU, you need to use virtual sensors following the dimensions of l\sphinxhyphen{}egume internal grid.

\sphinxAtStartPar
The id argument is used with you several input scenes but you need to transfer only some of them to your l\sphinxhyphen{}egume instance.

\sphinxAtStartPar
In both case, it will return two tables, one with intercepted lighting and another with transmitted lighting in each voxel.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} grid dimensions}
\PYG{n}{dxyz} \PYG{o}{=} \PYG{p}{[}\PYG{l+m+mf}{1.}\PYG{p}{]} \PYG{o}{*} \PYG{l+m+mi}{3}
\PYG{n}{nxyz} \PYG{o}{=} \PYG{p}{[}\PYG{l+m+mi}{7}\PYG{p}{,} \PYG{l+m+mi}{7}\PYG{p}{,} \PYG{l+m+mi}{7}\PYG{p}{]}
\PYG{n}{orig} \PYG{o}{=} \PYG{p}{[}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{]}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{spheresize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.3}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} vertices of triangles are the sphere surface}
\PYG{n}{worldsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{5.}\PYG{p}{)}

\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{10}
\PYG{n}{triangles1} \PYG{o}{=} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{n}{worldsize}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{]}

\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{9}
\PYG{n}{triangles2} \PYG{o}{=} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{n}{worldsize}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{]}

\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{8}
\PYG{n}{triangles3} \PYG{o}{=} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{n}{worldsize}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{]}

\PYG{n}{scene} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+m+mi}{0}\PYG{p}{:} \PYG{n}{triangles1}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{:} \PYG{n}{triangles2}\PYG{p}{,} \PYG{l+m+mi}{2}\PYG{p}{:} \PYG{n}{triangles3}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{RATP}
\label{\detokenize{outputs_and_plantmodels_transfer:RATP}}
\sphinxAtStartPar
Input: l\sphinxhyphen{}egume intern grid of leaf area

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[15]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{ratp\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{dxyz}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{orig}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{number voxels}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{nxyz}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{full grid}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{k+kc}{True}\PYG{p}{\PYGZcb{}}

\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{scene}\PYG{p}{]} \PYG{p}{\PYGZcb{}}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{n}{printtriangles}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'Eo1pXjKQFbVhh6Ksf54Ry6k6D', 'data': b'x\textbackslash{}xda\textbackslash{}x8d\}\textbackslash{}x0b\textbackslash{}x94\textbackslash{}xadEuf+…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[17]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{numpy}

\PYG{n}{m\PYGZus{}lais} \PYG{o}{=} \PYG{n}{numpy}\PYG{o}{.}\PYG{n}{zeros}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{+} \PYG{n}{nxyz}\PYG{p}{)}

\PYG{k}{for} \PYG{n}{row} \PYG{o+ow}{in} \PYG{n}{lighting}\PYG{o}{.}\PYG{n}{voxels\PYGZus{}outputs}\PYG{o}{.}\PYG{n}{itertuples}\PYG{p}{(}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{m\PYGZus{}lais}\PYG{p}{[}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{row}\PYG{o}{.}\PYG{n}{VegetationType}\PYG{p}{)}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{[}\PYG{n}{row}\PYG{o}{.}\PYG{n}{Nz}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{[}\PYG{n}{row}\PYG{o}{.}\PYG{n}{Nx}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]}\PYG{p}{[}\PYG{n}{row}\PYG{o}{.}\PYG{n}{Ny}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{=} \PYG{n}{row}\PYG{o}{.}\PYG{n}{Area}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[18]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{res\PYGZus{}abs\PYGZus{}i}\PYG{p}{,} \PYG{n}{res\PYGZus{}trans} \PYG{o}{=} \PYG{n}{lighting}\PYG{o}{.}\PYG{n}{to\PYGZus{}l\PYGZus{}egume}\PYG{p}{(}\PYG{n}{m\PYGZus{}lais}\PYG{o}{=}\PYG{n}{m\PYGZus{}lais}\PYG{p}{)}

\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PARa intercepted}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{res\PYGZus{}abs\PYGZus{}i}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PARa transmitted}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{res\PYGZus{}trans}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
PARa intercepted
[[[[1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]]

  [[1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 4.89933714e-02 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 2.93938100e-01 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 2.57237822e-01
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]]

  [[1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 3.80286694e-01 8.93628836e-01
    6.55927658e-01 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.29318118e-01 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 5.11650145e-01
    3.74495775e-01 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]]

  [[1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 5.34315050e-01 1.00000000e-14
    4.15218249e-02 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    4.28144723e-01 5.49222976e-02 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 2.89329551e-02]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]]

  [[1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.69486284e-01 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 8.16469371e-01 1.00000000e-14
    1.00000000e-14 6.63995743e-02 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]]

  [[1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 2.14309216e-01 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 2.51297981e-01 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 6.85566485e-01
    1.00000000e-14 1.11084175e+00 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]]

  [[1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.67224873e-02 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]
   [1.00000000e-14 1.00000000e-14 1.00000000e-14 1.00000000e-14
    1.00000000e-14 1.00000000e-14 1.00000000e-14]]]]


PARa transmitted
[[[1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]]

 [[1.         0.99966007 0.99862611 0.99862772 0.99882162 1.
   1.        ]
  [0.99937242 0.99652928 0.99643964 0.99913657 0.99951363 0.99987358
   0.9998582 ]
  [0.99661541 0.9750672  0.97824836 0.99296302 0.99881232 0.99979579
   0.9996115 ]
  [0.9968856  0.98334223 0.88385904 0.97908282 0.99741894 0.99954569
   0.99927342]
  [0.99909747 0.99502355 0.98070908 0.97873741 0.99385464 0.99878031
   1.        ]
  [0.99955082 0.99661982 0.98586112 0.89782482 0.98341918 0.99853724
   0.99973792]
  [1.         0.99890536 0.99653733 0.98721927 0.99558949 0.99994254
   0.99992949]]

 [[0.99485987 0.98211366 0.94685709 0.90895796 0.92835289 0.9768011
   0.99335617]
  [0.98958224 0.95989323 0.78321606 0.59019464 0.68427098 0.94649696
   0.98931742]
  [0.99396461 0.97352087 0.89230376 0.90797049 0.93556297 0.97943383
   0.99502289]
  [0.99184281 0.98125339 0.94494903 0.93165594 0.95026821 0.98223406
   0.99335128]
  [0.98969823 0.9849447  0.95014137 0.76321989 0.81169522 0.96606922
   0.98965567]
  [0.99407554 0.99231446 0.976399   0.93636918 0.95371062 0.98325461
   0.99324131]
  [0.99734932 0.99393582 0.9833504  0.97493804 0.9806965  0.99197996
   0.9983626 ]]

 [[0.98496985 0.96739489 0.9302929  0.89807343 0.9174937  0.95895547
   0.98020232]
  [0.98125023 0.94733357 0.86565912 0.84225869 0.8774448  0.95282722
   0.98152596]
  [0.97424239 0.93394589 0.72031593 0.88447887 0.90997893 0.9595657
   0.9761579 ]
  [0.97994757 0.96309948 0.90736842 0.8934654  0.89512074 0.94767475
   0.97867441]
  [0.98629206 0.97525859 0.95201224 0.88435513 0.7504518  0.91819239
   0.98110867]
  [0.98893738 0.98108053 0.96626729 0.94061965 0.93254912 0.95972735
   0.97235537]
  [0.98517865 0.97681737 0.96344769 0.95575136 0.95711577 0.96942037
   0.9815892 ]]

 [[0.97933716 0.97092551 0.94165611 0.94100547 0.94331664 0.95525873
   0.97785884]
  [0.97096044 0.94943368 0.91685653 0.90953714 0.91383499 0.89041752
   0.96821451]
  [0.9826436  0.95704621 0.91028017 0.92085916 0.93676978 0.95857286
   0.97805393]
  [0.97259653 0.94509262 0.87017393 0.89592469 0.91131461 0.94362009
   0.96967971]
  [0.98114228 0.93692589 0.66466349 0.88666028 0.9184655  0.92707497
   0.97069734]
  [0.97923797 0.97428864 0.9446348  0.95074368 0.95068192 0.96627277
   0.9782179 ]
  [0.98016465 0.97797263 0.95464146 0.94952333 0.94629568 0.97018468
   0.980313  ]]

 [[0.95296037 0.95422834 0.94934404 0.93673187 0.93656844 0.93842596
   0.94804531]
  [0.97229284 0.96320361 0.9393397  0.92389566 0.92137164 0.87234128
   0.95597047]
  [0.96675485 0.94391161 0.90375632 0.92214018 0.92659348 0.92107111
   0.96080649]
  [0.95322537 0.92634034 0.80349278 0.84525293 0.90094328 0.86473721
   0.93806767]
  [0.96127474 0.93329871 0.8198998  0.64854169 0.81475776 0.55683774
   0.90463072]
  [0.98215431 0.96413124 0.91450155 0.88721132 0.9184497  0.89321476
   0.96541333]
  [0.98092657 0.96966964 0.9389317  0.95247173 0.94251043 0.95123148
   0.96945715]]

 [[0.94756877 0.95514208 0.94929218 0.94613492 0.92572314 0.9404825
   0.93554872]
  [0.97161055 0.95421797 0.92918479 0.93547511 0.92323899 0.93136919
   0.94081557]
  [0.94040775 0.94937837 0.93365628 0.92724371 0.91473806 0.9428041
   0.93166846]
  [0.94083965 0.92754972 0.9003523  0.89309627 0.89577699 0.90264505
   0.92660093]
  [0.94083911 0.92529798 0.88156152 0.84460795 0.84956956 0.85377795
   0.90978062]
  [0.93541592 0.93342227 0.9089222  0.90135753 0.88972384 0.89331508
   0.92612672]
  [0.96249211 0.96975094 0.94652379 0.9468134  0.93272442 0.94823855
   0.95390475]]]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{CARIBU}
\label{\detokenize{outputs_and_plantmodels_transfer:CARIBU}}
\sphinxAtStartPar
Input: l\sphinxhyphen{}egume intern grid of leaf area

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[19]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{caribu\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sensors}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{dxyz}\PYG{p}{,} \PYG{n}{nxyz}\PYG{p}{,} \PYG{n}{orig}\PYG{p}{]} \PYG{p}{\PYGZcb{}}

\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{caribu\PYGZus{}args}\PYG{p}{,} \PYG{n}{environment}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infinite}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{k+kc}{True}\PYG{p}{\PYGZcb{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{scene}\PYG{p}{]} \PYG{p}{\PYGZcb{}}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[20]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}sensors}\PYG{p}{(}\PYG{n}{light}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)} \PYG{o}{+} \PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[20]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'wJZ83l0BmoFl6R5sdBeyGBiUB', 'data': b'x\textbackslash{}xda\textbackslash{}x8d\textbackslash{}x9d\textbackslash{}r\textbackslash{}xbcUE\textbackslash{}xb9\textbackslash{}…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[21]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} plant parameters, those variables are part of l\PYGZhy{}egume, here is a simplified version for our example}
\PYG{n}{list\PYGZus{}invar} \PYG{o}{=} \PYG{p}{[}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Hplante}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{l+m+mf}{0.0}\PYG{p}{]} \PYG{o}{*} \PYG{l+m+mi}{2}\PYG{p}{\PYGZcb{}}\PYG{p}{]}
\PYG{n}{list\PYGZus{}lstring} \PYG{o}{=} \PYG{p}{[}
    \PYG{p}{\PYGZob{}}
        \PYG{l+m+mi}{0}\PYG{p}{:} \PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dev}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+m+mi}{1}\PYG{p}{:} \PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sen}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+m+mi}{2}\PYG{p}{:} \PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dev}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
    \PYG{p}{\PYGZcb{}}
\PYG{p}{]}
\PYG{n}{list\PYGZus{}dicFeuilBilanR} \PYG{o}{=} \PYG{p}{[}
    \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{surf}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{l+m+mf}{0.5}\PYG{p}{,} \PYG{l+m+mf}{1e\PYGZhy{}8}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{]}

\PYG{k+kn}{import} \PYG{n+nn}{numpy}

\PYG{n}{m\PYGZus{}lais} \PYG{o}{=} \PYG{n}{numpy}\PYG{o}{.}\PYG{n}{zeros}\PYG{p}{(}\PYG{p}{[}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{o}{+} \PYG{n}{nxyz}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[22]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{res\PYGZus{}trans} \PYG{o}{=} \PYG{n}{lighting}\PYG{o}{.}\PYG{n}{to\PYGZus{}l\PYGZus{}egume}\PYG{p}{(}\PYG{n}{m\PYGZus{}lais}\PYG{o}{=}\PYG{n}{m\PYGZus{}lais}\PYG{p}{,}
                                \PYG{n}{list\PYGZus{}lstring}\PYG{o}{=}\PYG{n}{list\PYGZus{}lstring}\PYG{p}{,}
                                \PYG{n}{list\PYGZus{}dicFeuilBilanR}\PYG{o}{=}\PYG{n}{list\PYGZus{}dicFeuilBilanR}\PYG{p}{,}
                                \PYG{n}{list\PYGZus{}invar}\PYG{o}{=}\PYG{n}{list\PYGZus{}invar}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PARa transmitted}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{res\PYGZus{}trans}\PYG{p}{)}

\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PARa absorbed per plant}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{list\PYGZus{}invar}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
PARa transmitted
[[[1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]
  [1.         1.         1.         1.         1.         1.
   1.        ]]

 [[0.99283465 0.97547655 0.97996241 0.9866237  0.9583532  0.95865713
   0.98694664]
  [0.97774844 0.96530949 0.97812413 0.94335656 0.79359731 0.8288275
   0.97984945]
  [0.95961262 0.96250934 0.97278397 0.91272267 0.7382741  0.79477271
   0.98515375]
  [0.97219276 0.97383604 0.95889506 0.92757533 0.87868432 0.9093107
   0.98973258]
  [0.99499098 0.99379047 0.97594497 0.96094415 0.9626287  0.97785097
   0.9939268 ]
  [0.99696075 0.99603476 0.99520086 0.98950364 0.98841795 0.99438669
   0.99632086]
  [0.99607408 0.99632587 0.99635674 0.99631713 0.99698258 0.99689147
   0.99685284]]

 [[0.97470511 0.94514069 0.93077744 0.93920035 0.9329825  0.92910817
   0.9597604 ]
  [0.93902562 0.84260595 0.83278455 0.88433881 0.86394577 0.88136
   0.94917899]
  [0.92365243 0.80240585 0.77352939 0.81993138 0.7911815  0.84628719
   0.94733873]
  [0.96214209 0.90668456 0.86337504 0.83267538 0.8023391  0.87666842
   0.95844153]
  [0.98205481 0.97935428 0.96394767 0.92029812 0.90199128 0.9400237
   0.97286147]
  [0.98656516 0.98394133 0.96488209 0.9617456  0.97551971 0.97480579
   0.97693207]
  [0.98860163 0.97982773 0.96375513 0.97078053 0.97175977 0.94172195
   0.95478506]]

 [[0.95701018 0.92543249 0.91452955 0.91529581 0.90796187 0.92735326
   0.96004947]
  [0.92750482 0.87879103 0.87139533 0.88794122 0.88021506 0.90711292
   0.94913605]
  [0.91243229 0.85247416 0.84137598 0.83055153 0.82787463 0.8959008
   0.94203007]
  [0.91033121 0.84517546 0.82532049 0.79060523 0.80545506 0.89567693
   0.91514608]
  [0.93257741 0.86079298 0.8449184  0.8523624  0.87150218 0.91578729
   0.9013189 ]
  [0.96779888 0.93102995 0.91071792 0.92115358 0.933688   0.94220112
   0.93189039]
  [0.97735824 0.96935045 0.93242933 0.91134405 0.94099756 0.959761
   0.95889625]]

 [[0.92296813 0.90516463 0.90284731 0.91447234 0.87371474 0.88073977
   0.93560093]
  [0.88270877 0.88940347 0.85396849 0.85397283 0.84917024 0.87384279
   0.91539319]
  [0.87898549 0.8856543  0.83203816 0.82884733 0.86532201 0.89502837
   0.90832493]
  [0.88237416 0.84629472 0.83386876 0.83964468 0.85864715 0.90311898
   0.92454761]
  [0.89126296 0.83400359 0.8388134  0.86334547 0.86850161 0.9055682
   0.93470077]
  [0.92007599 0.8866167  0.88060342 0.90901959 0.91319735 0.91664405
   0.93776939]
  [0.93967084 0.9347306  0.92625581 0.93690253 0.94524498 0.94220458
   0.9435016 ]]

 [[0.85841022 0.74993594 0.76130349 0.85284938 0.86431234 0.87480163
   0.90179267]
  [0.86526185 0.74226062 0.75591914 0.85134443 0.83492443 0.83171408
   0.88010129]
  [0.86923228 0.77258171 0.7676997  0.8318704  0.83804378 0.85347289
   0.87805225]
  [0.87857998 0.816706   0.79000755 0.82842821 0.8698445  0.89948354
   0.90035524]
  [0.89811456 0.86396829 0.85201001 0.87253328 0.90782969 0.91597453
   0.9044806 ]
  [0.92190268 0.89046769 0.8868083  0.91020047 0.92585094 0.88768819
   0.87828466]
  [0.89487078 0.8693884  0.85757664 0.86653003 0.90359564 0.88007679
   0.87716112]]

 [[0.85301056 0.8414348  0.8673805  0.88293181 0.85568144 0.8688417
   0.88986585]
  [0.84806958 0.8108317  0.82544714 0.84720828 0.86359825 0.88581908
   0.90040623]
  [0.85604356 0.81045805 0.8047335  0.83012291 0.86524461 0.89470453
   0.87592102]
  [0.85554426 0.81356764 0.79736908 0.80259271 0.83525448 0.8843983
   0.85818303]
  [0.86421433 0.81436691 0.80029539 0.79579841 0.819411   0.86965378
   0.88410009]
  [0.88160032 0.85434114 0.81889592 0.80924773 0.85369548 0.88390842
   0.9028424 ]
  [0.89895522 0.86912624 0.83433478 0.82886494 0.87638531 0.8954713
   0.89080121]]]


PARa absorbed per plant
[\{'Hplante': [0.0, 0.0], 'parap': array([122.57339982, 154.20674688]), 'parip': array([235.25554024, 154.20674688])\}]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{CN\sphinxhyphen{}Wheat results transfer}
\label{\detokenize{outputs_and_plantmodels_transfer:CN-Wheat-results-transfer}}
\sphinxAtStartPar
The method \sphinxcode{\sphinxupquote{to\_MTG}} is used to transfer results to Cn\sphinxhyphen{}Wheat through a MTG object with the properties \sphinxcode{\sphinxupquote{"PARa"}} and \sphinxcode{\sphinxupquote{"Erel"}}. The \sphinxcode{\sphinxupquote{id}} argument is used with you several input scenes but you need to transfer only some of them to your MTG instance.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[23]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} load a MTG instance}
\PYG{k+kn}{import} \PYG{n+nn}{os}
\PYG{k+kn}{from} \PYG{n+nn}{alinea}\PYG{n+nn}{.}\PYG{n+nn}{adel}\PYG{n+nn}{.}\PYG{n+nn}{adel\PYGZus{}dynamic} \PYG{k+kn}{import} \PYG{n}{AdelDyn}
\PYG{k+kn}{from} \PYG{n+nn}{alinea}\PYG{n+nn}{.}\PYG{n+nn}{adel}\PYG{n+nn}{.}\PYG{n+nn}{echap\PYGZus{}leaf} \PYG{k+kn}{import} \PYG{n}{echap\PYGZus{}leaves}

\PYG{n}{INPUTS\PYGZus{}DIRPATH} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{data}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{adel\PYGZus{}wheat} \PYG{o}{=} \PYG{n}{AdelDyn}\PYG{p}{(}\PYG{n}{seed}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,} \PYG{n}{scene\PYGZus{}unit}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{m}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{leaves}\PYG{o}{=}\PYG{n}{echap\PYGZus{}leaves}\PYG{p}{(}\PYG{n}{xy\PYGZus{}model}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Soissons\PYGZus{}byleafclass}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\PYG{n}{g} \PYG{o}{=} \PYG{n}{adel\PYGZus{}wheat}\PYG{o}{.}\PYG{n}{load}\PYG{p}{(}\PYG{n+nb}{dir}\PYG{o}{=}\PYG{n}{INPUTS\PYGZus{}DIRPATH}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[24]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{g}\PYG{p}{]} \PYG{p}{\PYGZcb{}}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[25]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{to\PYGZus{}MTG}\PYG{p}{(}\PYG{n}{mtg}\PYG{o}{=}\PYG{n}{g}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{g}\PYG{o}{.}\PYG{n}{property}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PARa}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{g}\PYG{o}{.}\PYG{n}{property}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Erel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\{19: 183.28839878423275, 34: 88.59510772768847, 813: 458.96763725505764, 814: 392.72942554102866, 51: 350.64417693430573\}
\{19: 0.3665767975684655, 34: 0.17719021545537694, 813: 0.9179352745101153, 814: 0.7854588510820574, 51: 0.7012883538686114\}
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[26]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{g}\PYG{p}{]} \PYG{p}{\PYGZcb{}}\PYG{p}{)}

\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[27]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{to\PYGZus{}MTG}\PYG{p}{(}\PYG{n}{mtg}\PYG{o}{=}\PYG{n}{g}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{g}\PYG{o}{.}\PYG{n}{property}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PARa}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{g}\PYG{o}{.}\PYG{n}{property}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Erel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\{19: 468.0222778320313, 34: 468.02227783203136, 813: 468.0222778320312, 814: 473.66244791932104, 51: 468.02227783203125\}
\{19: 0.0007445579394698143, 34: 0.0007445579394698143, 813: 0.0007445579394698141, 814: 0.00030915768207336026, 51: 0.0007445579394698143\}
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxstepscope


\subsection{Example of use}
\label{\detokenize{example_canopy:Example-of-use}}\label{\detokenize{example_canopy::doc}}
\sphinxAtStartPar
Here is an example with a more “realistic” canopy. We start from a single fescue and alfafa stored in \sphinxcode{\sphinxupquote{.bgeom}} files, then we will generate copies in random positions, in order to make a canopy.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[1]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{os}
\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{LVM} \PYG{k+kn}{import} \PYG{n}{LightVegeManager}
\PYG{k+kn}{from} \PYG{n+nn}{pgljupyter} \PYG{k+kn}{import} \PYG{n}{SceneWidget}
\PYG{k+kn}{from} \PYG{n+nn}{openalea}\PYG{n+nn}{.}\PYG{n+nn}{plantgl}\PYG{n+nn}{.}\PYG{n+nn}{all} \PYG{k+kn}{import} \PYG{n}{Scene}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Canopy generation}
\label{\detokenize{example_canopy:Canopy-generation}}
\sphinxAtStartPar
Load the \sphinxcode{\sphinxupquote{.bgeom}} files

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{fet\PYGZus{}fgeom} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{data}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Fet\PYGZhy{}LD\PYGZhy{}F2.bgeom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{luz\PYGZus{}fgeom} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{data}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{LD\PYGZhy{}F1.bgeom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{bgeom\PYGZus{}files} \PYG{o}{=} \PYG{p}{[}\PYG{n}{fet\PYGZus{}fgeom}\PYG{p}{,} \PYG{n}{luz\PYGZus{}fgeom}\PYG{p}{]}
\PYG{n}{bgeom\PYGZus{}files}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}['C:\textbackslash{}\textbackslash{}Users\textbackslash{}\textbackslash{}mwoussen\textbackslash{}\textbackslash{}cdd\textbackslash{}\textbackslash{}codes\textbackslash{}\textbackslash{}dev\textbackslash{}\textbackslash{}lightvegemanager\textbackslash{}\textbackslash{}data\textbackslash{}\textbackslash{}Fet-LD-F2.bgeom',
 'C:\textbackslash{}\textbackslash{}Users\textbackslash{}\textbackslash{}mwoussen\textbackslash{}\textbackslash{}cdd\textbackslash{}\textbackslash{}codes\textbackslash{}\textbackslash{}dev\textbackslash{}\textbackslash{}lightvegemanager\textbackslash{}\textbackslash{}data\textbackslash{}\textbackslash{}LD-F1.bgeom']
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
Generate copies in random position

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{trianglesmesh} \PYG{k+kn}{import} \PYG{n}{create\PYGZus{}heterogeneous\PYGZus{}canopy}

\PYG{c+c1}{\PYGZsh{} scene generation parameters}
\PYG{n}{nplants} \PYG{o}{=} \PYG{l+m+mi}{50}
\PYG{n}{plant\PYGZus{}density}\PYG{o}{=}\PYG{l+m+mi}{130}
\PYG{n}{var\PYGZus{}plant\PYGZus{}position}\PYG{o}{=}\PYG{l+m+mi}{110}

\PYG{c+c1}{\PYGZsh{} generate random canopy from plant examples}
\PYG{k}{if} \PYG{o+ow}{not} \PYG{n+nb}{isinstance}\PYG{p}{(}\PYG{n}{bgeom\PYGZus{}files}\PYG{p}{,} \PYG{n+nb}{list}\PYG{p}{)}\PYG{p}{:} \PYG{n}{bgeom\PYGZus{}files} \PYG{o}{=} \PYG{p}{[}\PYG{n}{bgeom\PYGZus{}files}\PYG{p}{]}
\PYG{n}{scenes} \PYG{o}{=} \PYG{p}{[}\PYG{p}{]}
\PYG{k}{for} \PYG{n}{f} \PYG{o+ow}{in} \PYG{n}{bgeom\PYGZus{}files} \PYG{p}{:}
    \PYG{n}{plant\PYGZus{}scene} \PYG{o}{=} \PYG{n}{Scene}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{plant\PYGZus{}scene}\PYG{o}{.}\PYG{n}{read}\PYG{p}{(}\PYG{n}{f}\PYG{p}{,} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{BGEOM}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}

    \PYG{c+c1}{\PYGZsh{} multiply a plant with variations}
    \PYG{n}{canopy}\PYG{p}{,} \PYG{n}{domain} \PYG{o}{=} \PYG{n}{create\PYGZus{}heterogeneous\PYGZus{}canopy}\PYG{p}{(}\PYG{n}{plant\PYGZus{}scene}\PYG{p}{,}
                                                 \PYG{n}{nplants}\PYG{o}{=}\PYG{n}{nplants}\PYG{p}{,}
                                                 \PYG{n}{plant\PYGZus{}density}\PYG{o}{=}\PYG{n}{plant\PYGZus{}density}\PYG{p}{,}
                                                 \PYG{n}{var\PYGZus{}plant\PYGZus{}position}\PYG{o}{=}\PYG{n}{var\PYGZus{}plant\PYGZus{}position}\PYG{p}{)}

    \PYG{n}{scenes}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{n}{canopy}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Lighting simulation}
\label{\detokenize{example_canopy:Lighting-simulation}}
\sphinxAtStartPar
Set simulation parameters

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} setup environment}
\PYG{n}{environment} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{l+m+mf}{48.8} \PYG{p}{,}\PYG{l+m+mf}{2.3} \PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{]} \PYG{c+c1}{\PYGZsh{} latitude, longitude, timezone}

\PYG{c+c1}{\PYGZsh{} we compute only sun light in an infinite scene}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{diffus}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{direct}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{True}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflected}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infinite}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{True}

\PYG{c+c1}{\PYGZsh{} CARIBU parameters}
\PYG{n}{caribu\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{par}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{(}\PYG{l+m+mf}{0.10}\PYG{p}{,} \PYG{l+m+mf}{0.05}\PYG{p}{)} \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} inputs values for lighting}
\PYG{n}{energy}\PYG{o}{=}\PYG{l+m+mi}{500}
\PYG{n}{day}\PYG{o}{=}\PYG{l+m+mi}{264}
\PYG{n}{hour}\PYG{o}{=}\PYG{l+m+mi}{15}

\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxAtStartPar
Run the simulation

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[5]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} Initializing the tool}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                                \PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{,}
                                \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{)}



\PYG{c+c1}{\PYGZsh{} build the scene}
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{scenes} \PYG{p}{\PYGZcb{}}

\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} compute lighting}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} print results gathered by elements (Shapes in the plantGL Scene)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
     Day  Hour      Organ  VegetationType       Area    par Eabs      par Ei
0    264    15  825510368               0  83.332180   76.246899   89.702234
1    264    15  825501440               0  75.958035  212.034963  249.452897
2    264    15  825503168               0   4.520565  108.134153  127.216650
3    264    15  825503824               0  57.771363   79.214402   93.193414
4    264    15  825498448               0   5.711880   97.236152  114.395473
..   {\ldots}   {\ldots}        {\ldots}             {\ldots}        {\ldots}         {\ldots}         {\ldots}
321  264    15  825485200               1   2.625990  287.633701  338.392589
322  264    15  825485904               1  18.000312   82.696127   97.289562
323  264    15  825486976               1  12.152513   78.609077   92.481268
324  264    15  825488784               1   9.200676  519.140172  610.753143
325  264    15  825489120               1   9.200676  424.977325  499.973324

[326 rows x 7 columns]
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} visualisation}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{n}{printtriangles}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{100}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'iscrYkj7jZcxvvYDWDY2BWYsh', 'data': b'x\textbackslash{}xda\textbackslash{}x94\textbackslash{}x9d\textbackslash{}t|eE\textbackslash{}x95\textbackslash{}xff…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxstepscope


\subsection{Misc functionnalities}
\label{\detokenize{misc_functionnalities:Misc-functionnalities}}\label{\detokenize{misc_functionnalities::doc}}

\subsubsection{Content}
\label{\detokenize{misc_functionnalities:Content}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Subdivision of all triangles in the scene

\item {} 
\sphinxAtStartPar
Visualisation with VTK

\item {} 
\sphinxAtStartPar
External tools for analysing leaf angle distribution from a mesh

\end{itemize}


\subsubsection{Introduction}
\label{\detokenize{misc_functionnalities:Introduction}}
\sphinxAtStartPar
We provide more useful tools to help the lighting management

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[1]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{os}
\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{LVM} \PYG{k+kn}{import} \PYG{n}{LightVegeManager}
\PYG{k+kn}{from} \PYG{n+nn}{pgljupyter} \PYG{k+kn}{import} \PYG{n}{SceneWidget}
\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{trianglesmesh} \PYG{k+kn}{import} \PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Simple mesh subdivision}
\label{\detokenize{misc_functionnalities:Simple-mesh-subdivision}}
\sphinxAtStartPar
If you want to refine the shadowing process in your mesh, you can subdivide all triangles.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} random triangles}
\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{50}
\PYG{n}{spheresize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.3}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} vertices of triangles are the sphere surface}
\PYG{n}{worldsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{5.}\PYG{p}{)}
\PYG{n}{triangles} \PYG{o}{=} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{n}{worldsize}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{]}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'O9xJcnvhQDpm2yuSozG1BZUoe', 'data': b'x\textbackslash{}xda\textbackslash{}x8d\textbackslash{}x99yXUU\textbackslash{}x17\textbackslash{}xc6/…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{global\PYGZus{}scene\PYGZus{}tesselate\PYGZus{}level} \PYG{o}{=} \PYG{l+m+mi}{5}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{,} \PYG{n}{global\PYGZus{}scene\PYGZus{}tesselate\PYGZus{}level}\PYG{o}{=}\PYG{n}{global\PYGZus{}scene\PYGZus{}tesselate\PYGZus{}level}\PYG{p}{)}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.5}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[4]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, scenes=[\{'id': 'LgksLWwDW2DzGMUPPzSXEoOnw', 'data': b'x\textbackslash{}xda\textbackslash{}x94]\textbackslash{}x07x]\textbackslash{}xc5\textbackslash{}xb16\textbackslash{}…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Visualisation with VTK}
\label{\detokenize{misc_functionnalities:Visualisation-with-VTK}}
\sphinxAtStartPar
PlantGL offers a good first approach to visualizing scene geometry, but software such as Paraview can take this visualization even further. LightVegeManager lets you export the scene in VTK format for further processing in ParaView.

\sphinxAtStartPar
\sphinxincludegraphics[width=1920\sphinxpxdimen,height=1017\sphinxpxdimen]{{ed76bd6963031cf4ae4824728eb3b5276f66789d}.png}

\sphinxAtStartPar
There are three method to export VTK files: \sphinxhyphen{} \sphinxcode{\sphinxupquote{VTK\_nolight}}: exports only the geometric information, organ ID and specy ID \sphinxhyphen{} \sphinxcode{\sphinxupquote{VTK\_light}}: adds all the information about the scene’s sunlight \sphinxhyphen{} \sphinxcode{\sphinxupquote{VTK\_sun}}: exports sun direction of the current iteration


\paragraph{Triangles exportation}
\label{\detokenize{misc_functionnalities:Triangles-exportation}}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{pathfile} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{random\PYGZus{}scene}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[12]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{VTK\PYGZus{}nolight}\PYG{p}{(}\PYG{n}{pathfile}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{VTK\PYGZus{}light}\PYG{p}{(}\PYG{n}{pathfile}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{Voxels exportation}
\label{\detokenize{misc_functionnalities:Voxels-exportation}}
\sphinxAtStartPar
If you use voxels grid, you exports them too. In our example, it will exports the triangles mesh and the voxels mesh specified in the inputs.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[15]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{ratp\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{]} \PYG{p}{\PYGZcb{}}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{pathfile} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{random\PYGZus{}scene\PYGZus{}ratp}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[17]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{VTK\PYGZus{}nolight}\PYG{p}{(}\PYG{n}{pathfile}\PYG{p}{,} \PYG{n}{printtriangles}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[18]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{energy} \PYG{o}{=} \PYG{l+m+mf}{500.}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{15}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{energy}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[19]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{VTK\PYGZus{}light}\PYG{p}{(}\PYG{n}{pathfile}\PYG{p}{,} \PYG{n}{printtriangles}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{,} \PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Analyze with s2v and s5}
\label{\detokenize{misc_functionnalities:Analyze-with-s2v-and-s5}}
\sphinxAtStartPar
We added the possibility to call s2v and s5, two analysis tools which returns informations in order to convert the triangle mesh in a RATP grid format. Depending on the grid dimensions you specify, it will return leaf area in each voxel (depending on the barycenter position of each triangle in the grid) and leaf angle distribution.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[6]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} random triangles}
\PYG{n}{nb\PYGZus{}triangles} \PYG{o}{=} \PYG{l+m+mi}{5}
\PYG{n}{spheresize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{0.3}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} vertices of triangles are the sphere surface}
\PYG{n}{worldsize} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{5.}\PYG{p}{)}
\PYG{n}{triangles} \PYG{o}{=} \PYG{p}{[}\PYG{n}{random\PYGZus{}triangle\PYGZus{}generator}\PYG{p}{(}\PYG{n}{worldsize}\PYG{o}{=}\PYG{n}{worldsize}\PYG{p}{,} \PYG{n}{spheresize}\PYG{o}{=}\PYG{n}{spheresize}\PYG{p}{)} \PYG{k}{for} \PYG{n}{i} \PYG{o+ow}{in} \PYG{n+nb}{range}\PYG{p}{(}\PYG{n}{nb\PYGZus{}triangles}\PYG{p}{)}\PYG{p}{]}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\paragraph{s5 (fortran)}
\label{\detokenize{misc_functionnalities:s5-(fortran)}}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[7]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{ratp\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{,} \PYG{l+m+mf}{1.}\PYG{p}{]} \PYG{p}{\PYGZcb{}}
\PYG{n}{lighting} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{)}
\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{o}{=}\PYG{n}{triangles}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[8]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{s5}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]

--- Fin de s5.f
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{Description of \sphinxstyleliteralintitle{\sphinxupquote{fort.60}}}
\label{\detokenize{misc_functionnalities:Description-of-fort.60}}\begin{itemize}
\item {} 
\sphinxAtStartPar
xy dimension of the scene

\item {} 
\sphinxAtStartPar
statistics per specy
\begin{itemize}
\item {} 
\sphinxAtStartPar
Total leaf area

\item {} 
\sphinxAtStartPar
Leaf area index

\item {} 
\sphinxAtStartPar
Global zenith angle distribution

\item {} 
\sphinxAtStartPar
Global azimut angle distribution

\end{itemize}

\item {} 
\sphinxAtStartPar
statistics per voxel
\begin{itemize}
\item {} 
\sphinxAtStartPar
\#specy \#ix \#iy \textasciitilde{}iz leaf area density

\item {} 
\sphinxAtStartPar
zenith angle distribution

\item {} 
\sphinxAtStartPar
azimut angle distribution

\end{itemize}

\end{itemize}

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[9]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{outfile} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s5}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{fort.60}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{outfile}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{fichier}\PYG{p}{:}
    \PYG{k}{for} \PYG{n}{ligne} \PYG{o+ow}{in} \PYG{n}{fichier}\PYG{p}{:}
        \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{ligne}\PYG{p}{,} \PYG{n}{end}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
 dimensions de la maquette (x,y):    5.000    3.000
 nombre de repetitions du motif:    1.0

 STATISTIQUES GLOBALES DE CHAQUE ESPECE

 espece:  1    surface foliaire: .411D+01    lai :  0.2738
 distribution en zenith:  0.0000 0.3407 0.0000 0.1688 0.0000 0.0000 0.3105 0.0000 0.1800
 distribution en azimuth: 0.0189 0.0000 0.3407 0.0000 0.3105 0.0000 0.0000 0.3299 0.0000


 STATISTIQUES PAR CELLULE

  1  1  1  1      0.041
 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000
 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
  1  1  3  1      0.008
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000
 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000
  1  2  3  1      0.011
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000
 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000
  1  3  1  1      0.014
 0.0000 0.0000 0.0000 0.1847 0.0000 0.0000 0.0000 0.0000 0.8153
 0.1847 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.8153 0.0000
  1  3  2  1      0.180
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000
  2  1  1  1      0.032
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000
  2  1  2  1      0.718
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.4841 0.0000 0.5159
 0.0000 0.0000 0.0000 0.0000 0.4841 0.0000 0.0000 0.5159 0.0000
  2  1  3  1      0.027
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.9534 0.0000 0.0466
 0.0000 0.0000 0.0000 0.0000 0.9534 0.0000 0.0000 0.0466 0.0000
  2  2  3  1      0.005
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000
 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000
  2  3  1  1      0.039
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000
  2  3  2  1      0.104
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000
  3  1  1  1      0.058
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000
 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000
  3  1  2  1      0.696
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000
 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000
  3  2  3  1      0.007
 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
  3  3  3  1      0.183
 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
  4  1  2  1      0.288
 0.0000 0.0000 0.0000 0.5694 0.0000 0.0000 0.4306 0.0000 0.0000
 0.0000 0.0000 0.0000 0.0000 0.4306 0.0000 0.0000 0.5694 0.0000
  4  1  3  1      0.204
 0.0000 0.4558 0.0000 0.5442 0.0000 0.0000 0.0000 0.0000 0.0000
 0.0000 0.0000 0.4558 0.0000 0.0000 0.0000 0.0000 0.5442 0.0000
  4  2  2  1      0.157
 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000
  4  2  3  1      0.357
 0.0000 0.6117 0.0000 0.3883 0.0000 0.0000 0.0000 0.0000 0.0000
 0.0000 0.0000 0.6117 0.0000 0.0000 0.0000 0.0000 0.3883 0.0000
  4  3  3  1      0.897
 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
  5  1  1  1      0.034
 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000
 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
  5  1  2  1      0.026
 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000
  5  1  3  1      0.001
 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000
  5  2  2  1      0.019
 0.0000 0.0000 0.0000 1.0000 0.0000 0.0000 0.0000 0.0000 0.0000
 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 0.0000 1.0000 0.0000
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{Description of \sphinxstyleliteralintitle{\sphinxupquote{leafarea}}}
\label{\detokenize{misc_functionnalities:Description-of-leafarea}}\begin{itemize}
\item {} 
\sphinxAtStartPar
for each specy
\begin{itemize}
\item {} 
\sphinxAtStartPar
for each voxel
\begin{itemize}
\item {} 
\sphinxAtStartPar
ix | iy | iz | \#specy | LAD | zenith angle distribution | azimut angle distribution

\end{itemize}

\end{itemize}

\end{itemize}

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{outfile} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s5}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{leafarea}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{outfile}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{fichier}\PYG{p}{:}
    \PYG{k}{for} \PYG{n}{ligne} \PYG{o+ow}{in} \PYG{n}{fichier}\PYG{p}{:}
        \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{ligne}\PYG{p}{,} \PYG{n}{end}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
  1  1  1  1      0.041  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000
  1  1  3  1      0.008  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000
  1  2  3  1      0.011  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000
  1  3  1  1      0.014  0.000  0.000  0.000  0.185  0.000  0.000  0.000  0.000  0.815  0.185  0.000  0.000  0.000  0.000  0.000  0.000  0.815  0.000
  1  3  2  1      0.180  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000
  2  1  1  1      0.032  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000
  2  1  2  1      0.718  0.000  0.000  0.000  0.000  0.000  0.000  0.484  0.000  0.516  0.000  0.000  0.000  0.000  0.484  0.000  0.000  0.516  0.000
  2  1  3  1      0.027  0.000  0.000  0.000  0.000  0.000  0.000  0.953  0.000  0.047  0.000  0.000  0.000  0.000  0.953  0.000  0.000  0.047  0.000
  2  2  3  1      0.005  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000
  2  3  1  1      0.039  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000
  2  3  2  1      0.104  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000
  3  1  1  1      0.058  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000
  3  1  2  1      0.696  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000
  3  2  3  1      0.007  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000
  3  3  3  1      0.183  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000
  4  1  2  1      0.288  0.000  0.000  0.000  0.569  0.000  0.000  0.431  0.000  0.000  0.000  0.000  0.000  0.000  0.431  0.000  0.000  0.569  0.000
  4  1  3  1      0.204  0.000  0.456  0.000  0.544  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.456  0.000  0.000  0.000  0.000  0.544  0.000
  4  2  2  1      0.157  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000
  4  2  3  1      0.357  0.000  0.612  0.000  0.388  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.612  0.000  0.000  0.000  0.000  0.388  0.000
  4  3  3  1      0.897  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000
  5  1  1  1      0.034  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000
  5  1  2  1      0.026  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000
  5  1  3  1      0.001  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000
  5  2  2  1      0.019  0.000  0.000  0.000  1.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  1.000  0.000
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{s2v (c++)}
\label{\detokenize{misc_functionnalities:s2v-(c++)}}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lighting}\PYG{o}{.}\PYG{n}{s2v}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
--- Fin de s2v.cpp
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{Description of \sphinxstyleliteralintitle{\sphinxupquote{s2v.log}}}
\label{\detokenize{misc_functionnalities:Description-of-s2v.log}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Program logs

\item {} 
\sphinxAtStartPar
global statistic for each specy
\begin{itemize}
\item {} 
\sphinxAtStartPar
total leaf area

\item {} 
\sphinxAtStartPar
leaf area index

\item {} 
\sphinxAtStartPar
global zenith angle distribution

\end{itemize}

\end{itemize}

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[12]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{outfile} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s2v}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s2v.log}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{outfile}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{fichier}\PYG{p}{:}
    \PYG{k}{for} \PYG{n}{ligne} \PYG{o+ow}{in} \PYG{n}{fichier}\PYG{p}{:}
        \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{ligne}\PYG{p}{,} \PYG{n}{end}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
.\textbackslash{}s2v++.exe
Lecture du fichier parametre dans fichier :
nji=9, nja=9, njz=4
bz[0]=4
5, 5, 1, 3, 3, 1, 1
s2v.cpp:530 -> Fin de lecture de fichier
=> Calcul des distributions
==> nje rel = 1
=> Ecriture des resultats : (c|std)err, leafarea, out.dang
Il y a eu 640 depassement en z+
xl=5, yl=3, xymaille=1

STATISTIQUES GLOBALES DE CHAQUE ESPECE
esp 1 : surfT=4.10686 - Stot=4.10686, LAI=0.27379 dist d'inclinaison :0 0.340694 0 0.168815 0 0 0.310531 0 0.179961
0.018865800.34069400.310531000.329910
genere le fichier out.dang => entree de sailM pour calculer la BRDF
        : xx= 0 ; Uz= 1e-009
ferrlog stream close() called.
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{Description of \sphinxstyleliteralintitle{\sphinxupquote{s2v.can}}}
\label{\detokenize{misc_functionnalities:Description-of-s2v.can}}
\sphinxAtStartPar
Copy of each triangle with the z layer in which the triangle belongs

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[13]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{outfile} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s2v}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s2v.can}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{outfile}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{fichier}\PYG{p}{:}
    \PYG{k}{for} \PYG{n}{ligne} \PYG{o+ow}{in} \PYG{n}{fichier}\PYG{p}{:}
        \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{ligne}\PYG{p}{,} \PYG{n}{end}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
p 2 100001001000 2  3 2.985657 4.113371 1.842963 2.750814 2.983446 1.871450 3.732794 3.462100 2.480996
p 2 100001001000 2  3 3.433085 1.126134 1.322910 3.511158 2.888248 1.501685 1.933951 1.618254 1.795654
p 2 100001001000 2  3 1.039979 3.215031 1.956095 0.182558 1.870699 2.746943 0.636121 2.520374 3.280594
p 2 100001001000 2  3 2.120032 3.026543 3.191847 0.226976 3.530282 1.788605 2.980323 3.379190 2.619068
p 2 100001001000 0  3 4.355116 3.219292 4.362386 4.516341 3.181239 4.363903 4.653955 2.345981 3.852559
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{Description of \sphinxstyleliteralintitle{\sphinxupquote{s2v.area}}}
\label{\detokenize{misc_functionnalities:Description-of-s2v.area}}
\sphinxAtStartPar
each line contains: triangle id | z layer | triangle area

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[14]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{outfile} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s2v}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s2v.area}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{outfile}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{fichier}\PYG{p}{:}
    \PYG{k}{for} \PYG{n}{ligne} \PYG{o+ow}{in} \PYG{n}{fichier}\PYG{p}{:}
        \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{ligne}\PYG{p}{,} \PYG{n}{end}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
100001001000     2       0.615819
100001001000     2       1.39918
100001001000     2       0.739072
100001001000     2       1.27531
100001001000     0       0.0774794
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{Description of \sphinxstyleliteralintitle{\sphinxupquote{out.dang}}}
\label{\detokenize{misc_functionnalities:Description-of-out.dang}}
\sphinxAtStartPar
File for SAIL model \sphinxhyphen{} line 1: global leaf area index for specy 1 \sphinxhyphen{} line 2: global zenith angle distribution for specy 1

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[15]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{outfile} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s2v}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{out.dang}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{outfile}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{fichier}\PYG{p}{:}
    \PYG{k}{for} \PYG{n}{ligne} \PYG{o+ow}{in} \PYG{n}{fichier}\PYG{p}{:}
        \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{ligne}\PYG{p}{,} \PYG{n}{end}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
0.273790
0.000000 0.340694 0.000000 0.168815 0.000000 0.000000 0.310531 0.000000 0.179961
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subparagraph{Description of \sphinxstyleliteralintitle{\sphinxupquote{leafarea}}}
\label{\detokenize{misc_functionnalities:id1}}
\sphinxAtStartPar
File for SAIL model each line: \sphinxhyphen{} 0 idz “Leaf area index by layer inclination class” 0 0 “total leaf area density on the z layer”

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[16]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{outfile} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{dirname}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{path}\PYG{o}{.}\PYG{n}{abspath}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{s2v}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{leafarea}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{n}{outfile}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{r}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{fichier}\PYG{p}{:}
    \PYG{k}{for} \PYG{n}{ligne} \PYG{o+ow}{in} \PYG{n}{fichier}\PYG{p}{:}
        \PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{ligne}\PYG{p}{,} \PYG{n}{end}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
  0  1  0.000000 0.000000 0.000000 0.353762 0.000000 0.000000 0.267263 0.000000 0.378975 0 0 0.219015
  0  2  0.000000 0.000000 0.000000 0.167022 0.000000 0.000000 0.533621 0.000000 0.299357 0 0 2.189191
  0  3  0.000000 0.823702 0.000000 0.147280 0.000000 0.000000 0.028594 0.000000 0.000425 0 0 1.698650
  0  4  0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0 0 0.000000
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxstepscope


\subsection{More examples}
\label{\detokenize{more_examples:More-examples}}\label{\detokenize{more_examples::doc}}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[1]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{import} \PYG{n+nn}{openalea}\PYG{n+nn}{.}\PYG{n+nn}{plantgl}\PYG{n+nn}{.}\PYG{n+nn}{all} \PYG{k}{as} \PYG{n+nn}{pgl\PYGZus{}all}
\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{LVM} \PYG{k+kn}{import} \PYG{n}{LightVegeManager}
\PYG{k+kn}{from} \PYG{n+nn}{pgljupyter} \PYG{k+kn}{import} \PYG{n}{SceneWidget}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Sun positions}
\label{\detokenize{more_examples:Sun-positions}}
\sphinxAtStartPar
The \sphinxcode{\sphinxupquote{print\_sun}} function allows you to compare the sun position differences between RATP and CARIBU internal computation.

\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[38]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{k+kn}{from} \PYG{n+nn}{lightvegemanager}\PYG{n+nn}{.}\PYG{n+nn}{sun} \PYG{k+kn}{import} \PYG{n}{print\PYGZus{}sun}

\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{print\PYGZus{}sun}\PYG{o}{.}\PYG{n+nv+vm}{\PYGZus{}\PYGZus{}doc\PYGZus{}\PYGZus{}}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
Prints sun position ouputs from RATP and CARIBU algorithm with the same inputs

    :param day: input day
    :type day: int
    :param hour: input hour
    :type hour: int
    :param coordinates: [latitude, longitude, timezone]
    :type coordinates: list
    :param truesolartime: activates true solar time or local time to compute sun position
    :type truesolartime: bool

\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[11]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{print\PYGZus{}sun}\PYG{p}{(}\PYG{l+m+mi}{201}\PYG{p}{,} \PYG{l+m+mi}{12}\PYG{p}{,} \PYG{p}{[}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{]}\PYG{p}{,} \PYG{k+kc}{True}\PYG{p}{)}
\PYG{n}{print\PYGZus{}sun}\PYG{p}{(}\PYG{l+m+mi}{201}\PYG{p}{,} \PYG{l+m+mi}{12}\PYG{p}{,} \PYG{p}{[}\PYG{l+m+mf}{40.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{]}\PYG{p}{,} \PYG{k+kc}{True}\PYG{p}{)}
\PYG{n}{print\PYGZus{}sun}\PYG{p}{(}\PYG{l+m+mi}{201}\PYG{p}{,} \PYG{l+m+mi}{16}\PYG{p}{,} \PYG{p}{[}\PYG{l+m+mf}{40.0}\PYG{p}{,} \PYG{l+m+mf}{12.0}\PYG{p}{,} \PYG{l+m+mf}{2.0}\PYG{p}{]}\PYG{p}{,} \PYG{k+kc}{True}\PYG{p}{)}
\PYG{n}{print\PYGZus{}sun}\PYG{p}{(}\PYG{l+m+mi}{201}\PYG{p}{,} \PYG{l+m+mi}{16}\PYG{p}{,} \PYG{p}{[}\PYG{l+m+mf}{40.0}\PYG{p}{,} \PYG{l+m+mf}{12.0}\PYG{p}{,} \PYG{l+m+mf}{2.0}\PYG{p}{]}\PYG{p}{,} \PYG{k+kc}{False}\PYG{p}{)}
\PYG{n}{print\PYGZus{}sun}\PYG{p}{(}\PYG{l+m+mi}{347}\PYG{p}{,} \PYG{l+m+mi}{16}\PYG{p}{,} \PYG{p}{[}\PYG{l+m+mf}{46.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{]}\PYG{p}{,} \PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
---      SUN COORDONATES         ---
--- Convention x+ = North, vector from sky to floor
--- azimut: south clockwise E = -90° W = 90°     zenith:                                 zenith = 0° horizon = 90°
--- day: 201     hour: 12        latitude: 0.00 °
--- true solar time
--- RATP ---
         azimut: 180.000         zenith: 69.227
         x: -0.354671    y: -0.000000    z: -0.934991
--- CARIBU ---
         azimut: 180.000         zenith: 68.944
         x: -0.359285    y: -0.000000    z: -0.933228


---      SUN COORDONATES         ---
--- Convention x+ = North, vector from sky to floor
--- azimut: south clockwise E = -90° W = 90°     zenith:                                 zenith = 0° horizon = 90°
--- day: 201     hour: 12        latitude: 40.00 °
--- true solar time
--- RATP ---
         azimut: 0.000   zenith: 70.773
         x: 0.329307     y: -0.000000    z: -0.944223
--- CARIBU ---
         azimut: 0.000   zenith: 71.148
         x: 0.323132     y: -0.000000    z: -0.946354


---      SUN COORDONATES         ---
--- Convention x+ = North, vector from sky to floor
--- azimut: south clockwise E = -90° W = 90°     zenith:                                 zenith = 0° horizon = 90°
--- day: 201     hour: 16        latitude: 40.00 °
--- true solar time
--- RATP ---
         azimut: 87.963          zenith: 35.881
         x: 0.028807     y: -0.809726    z: -0.586100
--- CARIBU ---
         azimut: 88.295          zenith: 36.115
         x: 0.024030     y: -0.807482    z: -0.589402


---      SUN COORDONATES         ---
--- Convention x+ = North, vector from sky to floor
--- azimut: south clockwise E = -90° W = 90°     zenith:                                 zenith = 0° horizon = 90°
--- day: 201     hour: 16        latitude: 40.00 °
--- local time, true solar time is 18.70
--- RATP ---
         azimut: 112.480         zenith: 5.641
         x: -0.380514    y: -0.919537    z: -0.098291
--- CARIBU ---
         azimut: 112.736         zenith: 5.895
         x: -0.384436    y: -0.917420    z: -0.102706


---      SUN COORDONATES         ---
--- Convention x+ = North, vector from sky to floor
--- azimut: south clockwise E = -90° W = 90°     zenith:                                 zenith = 0° horizon = 90°
--- day: 347     hour: 16        latitude: 46.00 °
--- true solar time
--- RATP ---
         azimut: 52.853          zenith: 2.129
         x: 0.603439     y: -0.796543    z: -0.037150
--- CARIBU ---
         azimut: 53.169          zenith: 2.592
         x: 0.598849     y: -0.799584    z: -0.045228


\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Two planes}
\label{\detokenize{more_examples:Two-planes}}
\sphinxAtStartPar
A small example with two horizontal planes, in order to check if the xy orientation according to North\sphinxhyphen{}East\sphinxhyphen{}South\sphinxhyphen{}West.

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[2]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geom1} \PYG{o}{=} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{FaceSet}\PYG{p}{(}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}\PYG{p}{[}\PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} plaque dessous}
\PYG{n}{geom2} \PYG{o}{=} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{FaceSet}\PYG{p}{(}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}\PYG{p}{[}\PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} plaque dessus, décalée en y (axe est\PYGZhy{}ouest) vers l\PYGZsq{}ouest}
\PYG{n}{s} \PYG{o}{=} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Scene}\PYG{p}{(}\PYG{p}{[}\PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Shape}\PYG{p}{(}\PYG{n}{geom1}\PYG{p}{,} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Material}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{250}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{888}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Shape}\PYG{p}{(}\PYG{n}{geom2}\PYG{p}{,} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Material}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{250}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{999}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[3]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} input dict}
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{environment} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{caribu\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} Paramètres pré\PYGZhy{}simulation}
\PYG{n}{geometry}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{n}{s}\PYG{p}{]}

\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{l+m+mf}{0.} \PYG{p}{,}\PYG{l+m+mf}{0.} \PYG{p}{,}\PYG{l+m+mf}{0.}\PYG{p}{]} \PYG{c+c1}{\PYGZsh{} latitude, longitude, timezone}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{direct}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{True}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{diffus}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflected}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{par}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{0.10}\PYG{p}{,} \PYG{p}{)} \PYG{c+c1}{\PYGZsh{} plaques opaques}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infinite}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{False}

\PYG{c+c1}{\PYGZsh{}\PYGZsh{} Paramètres CARIBU \PYGZsh{}\PYGZsh{}}
\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{par}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{0.10}\PYG{p}{,} \PYG{p}{)} \PYG{c+c1}{\PYGZsh{} plaques opaques}

\PYG{c+c1}{\PYGZsh{} Déclaration de l\PYGZsq{}objet}
\PYG{n}{lghtcaribu} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{,}
                                \PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                                \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} création de la scène dans l\PYGZsq{}objet}
\PYG{n}{lghtcaribu}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{p}{,} \PYG{n}{global\PYGZus{}scene\PYGZus{}tesselate\PYGZus{}level}\PYG{o}{=}\PYG{l+m+mi}{5}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[39]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} forçage arbitraire en µmol.m\PYGZhy{}2.s\PYGZhy{}1}
\PYG{n}{PARi} \PYG{o}{=} \PYG{l+m+mi}{500}
\PYG{c+c1}{\PYGZsh{} jour arbitraire (21 septembre)}
\PYG{n}{day} \PYG{o}{=} \PYG{l+m+mi}{264}

\PYG{c+c1}{\PYGZsh{} heure matin, soleil arrive de l\PYGZsq{}est, les 2 plaques reçoivent tout le rayonnement}
\PYG{n}{hour} \PYG{o}{=} \PYG{l+m+mi}{16}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZhy{}\PYGZhy{}\PYGZhy{} day }\PYG{l+s+si}{\PYGZpc{}i}\PYG{l+s+s2}{, hour }\PYG{l+s+si}{\PYGZpc{}i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZpc{}}\PYG{p}{(}\PYG{n}{day}\PYG{p}{,} \PYG{n}{hour}\PYG{p}{)}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{} Calcul du rayonnement}
\PYG{n}{lghtcaribu}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{PARi}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{parunit}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{micromol.m\PYGZhy{}2.s\PYGZhy{}1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{truesolartime}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
--- day 264, hour 16
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} visualisation}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lghtcaribu}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{10}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[10]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, plane=False, scenes=[\{'id': 'PidZp3tokVAgJYlbO4DHRXebB', 'data': b'x\textbackslash{}xda\textbackslash{}x9c\textbackslash{}xbd…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}

\subsubsection{Examples with RATP and stem elements}
\label{\detokenize{more_examples:Examples-with-RATP-and-stem-elements}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
Stems processing checking
\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}

Scene for verification is a set of horizontal planes in one voxel as so:

\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
|   \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}    |
|     \PYGZus{}\PYGZus{}\PYGZus{}\PYGZus{}  |
| \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}      |
\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}

We compare the PAR mean on all the planes between CARIBU and RATP

Stems processing
    * CARIBU
        Computing of incident PAR is done with no transmittance, triangles are opaques

    * RATP
        triangles area are divided by 2
\end{sphinxVerbatim}

\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[34]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geom1} \PYG{o}{=} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{FaceSet}\PYG{p}{(}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.1}\PYG{p}{,}\PYG{l+m+mf}{0.1}\PYG{p}{,}\PYG{l+m+mf}{0.96}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.1}\PYG{p}{,}\PYG{l+m+mf}{0.6}\PYG{p}{,}\PYG{l+m+mf}{0.96}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{0.6}\PYG{p}{,}\PYG{l+m+mf}{0.6}\PYG{p}{,}\PYG{l+m+mf}{0.96}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.6}\PYG{p}{,}\PYG{l+m+mf}{0.1}\PYG{p}{,}\PYG{l+m+mf}{0.96}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}\PYG{p}{[}\PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{geom2} \PYG{o}{=} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{FaceSet}\PYG{p}{(}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.1}\PYG{p}{,}\PYG{l+m+mf}{0.5}\PYG{p}{,}\PYG{l+m+mf}{0.806}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.1}\PYG{p}{,}\PYG{l+m+mf}{0.9}\PYG{p}{,}\PYG{l+m+mf}{0.806}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{0.6}\PYG{p}{,}\PYG{l+m+mf}{0.9}\PYG{p}{,}\PYG{l+m+mf}{0.806}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.6}\PYG{p}{,}\PYG{l+m+mf}{0.5}\PYG{p}{,}\PYG{l+m+mf}{0.806}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}\PYG{p}{[}\PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{geom3} \PYG{o}{=} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{FaceSet}\PYG{p}{(}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.5}\PYG{p}{,}\PYG{l+m+mf}{0.1}\PYG{p}{,}\PYG{l+m+mf}{0.646}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.5}\PYG{p}{,}\PYG{l+m+mf}{0.7}\PYG{p}{,}\PYG{l+m+mf}{0.646}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{0.9}\PYG{p}{,}\PYG{l+m+mf}{0.7}\PYG{p}{,}\PYG{l+m+mf}{0.646}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.9}\PYG{p}{,}\PYG{l+m+mf}{0.1}\PYG{p}{,}\PYG{l+m+mf}{0.646}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}\PYG{p}{[}\PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{geom4} \PYG{o}{=} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{FaceSet}\PYG{p}{(}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.3}\PYG{p}{,}\PYG{l+m+mf}{0.5}\PYG{p}{,}\PYG{l+m+mf}{0.486}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.3}\PYG{p}{,}\PYG{l+m+mf}{0.9}\PYG{p}{,}\PYG{l+m+mf}{0.486}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{0.8}\PYG{p}{,}\PYG{l+m+mf}{0.9}\PYG{p}{,}\PYG{l+m+mf}{0.486}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.8}\PYG{p}{,}\PYG{l+m+mf}{0.5}\PYG{p}{,}\PYG{l+m+mf}{0.486}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}\PYG{p}{[}\PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{geom5} \PYG{o}{=} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{FaceSet}\PYG{p}{(}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.3}\PYG{p}{,}\PYG{l+m+mf}{0.1}\PYG{p}{,}\PYG{l+m+mf}{0.32}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.3}\PYG{p}{,}\PYG{l+m+mf}{0.5}\PYG{p}{,}\PYG{l+m+mf}{0.32}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{0.8}\PYG{p}{,}\PYG{l+m+mf}{0.5}\PYG{p}{,}\PYG{l+m+mf}{0.32}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.8}\PYG{p}{,}\PYG{l+m+mf}{0.1}\PYG{p}{,}\PYG{l+m+mf}{0.32}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}\PYG{p}{[}\PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{geom6} \PYG{o}{=} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{FaceSet}\PYG{p}{(}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mf}{0.2}\PYG{p}{,}\PYG{l+m+mf}{0.4}\PYG{p}{,}\PYG{l+m+mf}{0.16}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.2}\PYG{p}{,}\PYG{l+m+mf}{0.9}\PYG{p}{,}\PYG{l+m+mf}{0.16}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mf}{0.6}\PYG{p}{,}\PYG{l+m+mf}{0.9}\PYG{p}{,}\PYG{l+m+mf}{0.16}\PYG{p}{)}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mf}{0.6}\PYG{p}{,}\PYG{l+m+mf}{0.4}\PYG{p}{,}\PYG{l+m+mf}{0.16}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}\PYG{p}{[}\PYG{n+nb}{range}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\PYG{n}{s} \PYG{o}{=} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Scene}\PYG{p}{(}\PYG{p}{[}\PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Shape}\PYG{p}{(}\PYG{n}{geom1}\PYG{p}{,} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Material}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{250}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{888}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Shape}\PYG{p}{(}\PYG{n}{geom2}\PYG{p}{,} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Material}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{250}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{888}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Shape}\PYG{p}{(}\PYG{n}{geom3}\PYG{p}{,} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Material}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{250}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{888}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Shape}\PYG{p}{(}\PYG{n}{geom4}\PYG{p}{,} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Material}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{250}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{888}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Shape}\PYG{p}{(}\PYG{n}{geom5}\PYG{p}{,} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Material}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{250}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{888}\PYG{p}{)}\PYG{p}{,}
                    \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Shape}\PYG{p}{(}\PYG{n}{geom6}\PYG{p}{,} \PYG{n}{pgl\PYGZus{}all}\PYG{o}{.}\PYG{n}{Material}\PYG{p}{(}\PYG{p}{(}\PYG{l+m+mi}{250}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{888}\PYG{p}{)}\PYG{p}{]}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[35]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{environment} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{ratp\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{caribu\PYGZus{}parameters} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} Paramètres pré\PYGZhy{}simulation}
\PYG{n}{geometry}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{n}{s}\PYG{p}{]}
\PYG{n}{geometry}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{stems id}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{888}\PYG{p}{,} \PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{]}

\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{]} \PYG{c+c1}{\PYGZsh{} latitude, longitude, timezone}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{turtle46}\PYG{l+s+s2}{\PYGZdq{}} \PYG{c+c1}{\PYGZsh{} turtle à 46 directions par défaut}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{diffus}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{direct}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{True}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflected}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{False}
\PYG{n}{environment}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infinite}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{k+kc}{False}

\PYG{c+c1}{\PYGZsh{}\PYGZsh{} Paramètres CARIBU \PYGZsh{}\PYGZsh{}}
\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{par}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mf}{0.10}\PYG{p}{,} \PYG{l+m+mf}{0.05}\PYG{p}{)}
\PYG{n}{lghtcaribu} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{,}
                                \PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                                \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{caribu\PYGZus{}parameters}\PYG{p}{)}
\PYG{n}{lghtcaribu}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[36]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{}\PYGZsh{} Paramètres RATP \PYGZsh{}\PYGZsh{}}
\PYG{n}{dv} \PYG{o}{=} \PYG{l+m+mf}{1.} \PYG{c+c1}{\PYGZsh{} m}
\PYG{n}{dx}\PYG{p}{,} \PYG{n}{dy}\PYG{p}{,} \PYG{n}{dz} \PYG{o}{=} \PYG{n}{dv}\PYG{p}{,} \PYG{n}{dv}\PYG{p}{,} \PYG{n}{dv} \PYG{c+c1}{\PYGZsh{} m}
\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{n}{dx}\PYG{p}{,} \PYG{n}{dy}\PYG{p}{,} \PYG{n}{dz}\PYG{p}{]}
\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil reflectance}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{l+m+mf}{0.}\PYG{p}{,} \PYG{l+m+mf}{0.}\PYG{p}{]}
\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{l+m+mf}{1.}\PYG{p}{]}
\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tesselation level}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mi}{0}
\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute global}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{nb angle classes}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{l+m+mi}{30}
\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflectance coefficients}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{[}\PYG{p}{[}\PYG{l+m+mf}{0.1}\PYG{p}{,} \PYG{l+m+mf}{0.05}\PYG{p}{]}\PYG{p}{]}
\PYG{n}{lghtratp} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{n}{environment}\PYG{o}{=}\PYG{n}{environment}\PYG{p}{,}
                            \PYG{n}{lightmodel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                            \PYG{n}{lightmodel\PYGZus{}parameters}\PYG{o}{=}\PYG{n}{ratp\PYGZus{}parameters}\PYG{p}{)}
\PYG{n}{lghtratp}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(}\PYG{n}{geometry}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[28]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{c+c1}{\PYGZsh{} visualisation}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lghtratp}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}nolight}\PYG{p}{(}\PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{2}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[28]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, plane=False, scenes=[\{'id': '31qAWA8Lxo9AjwlYbU2IJwjFk', 'data': b'x\textbackslash{}xda\textbackslash{}x85\textbackslash{}x95…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[29]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{PARi}\PYG{o}{=}\PYG{l+m+mi}{500}
\PYG{n}{day}\PYG{o}{=}\PYG{l+m+mf}{100.}
\PYG{n}{hour}\PYG{o}{=}\PYG{l+m+mi}{12}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
\begin{sphinxuseclass}{nblast}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[ ]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{PARi}\PYG{o}{=}\PYG{l+m+mi}{500}
\PYG{n}{day}\PYG{o}{=}\PYG{l+m+mf}{100.}
\PYG{n}{hour}\PYG{o}{=}\PYG{l+m+mf}{17.5}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[31]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lghtcaribu}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{PARi}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{parunit}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{micromol.m\PYGZhy{}2.s\PYGZhy{}1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{truesolartime}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{=== CARIBU ===}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lghtcaribu}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} visualisation}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lghtcaribu}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{2}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
=== CARIBU ===
     Day  Hour  Organ  VegetationType  Area    par Eabs      par Ei
0  100.0    12    888               0  1.29  226.615845  251.795383
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[31]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, plane=False, scenes=[\{'id': 'euPE10Vd7GkTxzNRtZPTE36Dx', 'data': b'x\textbackslash{}xda\textbackslash{}x85\textbackslash{}xd5…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\begin{sphinxuseclass}{nbinput}
{
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxin}[33]:\,\hspace{\fboxrule}\hspace{\fboxsep}}\PYG{n}{lghtratp}\PYG{o}{.}\PYG{n}{run}\PYG{p}{(}\PYG{n}{energy}\PYG{o}{=}\PYG{n}{PARi}\PYG{p}{,} \PYG{n}{day}\PYG{o}{=}\PYG{n}{day}\PYG{p}{,} \PYG{n}{hour}\PYG{o}{=}\PYG{n}{hour}\PYG{p}{,} \PYG{n}{parunit}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{micromol.m\PYGZhy{}2.s\PYGZhy{}1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{truesolartime}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{=== RATP ===}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n+nb}{print}\PYG{p}{(}\PYG{n}{lghtratp}\PYG{o}{.}\PYG{n}{elements\PYGZus{}outputs}\PYG{p}{)}
\PYG{c+c1}{\PYGZsh{} visualisation}
\PYG{n}{SceneWidget}\PYG{p}{(}\PYG{n}{lghtratp}\PYG{o}{.}\PYG{n}{plantGL\PYGZus{}light}\PYG{p}{(}\PYG{n}{printvoxels}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{position}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{,} \PYG{l+m+mf}{0.0}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}display}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{600}\PYG{p}{,} \PYG{l+m+mi}{400}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{plane}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,}
            \PYG{n}{size\PYGZus{}world} \PYG{o}{=} \PYG{l+m+mi}{2}\PYG{p}{,}
            \PYG{n}{axes\PYGZus{}helper}\PYG{o}{=}\PYG{k+kc}{True}\PYG{p}{)}
\end{sphinxVerbatim}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
=== RATP ===
     Day  Hour  Organ  VegetationType  Area        PARa  Intercepted  \textbackslash{}
0  100.0  12.0    888               2  1.29  377.546967     0.487036

   Transmitted   SunlitPAR  SunlitArea  ShadedPAR  ShadedArea
0     0.487036  499.828644    0.487203        0.0    0.157797
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\begin{sphinxuseclass}{nboutput}
\begin{sphinxuseclass}{nblast}
{

\kern-\sphinxverbatimsmallskipamount\kern-\baselineskip
\kern+\FrameHeightAdjust\kern-\fboxrule
\vspace{\nbsphinxcodecellspacing}

\sphinxsetup{VerbatimColor={named}{white}}
\begin{sphinxuseclass}{output_area}
\begin{sphinxuseclass}{}


\begin{sphinxVerbatim}[commandchars=\\\{\}]
\llap{\color{nbsphinxout}[33]:\,\hspace{\fboxrule}\hspace{\fboxsep}}SceneWidget(axes\_helper=True, plane=False, scenes=[\{'id': 'GNw9osvivwBapMiJRL2W1wlXa', 'data': b'x\textbackslash{}xda\textbackslash{}x85\textbackslash{}xd6…
\end{sphinxVerbatim}



\end{sphinxuseclass}
\end{sphinxuseclass}
}

\end{sphinxuseclass}
\end{sphinxuseclass}
\sphinxstepscope


\section{Reference Guide}
\label{\detokenize{reference:reference-guide}}\label{\detokenize{reference:lightvegemanager-reference}}\label{\detokenize{reference::doc}}
\sphinxAtStartPar
This manual details, for each module of {\hyperref[\detokenize{index:module-lightvegemanager}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{lightvegemanager}}}}}, the functions and objects included in {\hyperref[\detokenize{index:module-lightvegemanager}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{lightvegemanager}}}}},
describing what they are and what they do.

\begin{sphinxShadowBox}
\sphinxstyletopictitle{Contents}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id3}}{\hyperref[\detokenize{reference:reference-guide}]{\sphinxcrossref{Reference Guide}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id4}}{\hyperref[\detokenize{reference:module-LVM}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-LVM}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{LVM}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id5}}{\hyperref[\detokenize{reference:lightvegemanager}]{\sphinxcrossref{LightVegeManager}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id6}}{\hyperref[\detokenize{reference:module-CARIBUinputs}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-CARIBUinputs}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{CARIBUinputs}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id7}}{\hyperref[\detokenize{reference:caribuinputs}]{\sphinxcrossref{CARIBUinputs}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id8}}{\hyperref[\detokenize{reference:module-RATPinputs}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-RATPinputs}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{RATPinputs}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id9}}{\hyperref[\detokenize{reference:ratpinputs}]{\sphinxcrossref{RATPinputs}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id10}}{\hyperref[\detokenize{reference:module-VTK}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-VTK}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{VTK}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id11}}{\hyperref[\detokenize{reference:vtk}]{\sphinxcrossref{VTK}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id12}}{\hyperref[\detokenize{reference:module-basicgeometry}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-basicgeometry}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{basicgeometry}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id13}}{\hyperref[\detokenize{reference:basicgeometry}]{\sphinxcrossref{basicgeometry}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id14}}{\hyperref[\detokenize{reference:module-buildRATPscene}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-buildRATPscene}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{buildRATPscene}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id15}}{\hyperref[\detokenize{reference:buildratpscene}]{\sphinxcrossref{buildRATPscene}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id16}}{\hyperref[\detokenize{reference:module-defaultvalues}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-defaultvalues}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{defaultvalues}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id17}}{\hyperref[\detokenize{reference:defaultvalues}]{\sphinxcrossref{defaultvalues}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id18}}{\hyperref[\detokenize{reference:module-leafangles}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-leafangles}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{leafangles}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id19}}{\hyperref[\detokenize{reference:leafangles}]{\sphinxcrossref{leafangles}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id20}}{\hyperref[\detokenize{reference:module-outputs}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-outputs}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{outputs}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id21}}{\hyperref[\detokenize{reference:outputs}]{\sphinxcrossref{outputs}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id22}}{\hyperref[\detokenize{reference:module-plantGL}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-plantGL}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{plantGL}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id23}}{\hyperref[\detokenize{reference:plantgl}]{\sphinxcrossref{plantGL}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id24}}{\hyperref[\detokenize{reference:module-sky}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-sky}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{sky}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id25}}{\hyperref[\detokenize{reference:sky}]{\sphinxcrossref{sky}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id26}}{\hyperref[\detokenize{reference:module-stems}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-stems}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{stems}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id27}}{\hyperref[\detokenize{reference:stems}]{\sphinxcrossref{stems}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id28}}{\hyperref[\detokenize{reference:module-sun}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-sun}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{sun}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id29}}{\hyperref[\detokenize{reference:sun}]{\sphinxcrossref{sun}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id30}}{\hyperref[\detokenize{reference:module-tesselator}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-tesselator}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{tesselator}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id31}}{\hyperref[\detokenize{reference:tesselator}]{\sphinxcrossref{tesselator}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id32}}{\hyperref[\detokenize{reference:module-transfer}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-transfer}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{transfer}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id33}}{\hyperref[\detokenize{reference:transfer}]{\sphinxcrossref{transfer}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id34}}{\hyperref[\detokenize{reference:module-trianglesmesh}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-trianglesmesh}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{trianglesmesh}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id35}}{\hyperref[\detokenize{reference:trianglesmesh}]{\sphinxcrossref{trianglesmesh}}}

\end{itemize}

\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id36}}{\hyperref[\detokenize{reference:module-voxelsmesh}]{\sphinxcrossref{{\hyperref[\detokenize{reference:module-voxelsmesh}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{voxelsmesh}}}}} module}}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\phantomsection\label{\detokenize{reference:id37}}{\hyperref[\detokenize{reference:voxelsmesh}]{\sphinxcrossref{voxelsmesh}}}

\end{itemize}

\end{itemize}

\end{itemize}
\end{sphinxShadowBox}


\subsection{\sphinxstyleliteralintitle{\sphinxupquote{LVM}} module}
\label{\detokenize{reference:module-LVM}}\label{\detokenize{reference:lvm-module}}\index{module@\spxentry{module}!LVM@\spxentry{LVM}}\index{LVM@\spxentry{LVM}!module@\spxentry{module}}

\subsubsection{LightVegeManager}
\label{\detokenize{reference:lightvegemanager}}
\sphinxAtStartPar
Main class of the tool. Calls all the other modules in \sphinxcode{\sphinxupquote{src}}.

\sphinxAtStartPar
3 inputs dict for setting all parameters:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{scene0}\PYG{p}{,} \PYG{n}{scene1}\PYG{p}{,} \PYG{n}{scene2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]} \PYG{p}{,}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{domain}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{(}\PYG{p}{(}\PYG{n}{xmin}\PYG{p}{,} \PYG{n}{ymin}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{n}{xmax}\PYG{p}{,} \PYG{n}{ymax}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{stems id}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{p}{(}\PYG{n}{id\PYGZus{}element}\PYG{p}{,} \PYG{n}{id\PYGZus{}scene}\PYG{p}{)}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{transformations}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{\PYGZob{}}
                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes unit}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg} \PYG{p}{,}
                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rescale}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg} \PYG{p}{,}
                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{translate}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg} \PYG{p}{,}
                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{xyz orientation}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg}
                                    \PYG{p}{\PYGZcb{}}
                \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{environment} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{coordinates}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{latitude}\PYG{p}{,} \PYG{n}{longitude}\PYG{p}{,} \PYG{n}{timezone}\PYG{p}{]} \PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{turtle46}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{filepath}\PYG{p}{]} \PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sky}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{nb\PYGZus{}azimut}\PYG{p}{,} \PYG{n}{nb\PYGZus{}zenith}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soc}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o+ow}{or} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{uoc}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{direct}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} sun radiations}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{diffus}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} sky radiations}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflected}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} reflected radiation in the canopy}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infinite}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,} \PYG{c+c1}{\PYGZsh{} infinitisation of the scene}
                \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Currently LightVegeManager handles the light models RATP and CARIBU:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{caribu\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{\PYGZob{}}
                                    \PYG{n}{band0} \PYG{o}{=} \PYG{p}{(}\PYG{n}{reflectance}\PYG{p}{,} \PYG{n}{transmittance}\PYG{p}{)}\PYG{p}{,}
                                    \PYG{n}{band1} \PYG{o}{=} \PYG{p}{(}\PYG{n}{reflectance}\PYG{p}{,} \PYG{n}{transmittance}\PYG{p}{)}\PYG{p}{,}
                                    \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
                                    \PYG{p}{\PYGZcb{}}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{debug}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil mesh}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}
                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sensors}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{dxyz}\PYG{p}{,} \PYG{n}{nxyz}\PYG{p}{,} \PYG{n}{orig}\PYG{p}{,} \PYG{n}{vtkpath}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vtk}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{ratp\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{c+c1}{\PYGZsh{} Grid specifications}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{dx}\PYG{p}{,} \PYG{n}{dy}\PYG{p}{,} \PYG{n}{dz}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dynamic}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{xorigin}\PYG{p}{,} \PYG{n}{yorigin}\PYG{p}{,} \PYG{n}{zorigin}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{xorigin}\PYG{p}{,} \PYG{n}{yorigin}\PYG{p}{]}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{number voxels}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{nx}\PYG{p}{,} \PYG{n}{ny}\PYG{p}{,} \PYG{n}{nz}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid slicing}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ground = 0.}\PYG{l+s+s2}{\PYGZdq{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tesselation level}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{int}

                \PYG{c+c1}{\PYGZsh{} Leaf angle distribution}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute global}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute voxel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{nb angle classes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib file}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{filepath}\PYG{p}{,}

                \PYG{c+c1}{\PYGZsh{} Vegetation type}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil reflectance}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{reflectance\PYGZus{}band0}\PYG{p}{,} \PYG{n}{reflectance\PYGZus{}band1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflectance coefficients}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{reflectance\PYGZus{}band0}\PYG{p}{,} \PYG{n}{reflectance\PYGZus{}band1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mu}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{mu\PYGZus{}scene0}\PYG{p}{,} \PYG{n}{mu\PYGZus{}scene1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}
            \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\sphinxstrong{See also:}
\nopagebreak


\sphinxAtStartPar
For more details {\hyperref[\detokenize{inputs:inputs}]{\sphinxcrossref{\DUrole{std,std-ref}{Inputs description}}}}


\index{LightVegeManager (class in LVM)@\spxentry{LightVegeManager}\spxextra{class in LVM}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{class\DUrole{w}{  }}}\sphinxcode{\sphinxupquote{LVM.}}\sphinxbfcode{\sphinxupquote{LightVegeManager}}}{\emph{\DUrole{n}{environment}\DUrole{o}{=}\DUrole{default_value}{\{\}}}, \emph{\DUrole{n}{lightmodel}\DUrole{o}{=}\DUrole{default_value}{\textquotesingle{}\textquotesingle{}}}, \emph{\DUrole{n}{lightmodel\_parameters}\DUrole{o}{=}\DUrole{default_value}{\{\}}}, \emph{\DUrole{n}{main\_unit}\DUrole{o}{=}\DUrole{default_value}{\textquotesingle{}m\textquotesingle{}}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{object}}

\sphinxAtStartPar
Main class for the tool LightVegeManager

\sphinxAtStartPar
Common simulation order:

\sphinxAtStartPar
\sphinxcode{\sphinxupquote{input geometries \sphinxhyphen{}\textgreater{} build and prepare data \sphinxhyphen{}\textgreater{} call light model \sphinxhyphen{}\textgreater{} transfer results to plant models}}

\sphinxAtStartPar
It includes:
\begin{quote}

\sphinxAtStartPar
Main methods:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\_\_init\_\_}}: initializes and builds static object for the rest of simulation

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.build}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{build()}}}}}: builds and prepare all geometric meshes

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{run()}}}}}: calls a light model and manages its inputs and outputs

\end{itemize}

\sphinxAtStartPar
Transfer methods:
\begin{itemize}
\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.to_MTG}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{to\_MTG()}}}}}: transfers ligthing results to a MTG table

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.to_l_egume}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{to\_l\_egume()}}}}}: transfers ligthing results to l\sphinxhyphen{}egume by creating two arrays as inputs for the plant model

\end{itemize}

\sphinxAtStartPar
Analysis tools: analyses a set of triangles and formats them as a turbid medium inputs
\begin{itemize}
\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.s5}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{s5()}}}}}: fortran tool

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.s2v}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{s2v()}}}}}: c++ tool

\end{itemize}

\sphinxAtStartPar
Visualisation tools:
\begin{itemize}
\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.plantGL_nolight}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{plantGL\_nolight()}}}}}: return a plantGL scene from the geometry

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.plantGL_light}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{plantGL\_light()}}}}}: return a plantGL scene from the geometry with lighting results

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.plantGL_sensors}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{plantGL\_sensors()}}}}}: return a plantGL scene from virtual sensors if created

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.VTK_nolight}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{VTK\_nolight()}}}}}: write VTK file with only geometric informations

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.VTK_light}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{VTK\_light()}}}}}: write VTK file with geometric informations and associated light results

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.VTK_sun}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{VTK\_sun()}}}}}: write VTK file representing the sun as a line

\end{itemize}

\sphinxAtStartPar
Getters: to use light results with external routines
\begin{itemize}
\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.riri5_transmitted_light}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{riri5\_transmitted\_light()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.riri5_intercepted_light}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{riri5\_intercepted\_light()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.elements_outputs}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{elements\_outputs()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.triangles_outputs}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{triangles\_outputs()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.voxels_outputs}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{voxels\_outputs()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.sensors_outputs}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{sensors\_outputs()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:module-sun}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{sun()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.soilenergy}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{soilenergy()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.maxtrianglearea}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{maxtrianglearea()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.legume_empty_layers}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{legume\_empty\_layers()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.tesselationtime}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{tesselationtime()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.modelruntime}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{modelruntime()}}}}}

\item {} 
\sphinxAtStartPar
{\hyperref[\detokenize{reference:LVM.LightVegeManager.leafangledistribution}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{leafangledistribution()}}}}}

\end{itemize}
\end{quote}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{environment}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} Environment parameters, defaults to \{\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{lightmodel}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} either \sphinxcode{\sphinxupquote{"ratp"}} or \sphinxcode{\sphinxupquote{"caribu"}}, defaults to “”

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{lightmodel\_parameters}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} light model parameters, defaults to \{\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{main\_unit}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} measure unit for the global scene where the light will be computed, defaults to “m”

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} lightmodel entry not valid, either \sphinxcode{\sphinxupquote{\textquotesingle{}ratp\textquotesingle{}}} or \sphinxcode{\sphinxupquote{\textquotesingle{}caribu\textquotesingle{}}}

\end{description}\end{quote}
\index{build() (LVM.LightVegeManager method)@\spxentry{build()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.build}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{build}}}{\emph{\DUrole{n}{geometry}\DUrole{o}{=}\DUrole{default_value}{\{\}}}, \emph{\DUrole{n}{global\_scene\_tesselate\_level}\DUrole{o}{=}\DUrole{default_value}{0}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Builds a mesh of the simulation scene in the right light model format
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{geometry}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} geometric parameters, contains geometric scenes, defaults to \{\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{global\_scene\_tesselate\_level}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} option to subdivide all triangles of the mesh a certain number of times (to fine tuning the mesh), defaults to 0

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} Currently, converting voxels mesh to triangles mesh is not possible

\end{description}\end{quote}

\end{fulllineitems}

\index{run() (LVM.LightVegeManager method)@\spxentry{run()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.run}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{run}}}{\emph{\DUrole{n}{energy}\DUrole{o}{=}\DUrole{default_value}{0.0}}, \emph{\DUrole{n}{day}\DUrole{o}{=}\DUrole{default_value}{0}}, \emph{\DUrole{n}{hour}\DUrole{o}{=}\DUrole{default_value}{0}}, \emph{\DUrole{n}{parunit}\DUrole{o}{=}\DUrole{default_value}{\textquotesingle{}micromol.m\sphinxhyphen{}2.s\sphinxhyphen{}1\textquotesingle{}}}, \emph{\DUrole{n}{truesolartime}\DUrole{o}{=}\DUrole{default_value}{False}}, \emph{\DUrole{n}{id\_sensors}\DUrole{o}{=}\DUrole{default_value}{None}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Calls the light model and formats lighting results
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{energy}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} input radiation energy, defaults to 0

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{day}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} simulation day, defaults to 0

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{hour}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} simulation hour, defaults to 0

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{parunit}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} input energy unit, light models manages radiations in different unit, you can precise input unit and LightVegeManager will convert it in the right unit, defaults to “micromol.m\sphinxhyphen{}2.s\sphinxhyphen{}1”

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{truesolartime}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} simulation hour is a true solar time or local time (depending on simulation coordinates), defaults to False

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{id\_sensors}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} if you use CARIBU with a grid of virtual sensors, you have to precise which input scenes the grid must match, defaults to None

\end{itemize}

\sphinxlineitem{Raises}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} with CARIBU you can precise the sun algorithm to calculate sun position, can be either \sphinxcode{\sphinxupquote{"caribu"}} or \sphinxcode{\sphinxupquote{"ratp"}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} valid radiations are \sphinxcode{\sphinxupquote{"direct"}}, \sphinxcode{\sphinxupquote{"diffuse"}}, \sphinxcode{\sphinxupquote{"reflected"}}

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{to\_MTG() (LVM.LightVegeManager method)@\spxentry{to\_MTG()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.to_MTG}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{to\_MTG}}}{\emph{\DUrole{n}{energy}\DUrole{o}{=}\DUrole{default_value}{1.0}}, \emph{\DUrole{n}{mtg}\DUrole{o}{=}\DUrole{default_value}{None}}, \emph{\DUrole{n}{id}\DUrole{o}{=}\DUrole{default_value}{None}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Transfers lighting results to a MTG table.

\begin{sphinxadmonition}{warning}{Warning:}
\sphinxAtStartPar
The {\hyperref[\detokenize{reference:LVM.LightVegeManager.run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{run()}}}}} must have been called before to have results dataframes.
\end{sphinxadmonition}

\sphinxAtStartPar
Results are \sphinxcode{\sphinxupquote{pandas.Dataframe}} stored in the \sphinxcode{\sphinxupquote{self}}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{energy}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} input energy, defaults to 1

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{mtg}} (\sphinxstyleliteralemphasis{\sphinxupquote{MTG}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} MTG table with \sphinxcode{\sphinxupquote{"PARa"}} and \sphinxcode{\sphinxupquote{"Erel"}} entries in its properties, defaults to None

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{id}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ or }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} you can precise to which input scenes the MTG table corresponds, defaults to None

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{AttributeError}} \textendash{} you need to call :func:run first

\end{description}\end{quote}

\end{fulllineitems}

\index{to\_l\_egume() (LVM.LightVegeManager method)@\spxentry{to\_l\_egume()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.to_l_egume}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{to\_l\_egume}}}{\emph{\DUrole{n}{energy}\DUrole{o}{=}\DUrole{default_value}{1.0}}, \emph{\DUrole{n}{m\_lais}\DUrole{o}{=}\DUrole{default_value}{{[}{]}}}, \emph{\DUrole{n}{list\_lstring}\DUrole{o}{=}\DUrole{default_value}{{[}{]}}}, \emph{\DUrole{n}{list\_dicFeuilBilanR}\DUrole{o}{=}\DUrole{default_value}{{[}{]}}}, \emph{\DUrole{n}{list\_invar}\DUrole{o}{=}\DUrole{default_value}{{[}{]}}}, \emph{\DUrole{n}{id}\DUrole{o}{=}\DUrole{default_value}{None}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Transfers lighting results to l\sphinxhyphen{}egume

\begin{sphinxadmonition}{warning}{Warning:}
\sphinxAtStartPar
The {\hyperref[\detokenize{reference:LVM.LightVegeManager.run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{run()}}}}} must have been called before to have results dataframes.
\end{sphinxadmonition}

\begin{sphinxadmonition}{warning}{Warning:}
\sphinxAtStartPar
l\sphinxhyphen{}egume needs transmitted energy informations located in a grid of voxels. You need to have the same dimensions in the lighting results.
\begin{itemize}
\item {} 
\sphinxAtStartPar
With RATP, RATP grid must have the same dimensions as l\sphinxhyphen{}egume intern grid.

\item {} 
\sphinxAtStartPar
With CARIBU, you must create a grid of virtual sensors in the same dimensions as l\sphinxhyphen{}egume intern grid.

\end{itemize}
\end{sphinxadmonition}

\sphinxAtStartPar
Results are \sphinxcode{\sphinxupquote{pandas.Dataframe}} stored in the \sphinxcode{\sphinxupquote{self}}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{energy}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} input energy, defaults to 1

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{m\_lais}} (\sphinxstyleliteralemphasis{\sphinxupquote{numpy.array}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} leaf area represented in a numpy.array of dimension {[}number of species, number of z layers, number of y layers, number of x layers{]}, defaults to {[}{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{list\_lstring}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} from l\sphinxhyphen{}egume, each element corresponds to an input specy of l\sphinxhyphen{}egume. Each element is a dict lstring stores the l\sphinxhyphen{}system of each plant, defaults to {[}{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{list\_dicFeuilBilanR}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} from l\sphinxhyphen{}egume, each element corresponds to an input specy of l\sphinxhyphen{}egume. Each element is a dict dicFeuiBilanR stores correspondances between voxels grid and each plant, defaults to {[}{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{list\_invar}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} from l\sphinxhyphen{}egume, each element corresponds to an input specy of l\sphinxhyphen{}egume. Each element is a dict invar stores instant intern variables of l\sphinxhyphen{}egume., defaults to {[}{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{id}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} list of indices from input scenes which corresponds to current l\sphinxhyphen{}egume instance. If you have several plantmodel among the input scenes, you need to precise which results you want to transfer to which instance of l\sphinxhyphen{}egume. defaults to None

\end{itemize}

\sphinxlineitem{Raises}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{AttributeError}} \textendash{} you need to call {\hyperref[\detokenize{reference:LVM.LightVegeManager.run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{run()}}}}} first

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} unknown light model

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar

\sphinxAtStartPar
if light model is RATP \sphinxcode{\sphinxupquote{transfer\_ratp\_legume()}} :
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{res\_abs\_i}}: absorbed energy in each voxels of a grid matching the dimensions of l\sphinxhyphen{}egume intern grid of voxels. One value for each specy.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{res\_trans}}: transmitted energy in each voxels of a grid matching the dimensions of l\sphinxhyphen{}egume intern grid of voxels

\end{itemize}

\sphinxAtStartPar
if light model is CARIBU :func:transfer\_caribu\_legume :
\begin{itemize}
\item {} 
\sphinxAtStartPar
update of list\_invar: updates the keys \sphinxcode{\sphinxupquote{"parap"}} and \sphinxcode{\sphinxupquote{"parip"}} for each specy. Cumulatative energy per plant

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{res\_trans}}: transmitted energy in each voxels of a grid matching the dimensions of l\sphinxhyphen{}egume intern grid of voxels

\end{itemize}


\sphinxlineitem{Return type}
\sphinxAtStartPar
numpy.array

\end{description}\end{quote}

\end{fulllineitems}

\index{s5() (LVM.LightVegeManager method)@\spxentry{s5()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.s5}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{s5}}}{}{}
\pysigstopsignatures
\sphinxAtStartPar
Creates inputs files for s5 and runs it
s5 is an external tool made to analyse a set of triangles in order to use a grid of voxels.
It also computes leaf angle distribution from the triangulation

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
All files are located in \sphinxcode{\sphinxupquote{s5}} folder
\end{sphinxadmonition}

\sphinxAtStartPar
\sphinxstylestrong{Input files created}
\begin{itemize}
\item {} 
\sphinxAtStartPar
fort.51: contains triangulation. Possibility to precise stem elements it is registered in the instance of LightVegeManager

\item {} 
\sphinxAtStartPar
s5.par: stores grid of voxels informations and number of entities

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Output files created}
\begin{itemize}
\item {} 
\sphinxAtStartPar
fort.60
\begin{quote}

\sphinxAtStartPar
dimensions xy of the grid

\sphinxAtStartPar
stats by specy
\begin{itemize}
\item {} 
\sphinxAtStartPar
total leaf area

\item {} 
\sphinxAtStartPar
leaf area index

\item {} 
\sphinxAtStartPar
global zenital leaf angle distribution

\item {} 
\sphinxAtStartPar
global azimutal leaf angle distribution

\end{itemize}

\sphinxAtStartPar
stats by voxels
\begin{itemize}
\item {} 
\sphinxAtStartPar
\#specy | \#ix | \#iy | \#iz (coordinate xyz of the voxel) | eaf area density

\item {} 
\sphinxAtStartPar
local zenital leaf angle distribution

\item {} 
\sphinxAtStartPar
local azimutal leaf angle distribution

\end{itemize}
\end{quote}

\item {} 
\sphinxAtStartPar
leafarea: for each specy, for each voxel
\begin{quote}

\sphinxAtStartPar
ix | iy | iz | \#specy | LAD | zenital\sphinxhyphen{}distribution | azimutal\sphinxhyphen{}distribution
\end{quote}

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{example}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{myscene} \PYG{c+c1}{\PYGZsh{} a plantgl Scene}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{testofs5} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} create a instance}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{testofs5}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(} \PYG{n}{geometry}\PYG{o}{=}\PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{myscene}\PYG{p}{]} \PYG{p}{\PYGZcb{}} \PYG{p}{)} \PYG{c+c1}{\PYGZsh{} build the geometry}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{testofs5}\PYG{o}{.}\PYG{n}{s5}\PYG{p}{(}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} run of s5, creates input and output files}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{s2v() (LVM.LightVegeManager method)@\spxentry{s2v()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.s2v}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{s2v}}}{}{}
\pysigstopsignatures
\sphinxAtStartPar
Creates inputs files for s2v and runs it
s5 is an external tool made to analyse a set of triangles in order to use a grid of voxels.
It also computes leaf angle distribution from the triangulation

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
All files are located in \sphinxcode{\sphinxupquote{s2v}} folder
\end{sphinxadmonition}

\sphinxAtStartPar
\sphinxstylestrong{Input files created}
\begin{itemize}
\item {} 
\sphinxAtStartPar
fort.51: stores triangulation. Possibility to precise stem elements it is registered in the instance of LightVegeManager

\item {} 
\sphinxAtStartPar
s2v.par: stores grid of voxels informations and number of entities

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Output files created}
\begin{itemize}
\item {} 
\sphinxAtStartPar
s2v.log
\begin{quote}

\sphinxAtStartPar
logs about processing

\sphinxAtStartPar
global statistics
\begin{itemize}
\item {} 
\sphinxAtStartPar
total leaf area per specy

\item {} 
\sphinxAtStartPar
total leaf area

\item {} 
\sphinxAtStartPar
leaf area index

\item {} 
\sphinxAtStartPar
global zenital leaf angle distribution

\end{itemize}
\end{quote}

\item {} 
\sphinxAtStartPar
s2v.can
\begin{quote}

\sphinxAtStartPar
z layer where each triangle is located (and copy its vertices)
\end{quote}

\item {} 
\sphinxAtStartPar
s2v.area
\begin{quote}

\sphinxAtStartPar
triangle id | z layer | triangle area
\end{quote}

\item {} 
\sphinxAtStartPar
out.dang: SAIL file
\begin{quote}

\sphinxAtStartPar
line 1: global leaf area index for specy 1
line 2: global zenital leaf angle distribution for specy 1
\end{quote}

\item {} 
\sphinxAtStartPar
leafarea: SAIL file
\begin{quote}

\sphinxAtStartPar
each line: 0 | idz | leaf area index for each slope class in current z layer | 0 | 0 | leaf area density on the layer
\end{quote}

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{example}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{myscene} \PYG{c+c1}{\PYGZsh{} a plantgl Scene}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{testofs2v} \PYG{o}{=} \PYG{n}{LightVegeManager}\PYG{p}{(}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} create a instance}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{testofs2v}\PYG{o}{.}\PYG{n}{build}\PYG{p}{(} \PYG{n}{geometry}\PYG{o}{=}\PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{myscene}\PYG{p}{]} \PYG{p}{\PYGZcb{}} \PYG{p}{)} \PYG{c+c1}{\PYGZsh{} build the geometry}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{testofs2v}\PYG{o}{.}\PYG{n}{s2v}\PYG{p}{(}\PYG{p}{)} \PYG{c+c1}{\PYGZsh{} run of s2v, creates input and output files}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{VTK\_nolight() (LVM.LightVegeManager method)@\spxentry{VTK\_nolight()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.VTK_nolight}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{VTK\_nolight}}}{\emph{\DUrole{n}{path}}, \emph{\DUrole{n}{i}\DUrole{o}{=}\DUrole{default_value}{None}}, \emph{\DUrole{n}{printtriangles}\DUrole{o}{=}\DUrole{default_value}{True}}, \emph{\DUrole{n}{printvoxels}\DUrole{o}{=}\DUrole{default_value}{True}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Writes a VTK from mesh(es) in \sphinxcode{\sphinxupquote{self}}, with only geometric informations
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{path}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} file and path name

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{i}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} associate the created file with an indice in its filename, defaults to None

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{printtriangles}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} write triangulation if one has been created in :func:build, defaults to True

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{printvoxels}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} write grid of voxels if one has been created in :func:build, defaults to True

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{VTK\_light() (LVM.LightVegeManager method)@\spxentry{VTK\_light()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.VTK_light}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{VTK\_light}}}{\emph{\DUrole{n}{path}}, \emph{\DUrole{n}{i}\DUrole{o}{=}\DUrole{default_value}{None}}, \emph{\DUrole{n}{printtriangles}\DUrole{o}{=}\DUrole{default_value}{True}}, \emph{\DUrole{n}{printvoxels}\DUrole{o}{=}\DUrole{default_value}{True}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Writes a VTK from mesh(es) in \sphinxcode{\sphinxupquote{self}}, with geometric informations and lighting results

\begin{sphinxadmonition}{warning}{Warning:}
\sphinxAtStartPar
The {\hyperref[\detokenize{reference:LVM.LightVegeManager.run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{run()}}}}} must have been called before to have results dataframes.
\end{sphinxadmonition}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{path}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} file and path name

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{i}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} associate the created file with an indice in its filename, defaults to None

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{printtriangles}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} write triangulation if one has been created in {\hyperref[\detokenize{reference:LVM.LightVegeManager.build}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{build()}}}}}, defaults to True

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{printvoxels}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} write grid of voxels if one has been created in {\hyperref[\detokenize{reference:LVM.LightVegeManager.build}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{build()}}}}}, defaults to True

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{AttributeError}} \textendash{} you need to call {\hyperref[\detokenize{reference:LVM.LightVegeManager.run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{run()}}}}} first

\end{description}\end{quote}

\end{fulllineitems}

\index{VTK\_sun() (LVM.LightVegeManager method)@\spxentry{VTK\_sun()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.VTK_sun}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{VTK\_sun}}}{\emph{\DUrole{n}{path}}, \emph{\DUrole{n}{scale}\DUrole{o}{=}\DUrole{default_value}{2}}, \emph{\DUrole{n}{orig}\DUrole{o}{=}\DUrole{default_value}{(0, 0, 0)}}, \emph{\DUrole{n}{center}\DUrole{o}{=}\DUrole{default_value}{True}}, \emph{\DUrole{n}{i}\DUrole{o}{=}\DUrole{default_value}{None}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Write a VTK file representing the sun by a simple line

\begin{sphinxadmonition}{warning}{Warning:}
\sphinxAtStartPar
The {\hyperref[\detokenize{reference:LVM.LightVegeManager.run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{run()}}}}} must have been called before to have results dataframes.
\end{sphinxadmonition}

\sphinxAtStartPar
if center is False, orig is the starting point the line and it ends at orig + scale*sun.position

\sphinxAtStartPar
if center is True, orig is the middle point of the line.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{path}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} file and path name

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{scale}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} size of the line, defaults to 2

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{orig}} (\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} starting or middle point of the line, defaults to (0,0,0)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{center}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} if True orig is the middle of the line, otherwise it is the starting point, defaults to True

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{i}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} associate the created file with an indice in its filename, defaults to None

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{AttributeError}} \textendash{} you need to call {\hyperref[\detokenize{reference:LVM.LightVegeManager.run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{run()}}}}} first

\end{description}\end{quote}

\end{fulllineitems}

\index{plantGL\_sensors() (LVM.LightVegeManager method)@\spxentry{plantGL\_sensors()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.plantGL_sensors}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{plantGL\_sensors}}}{\emph{\DUrole{n}{light}\DUrole{o}{=}\DUrole{default_value}{False}}}{}
\pysigstopsignatures
\end{fulllineitems}

\index{plantGL\_nolight() (LVM.LightVegeManager method)@\spxentry{plantGL\_nolight()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.plantGL_nolight}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{plantGL\_nolight}}}{\emph{\DUrole{n}{printtriangles}\DUrole{o}{=}\DUrole{default_value}{True}}, \emph{\DUrole{n}{printvoxels}\DUrole{o}{=}\DUrole{default_value}{False}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Return a plantGL Scene from mesh(es) in \sphinxcode{\sphinxupquote{self}}, with geometric informations
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{printtriangles}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} write triangulation if one has been created in {\hyperref[\detokenize{reference:LVM.LightVegeManager.build}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{build()}}}}}, defaults to True

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{printvoxels}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} write grid of voxels if one has been created in {\hyperref[\detokenize{reference:LVM.LightVegeManager.build}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{build()}}}}}, defaults to True

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{plantGL\_light() (LVM.LightVegeManager method)@\spxentry{plantGL\_light()}\spxextra{LVM.LightVegeManager method}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.plantGL_light}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{plantGL\_light}}}{\emph{\DUrole{n}{printtriangles}\DUrole{o}{=}\DUrole{default_value}{True}}, \emph{\DUrole{n}{printvoxels}\DUrole{o}{=}\DUrole{default_value}{False}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Return a plantGL Scene from mesh(es) in \sphinxcode{\sphinxupquote{self}}, with geometric informations and lighting results

\begin{sphinxadmonition}{warning}{Warning:}
\sphinxAtStartPar
The {\hyperref[\detokenize{reference:LVM.LightVegeManager.run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{run()}}}}} must have been called before to have results dataframes.
\end{sphinxadmonition}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{printtriangles}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} write triangulation if one has been created in {\hyperref[\detokenize{reference:LVM.LightVegeManager.build}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{build()}}}}}, defaults to True

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{printvoxels}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} write grid of voxels if one has been created in {\hyperref[\detokenize{reference:LVM.LightVegeManager.build}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{build()}}}}}, defaults to True

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{AttributeError}} \textendash{} you need to call {\hyperref[\detokenize{reference:LVM.LightVegeManager.run}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{run()}}}}} first

\end{description}\end{quote}

\end{fulllineitems}

\index{riri5\_transmitted\_light (LVM.LightVegeManager property)@\spxentry{riri5\_transmitted\_light}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.riri5_transmitted_light}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{riri5\_transmitted\_light}}}
\pysigstopsignatures
\sphinxAtStartPar
transmitted results if light model is RiRi light
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
transmitted energy following a grid of voxels

\sphinxlineitem{Return type}
\sphinxAtStartPar
numpy.array

\end{description}\end{quote}

\end{fulllineitems}

\index{riri5\_intercepted\_light (LVM.LightVegeManager property)@\spxentry{riri5\_intercepted\_light}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.riri5_intercepted_light}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{riri5\_intercepted\_light}}}
\pysigstopsignatures
\sphinxAtStartPar
Intercepted results if light model is RiRi light,
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
intercepted energy following a grid of voxels, for each specy

\sphinxlineitem{Return type}
\sphinxAtStartPar
numpy.array

\end{description}\end{quote}

\end{fulllineitems}

\index{elements\_outputs (LVM.LightVegeManager property)@\spxentry{elements\_outputs}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.elements_outputs}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{elements\_outputs}}}
\pysigstopsignatures
\sphinxAtStartPar
Lighting results aggregate by element
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
Column names can change depending on the light model. Commonly, there is element indice, its area and intercepted energy

\sphinxlineitem{Return type}
\sphinxAtStartPar
pandas.Dataframe

\end{description}\end{quote}

\end{fulllineitems}

\index{triangles\_outputs (LVM.LightVegeManager property)@\spxentry{triangles\_outputs}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.triangles_outputs}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{triangles\_outputs}}}
\pysigstopsignatures
\sphinxAtStartPar
Lighting results aggregate by triangle, if it has a triangulation in its inputs
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar


\sphinxstrong{See also:}
\nopagebreak


\sphinxAtStartPar
{\hyperref[\detokenize{reference:module-outputs}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{outputs}}}}} for column names




\sphinxlineitem{Return type}
\sphinxAtStartPar
pandas.Dataframe

\end{description}\end{quote}

\end{fulllineitems}

\index{voxels\_outputs (LVM.LightVegeManager property)@\spxentry{voxels\_outputs}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.voxels_outputs}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{voxels\_outputs}}}
\pysigstopsignatures
\sphinxAtStartPar
Lighting results aggregate by voxels, only with RATP as the selected light model
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar


\sphinxstrong{See also:}
\nopagebreak


\sphinxAtStartPar
{\hyperref[\detokenize{reference:module-outputs}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{outputs}}}}} for column names




\sphinxlineitem{Return type}
\sphinxAtStartPar
pandas.Dataframe

\end{description}\end{quote}

\end{fulllineitems}

\index{sensors\_outputs (LVM.LightVegeManager property)@\spxentry{sensors\_outputs}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.sensors_outputs}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{sensors\_outputs}}}
\pysigstopsignatures
\sphinxAtStartPar
Lighting results aggregate by sensors.
Only with CARIBU if you activated the virtual sensors option
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
The output format is the same as CARIBU output format. Dict with \sphinxcode{\sphinxupquote{Eabs}} key for absorbed energy and \sphinxcode{\sphinxupquote{Ei}} for incoming energy

\sphinxlineitem{Return type}
\sphinxAtStartPar
dict

\end{description}\end{quote}

\end{fulllineitems}

\index{sun (LVM.LightVegeManager property)@\spxentry{sun}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.sun}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{sun}}}
\pysigstopsignatures
\sphinxAtStartPar
Return sun position of the last :func:run call
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
vector (x, y, z)

\sphinxlineitem{Return type}
\sphinxAtStartPar
tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{soilenergy (LVM.LightVegeManager property)@\spxentry{soilenergy}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.soilenergy}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{soilenergy}}}
\pysigstopsignatures
\sphinxAtStartPar
Return soil energy, only with CARIBU if soilmesh option is activated
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
The output format is the same as CARIBU output format. Dict with \sphinxcode{\sphinxupquote{Eabs}} key for absorbed energy and \sphinxcode{\sphinxupquote{Ei}} for incoming energy

\sphinxlineitem{Return type}
\sphinxAtStartPar
dict

\end{description}\end{quote}

\end{fulllineitems}

\index{maxtrianglearea (LVM.LightVegeManager property)@\spxentry{maxtrianglearea}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.maxtrianglearea}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{maxtrianglearea}}}
\pysigstopsignatures
\sphinxAtStartPar
Returns the largest triangle of triangles mesh
Computed in {\hyperref[\detokenize{reference:LVM.LightVegeManager.build}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{build()}}}}}
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
area the triangle

\sphinxlineitem{Return type}
\sphinxAtStartPar
float

\end{description}\end{quote}

\end{fulllineitems}

\index{legume\_empty\_layers (LVM.LightVegeManager property)@\spxentry{legume\_empty\_layers}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.legume_empty_layers}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{legume\_empty\_layers}}}
\pysigstopsignatures
\sphinxAtStartPar
Returns number of empty layers between top of the canopy and number of z layers expected by l\sphinxhyphen{}egume
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
result of \sphinxcode{\sphinxupquote{fill\_ratpgrid\_from\_legumescene()}}

\sphinxlineitem{Return type}
\sphinxAtStartPar
int

\end{description}\end{quote}

\end{fulllineitems}

\index{tesselationtime (LVM.LightVegeManager property)@\spxentry{tesselationtime}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.tesselationtime}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{tesselationtime}}}
\pysigstopsignatures
\sphinxAtStartPar
\_summary\_
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
\_description\_

\sphinxlineitem{Return type}
\sphinxAtStartPar
\_type\_

\end{description}\end{quote}

\end{fulllineitems}

\index{modelruntime (LVM.LightVegeManager property)@\spxentry{modelruntime}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.modelruntime}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{modelruntime}}}
\pysigstopsignatures
\sphinxAtStartPar
Returns running time of the light model
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
time in s

\sphinxlineitem{Return type}
\sphinxAtStartPar
float

\end{description}\end{quote}

\end{fulllineitems}

\index{leafangledistribution (LVM.LightVegeManager property)@\spxentry{leafangledistribution}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.leafangledistribution}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{leafangledistribution}}}
\pysigstopsignatures
\end{fulllineitems}

\index{domain (LVM.LightVegeManager property)@\spxentry{domain}\spxextra{LVM.LightVegeManager property}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:LVM.LightVegeManager.domain}}
\pysigstartsignatures
\pysigline{\sphinxbfcode{\sphinxupquote{property\DUrole{w}{  }}}\sphinxbfcode{\sphinxupquote{domain}}}
\pysigstopsignatures
\sphinxAtStartPar
Returns the largest triangle of triangles mesh
Computed in {\hyperref[\detokenize{reference:LVM.LightVegeManager.build}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{build()}}}}}
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
area the triangle

\sphinxlineitem{Return type}
\sphinxAtStartPar
float

\end{description}\end{quote}

\end{fulllineitems}


\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{CARIBUinputs}} module}
\label{\detokenize{reference:module-CARIBUinputs}}\label{\detokenize{reference:caribuinputs-module}}\index{module@\spxentry{module}!CARIBUinputs@\spxentry{CARIBUinputs}}\index{CARIBUinputs@\spxentry{CARIBUinputs}!module@\spxentry{module}}

\subsubsection{CARIBUinputs}
\label{\detokenize{reference:caribuinputs}}
\sphinxAtStartPar
Manages and prepares input information for CARIBU.

\sphinxAtStartPar
In this module we use two of the LightVegeManager’s inputs dict.
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{parameters}} corresponding to CARIBU parameters and contains
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{caribu\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ratp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sun algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{caribu opt}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{\PYGZob{}}
                                \PYG{n}{band0} \PYG{o}{=} \PYG{p}{(}\PYG{n}{reflectance}\PYG{p}{,} \PYG{n}{transmittance}\PYG{p}{)}\PYG{p}{,}
                                \PYG{n}{band1} \PYG{o}{=} \PYG{p}{(}\PYG{n}{reflectance}\PYG{p}{,} \PYG{n}{transmittance}\PYG{p}{)}\PYG{p}{,}
                                \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
                                \PYG{p}{\PYGZcb{}}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{debug}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil mesh}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}
                \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sensors}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{dxyz}\PYG{p}{,} \PYG{n}{nxyz}\PYG{p}{,} \PYG{n}{orig}\PYG{p}{,} \PYG{n}{vtkpath}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vtk}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}
                \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\end{quote}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{geometry}} corresponding to the geometric information with the scenes inputs
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{geometry} \PYG{o}{=} \PYG{p}{\PYGZob{}}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{scene0}\PYG{p}{,} \PYG{n}{scene1}\PYG{p}{,} \PYG{n}{scene2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]} \PYG{p}{,}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{domain}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{(}\PYG{p}{(}\PYG{n}{xmin}\PYG{p}{,} \PYG{n}{ymin}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{n}{xmax}\PYG{p}{,} \PYG{n}{ymax}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{stems id}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{p}{(}\PYG{n}{id\PYGZus{}element}\PYG{p}{,} \PYG{n}{id\PYGZus{}scene}\PYG{p}{)}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
            \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{transformations}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{\PYGZob{}}
                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenes unit}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg} \PYG{p}{,}
                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rescale}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg} \PYG{p}{,}
                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{translate}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg} \PYG{p}{,}
                                    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{xyz orientation}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{kwarg}
                                \PYG{p}{\PYGZcb{}}
            \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\end{quote}

\end{itemize}


\sphinxstrong{See also:}
\nopagebreak


\sphinxAtStartPar
For more details {\hyperref[\detokenize{inputs:inputs}]{\sphinxcrossref{\DUrole{std,std-ref}{Inputs description}}}}


\index{Prepare\_CARIBU() (in module CARIBUinputs)@\spxentry{Prepare\_CARIBU()}\spxextra{in module CARIBUinputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:CARIBUinputs.Prepare_CARIBU}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{CARIBUinputs.}}\sphinxbfcode{\sphinxupquote{Prepare\_CARIBU}}}{\emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{geometry}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{minmax}}, \emph{\DUrole{n}{parameters}}, \emph{\DUrole{n}{infinite}}, \emph{\DUrole{n}{idsensors}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Format optical parameters and prepare virtual sensors and debug if activated
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
triangles mesh aggregated by indice elements

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}} \PYG{n+nb}{id} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle1}\PYG{p}{,} \PYG{n}{triangle2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{geometry}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} geometric parameters from inputs of LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
dict that matches new element indices in trimesh with specy indice and
input element indice,

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{matching\PYGZus{}ids} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{n}{new\PYGZus{}element\PYGZus{}id} \PYG{p}{:} \PYG{p}{(}\PYG{n}{input\PYGZus{}element\PYGZus{}id}\PYG{p}{,} \PYG{n}{specy\PYGZus{}id}\PYG{p}{)}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{minmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{{[}}}\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{{]}}}) \textendash{} list of mininuml point and maximum point in a triangles mesh

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{parameters}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} RATP parameters from inputs of LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{infinite}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate infinitisation of the grid

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{idsensors}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} Sets which input scenes the grid of virtual sensors will match. 
Elements of this list refers to indices in the list \sphinxcode{\sphinxupquote{geometry{[}"scenes"{]}}}.
If no input indices are given, the grid will match the global scene \sphinxcode{\sphinxupquote{trimesh}}. 
Otherwise, you can match the grid to a specific set of input scenes

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
\begin{itemize}
\item {} \begin{description}
\sphinxlineitem{\sphinxcode{\sphinxupquote{opt}}: optical parameters formatted for CARIBU. It takes the form of dict, where each }
\sphinxAtStartPar
key is a bandlength (PAR, NIR etc…) and values are transmittance and reflectance
(or only reflectance for stems elements)

\end{description}

\item {} \begin{description}
\sphinxlineitem{\sphinxcode{\sphinxupquote{sensors\_caribu}}: geometric data of the virtual sensors in CARIBU scene format. Sensors}
\sphinxAtStartPar
are horizontal square made of two triangles

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{sensors\PYGZus{}caribu} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{n}{sensor\PYGZus{}id} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle1}\PYG{p}{,} \PYG{n}{triangle2}\PYG{p}{]}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\end{description}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{debug}}: boolean if user wants to activate th edebug option in CARIBU

\end{itemize}


\sphinxlineitem{Return type}
\sphinxAtStartPar
dict, dict, bool

\end{description}\end{quote}

\end{fulllineitems}

\index{CARIBU\_opticals() (in module CARIBUinputs)@\spxentry{CARIBU\_opticals()}\spxextra{in module CARIBUinputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:CARIBUinputs.CARIBU_opticals}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{CARIBUinputs.}}\sphinxbfcode{\sphinxupquote{CARIBU\_opticals}}}{\emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{parameters}}, \emph{\DUrole{n}{stems\_id}\DUrole{o}{=}\DUrole{default_value}{None}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Sets optical parameters for CARIBU from LightVegeManager inputs
It removes transmittance for stems elements if precised
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict that matches new element indices in trimesh with specy indice and
input element indice, \sphinxcode{\sphinxupquote{matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{parameters}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} RATP parameters from inputs of LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{stems\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{2\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} list of potential stems element in the input scenes, defaults to None

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
optical parameters formatted for CARIBU. It takes the form of dict, where each 
key is a bandlength (PAR, NIR etc…) and values are transmittance and reflectance
(or only reflectance for stems elements)

\sphinxlineitem{Return type}
\sphinxAtStartPar
dict

\end{description}\end{quote}

\end{fulllineitems}

\index{create\_caribu\_legume\_sensors() (in module CARIBUinputs)@\spxentry{create\_caribu\_legume\_sensors()}\spxextra{in module CARIBUinputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:CARIBUinputs.create_caribu_legume_sensors}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{CARIBUinputs.}}\sphinxbfcode{\sphinxupquote{create\_caribu\_legume\_sensors}}}{\emph{\DUrole{n}{dxyz}}, \emph{\DUrole{n}{nxyz}}, \emph{\DUrole{n}{orig}}, \emph{\DUrole{n}{pmax}}, \emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{id\_sensors}}, \emph{\DUrole{n}{infinite}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Creates a set of virtual sensors following a voxels grid
each sensor is a square made by two triangles and takes place on the bottom face of a voxel
The grid follow the xyz axis (and so the voxels)
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{dxyz}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} {[}dx, dy, dz{]} size of a voxel in each direction

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{nxyz}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} {[}nx, ny, nz{]} number of voxels on each axis

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{orig}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ (or }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{)}}) \textendash{} {[}x\_origin, y\_origin, z\_origin{]}, origin of the grid, cartesian coordinates

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{pmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{lsit}}\sphinxstyleliteralemphasis{\sphinxupquote{ (or }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{)}}) \textendash{} {[}x, y, z{]} maximum point of trimesh in the xyz space

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
triangles mesh aggregated by indice elements

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}} \PYG{n+nb}{id} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle1}\PYG{p}{,} \PYG{n}{triangle2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict that matches new element indices in trimesh with specy indice and
input element indice, \sphinxcode{\sphinxupquote{matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{idsensors}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} Sets which input scenes the grid of virtual sensors will match. 
Elements of this list refers to indices in the list \sphinxcode{\sphinxupquote{geometry{[}"scenes"{]}}}.
If no input indices are given, the grid will match the global scene \sphinxcode{\sphinxupquote{trimesh}}. 
Otherwise, you can match the grid to a specific set of input scenes

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{infinite}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate infinitisation of the grid

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar

\sphinxAtStartPar
it returns 3 objects:
\begin{itemize}
\item {} \begin{description}
\sphinxlineitem{\sphinxcode{\sphinxupquote{sensors\_caribu}}, geometric data of the virtual sensors in CARIBU scene format. Sensors}
\sphinxAtStartPar
are horizontal square made of two triangles \sphinxcode{\sphinxupquote{sensors\_caribu = \{ sensor\_id : {[}triangle1, triangle2{]}, ...\}}}

\end{description}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{s\_capt}}, PlantGL scene of the virtual sensors

\item {} \begin{description}
\sphinxlineitem{\sphinxcode{\sphinxupquote{sensors\_maxcenter}}, {[}x, y, z{]} representing point on the highest sensors layer and middle of}
\sphinxAtStartPar
xy plane in the grid

\end{description}

\end{itemize}


\sphinxlineitem{Return type}
\sphinxAtStartPar
dict, PlantGL scene, list

\end{description}\end{quote}

\end{fulllineitems}

\index{run\_caribu() (in module CARIBUinputs)@\spxentry{run\_caribu()}\spxextra{in module CARIBUinputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:CARIBUinputs.run_caribu}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{CARIBUinputs.}}\sphinxbfcode{\sphinxupquote{run\_caribu}}}{\emph{\DUrole{n}{c\_scene}}, \emph{\DUrole{n}{direct\_active}}, \emph{\DUrole{n}{infinite}}, \emph{\DUrole{n}{sensors}}, \emph{\DUrole{n}{energy}\DUrole{o}{=}\DUrole{default_value}{1.0}}}{}
\pysigstopsignatures
\sphinxAtStartPar
runs caribu depending on input options
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{c\_scene}} (\sphinxstyleliteralemphasis{\sphinxupquote{CaribuScene}}) \textendash{} instance of CaribuScene containing geometry, light source(s), opt etc…

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{direct\_active}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} Whether only first order interception is to be computed, default is True (no rediffusions)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{infinite}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate infinitisation of the grid

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{sensors}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
geometric data of the virtual sensors in CARIBU scene format. Sensors are horizontal square made of two triangles

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{sensors\PYGZus{}caribu} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{n}{sensor\PYGZus{}id} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle1}\PYG{p}{,} \PYG{n}{triangle2}\PYG{p}{]}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{energy}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional default is 1.}}) \textendash{} input energy value

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar

\sphinxAtStartPar
results are stored in two dict
\begin{itemize}
\item {} \begin{description}
\sphinxlineitem{raw (dict of dict) a \{band\_name: \{result\_name: property\}\} dict of dict.}
\sphinxAtStartPar
Except for result\_name=’sensors’, each property is a \{primitive\_id: {[}values,{]}\} dict containing results
for individual triangles of the primitive

\end{description}

\item {} \begin{description}
\sphinxlineitem{aggregated (dict of dict)}{[}a \{band\_name: \{result\_name: property\}\}{]}
\sphinxAtStartPar
Except for result\_name=’sensors’, each property is a \{primitive\_id: value\} dict containing aggregated
results for each primitive

\end{description}

\end{itemize}

\sphinxAtStartPar
result\_name are :
\begin{itemize}
\item {} 
\sphinxAtStartPar
area (float): the individual areas (m2)

\item {} 
\sphinxAtStartPar
Eabs (float): the surfacic density of energy absorbed (m\sphinxhyphen{}2)

\item {} 
\sphinxAtStartPar
Ei (float): the surfacic density of energy incoming  (m\sphinxhyphen{}2) additionally, if split\_face is True

\item {} 
\sphinxAtStartPar
Ei\_inf (float): the surfacic density of energy incoming on the inferior face (m\sphinxhyphen{}2)

\item {} 
\sphinxAtStartPar
Ei\_sup (float): the surfacic density of energy incoming on the superior face (m\sphinxhyphen{}2)

\item {} 
\sphinxAtStartPar
sensors (dict of dict): area, surfacic density of incoming direct energy and surfacic density of incoming total energy of sensors grouped by id, if any

\end{itemize}


\sphinxlineitem{Return type}
\sphinxAtStartPar
dict of dict, dict of dict

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{RATPinputs}} module}
\label{\detokenize{reference:module-RATPinputs}}\label{\detokenize{reference:ratpinputs-module}}\index{module@\spxentry{module}!RATPinputs@\spxentry{RATPinputs}}\index{RATPinputs@\spxentry{RATPinputs}!module@\spxentry{module}}

\subsubsection{RATPinputs}
\label{\detokenize{reference:ratpinputs}}
\sphinxAtStartPar
Manage vegetation and meteo input informations for RATP

\sphinxAtStartPar
The argument \sphinxtitleref{parameters} refers to one the three inputs dict of LightVegeManager. It is 
structured as so:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{ratp\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}}
        \PYG{c+c1}{\PYGZsh{} Grid specifications}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{dx}\PYG{p}{,} \PYG{n}{dy}\PYG{p}{,} \PYG{n}{dz}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dynamic}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{xorigin}\PYG{p}{,} \PYG{n}{yorigin}\PYG{p}{,} \PYG{n}{zorigin}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{xorigin}\PYG{p}{,} \PYG{n}{yorigin}\PYG{p}{]}\PYG{p}{,}

        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{number voxels}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{nx}\PYG{p}{,} \PYG{n}{ny}\PYG{p}{,} \PYG{n}{nz}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid slicing}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ground = 0.}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tesselation level}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{,}

        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{full grid}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{bool}\PYG{p}{,}

        \PYG{c+c1}{\PYGZsh{} Leaf angle distribution}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute global}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute voxel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{nb angle classes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib file}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{filepath}\PYG{p}{,}

        \PYG{c+c1}{\PYGZsh{} Vegetation type}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil reflectance}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{reflectance\PYGZus{}band0}\PYG{p}{,} \PYG{n}{reflectance\PYGZus{}band1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflectance coefficients}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{reflectance\PYGZus{}band0}\PYG{p}{,} \PYG{n}{reflectance\PYGZus{}band1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mu}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{mu\PYGZus{}scene0}\PYG{p}{,} \PYG{n}{mu\PYGZus{}scene1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}
    \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\sphinxstrong{See also:}
\nopagebreak


\sphinxAtStartPar
{\hyperref[\detokenize{inputs:inputs}]{\sphinxcrossref{\DUrole{std,std-ref}{Inputs description}}}}


\index{RATP\_vegetation() (in module RATPinputs)@\spxentry{RATP\_vegetation()}\spxextra{in module RATPinputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:RATPinputs.RATP_vegetation}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{RATPinputs.}}\sphinxbfcode{\sphinxupquote{RATP\_vegetation}}}{\emph{\DUrole{n}{parameters}}, \emph{\DUrole{n}{angle\_distrib}}, \emph{\DUrole{n}{reflected}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Initialise a RATP Vegetation object from LightVegeManager input datas
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{parameters}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} RATP parameters from inputs of LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{angle\_distrib}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} leaf angle distribution

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{reflected}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate reflected radiations

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
Vegetation types contains clumoing effect ratio, leaf angle distribution and reflectance/transmittance of leaves for each specy

\sphinxlineitem{Return type}
\sphinxAtStartPar
PyRATP.pyratp.vegetation.Vegetation

\end{description}\end{quote}

\end{fulllineitems}

\index{RATP\_meteo() (in module RATPinputs)@\spxentry{RATP\_meteo()}\spxextra{in module RATPinputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:RATPinputs.RATP_meteo}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{RATPinputs.}}\sphinxbfcode{\sphinxupquote{RATP\_meteo}}}{\emph{\DUrole{n}{energy}}, \emph{\DUrole{n}{day}}, \emph{\DUrole{n}{hour}}, \emph{\DUrole{n}{coordinates}}, \emph{\DUrole{n}{parunit}}, \emph{\DUrole{n}{truesolartime}}, \emph{\DUrole{n}{direct}}, \emph{\DUrole{n}{diffus}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Initialise a RATP MicroMeteo object from LightVegeManager input parameters
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{energy}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} input ray energy

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{day}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} input day

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{hour}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} input hour

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{coordinates}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} {[}latitude, longitude, timezone{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{parunit}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} unit of energy argument, “micromol.m\sphinxhyphen{}2.s\sphinxhyphen{}1” or else

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{truesolartime}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} activates true solar time or local time to compute sun position

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{direct}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if direct rays are activated

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{diffus}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if diffuse rays are activated

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
input meteorological data at current time step

\sphinxlineitem{Return type}
\sphinxAtStartPar
PyRATP.pyratp.micrometeo.MicroMeteo

\end{description}\end{quote}

\end{fulllineitems}

\index{RdRsH() (in module RATPinputs)@\spxentry{RdRsH()}\spxextra{in module RATPinputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:RATPinputs.RdRsH}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{RATPinputs.}}\sphinxbfcode{\sphinxupquote{RdRsH}}}{\emph{\DUrole{n}{Rg}}, \emph{\DUrole{n}{DOY}}, \emph{\DUrole{n}{heureTU}}, \emph{\DUrole{n}{latitude}}}{}
\pysigstopsignatures
\sphinxAtStartPar
fraction diffus/Global en fonction du rapport Global(Sgd)/Extraterrestre(Sod)\sphinxhyphen{} pas de temps horaire

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{VTK}} module}
\label{\detokenize{reference:module-VTK}}\label{\detokenize{reference:vtk-module}}\index{module@\spxentry{module}!VTK@\spxentry{VTK}}\index{VTK@\spxentry{VTK}!module@\spxentry{module}}

\subsubsection{VTK}
\label{\detokenize{reference:vtk}}
\sphinxAtStartPar
Writes VTK files from LightVegeManager geometry and lighting data. Used for visualisation
We recommend the software Paraview for visualisation
\index{VTKtriangles() (in module VTK)@\spxentry{VTKtriangles()}\spxextra{in module VTK}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:VTK.VTKtriangles}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{VTK.}}\sphinxbfcode{\sphinxupquote{VTKtriangles}}}{\emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{var}\DUrole{o}{=}\DUrole{default_value}{{[}{]}}}, \emph{\DUrole{n}{varname}\DUrole{o}{=}\DUrole{default_value}{{[}{]}}}, \emph{\DUrole{n}{filename}\DUrole{o}{=}\DUrole{default_value}{\textquotesingle{}\textquotesingle{}}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Writes VTK files from a triangulation mesh. Possibility to associate physical values to the triangles
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} 
\sphinxAtStartPar
triangles mesh aggregated by indice elements

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}} \PYG{n+nb}{id} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle1}\PYG{p}{,} \PYG{n}{triangle2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{var}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} 
\sphinxAtStartPar
list of physical values associated to each triangle. Each element of var is a physical value for each triangle.
Then, for n triangles and m values, var looks like:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{var} \PYG{o}{=} \PYG{p}{[}\PYG{p}{[}\PYG{n}{var1\PYGZus{}1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{,} \PYG{n}{var1\PYGZus{}n}\PYG{p}{]}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{,} \PYG{p}{[}\PYG{n}{varm\PYGZus{}1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{,} \PYG{n}{varm\PYGZus{}n}\PYG{p}{]}\PYG{p}{]}
\end{sphinxVerbatim}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{varname}} (\sphinxstyleliteralemphasis{\sphinxupquote{lits}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} list of variable names

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{filename}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} name and path for the output file

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{VTKline() (in module VTK)@\spxentry{VTKline()}\spxextra{in module VTK}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:VTK.VTKline}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{VTK.}}\sphinxbfcode{\sphinxupquote{VTKline}}}{\emph{\DUrole{n}{start}}, \emph{\DUrole{n}{end}}, \emph{\DUrole{n}{filename}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Writes a VTK file representing a line
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{start}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} starting point \sphinxcode{\sphinxupquote{{[}x, y, z{]}}} of the line

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{end}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} ending point \sphinxcode{\sphinxupquote{{[}x, y, z{]}}} of the line

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{filename}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} name and path for the output file

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{ratp\_prepareVTK() (in module VTK)@\spxentry{ratp\_prepareVTK()}\spxextra{in module VTK}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:VTK.ratp_prepareVTK}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{VTK.}}\sphinxbfcode{\sphinxupquote{ratp\_prepareVTK}}}{\emph{\DUrole{n}{ratpgrid}}, \emph{\DUrole{n}{filename}}, \emph{\DUrole{n}{columns}\DUrole{o}{=}\DUrole{default_value}{{[}{]}}}, \emph{\DUrole{n}{df\_values}\DUrole{o}{=}\DUrole{default_value}{None}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Sets and prepare data to write a voxel grid in VTK format from a RATP grid

\sphinxAtStartPar
Possibility to sets physical values to each voxel. Otherwise, it will assign leaf area density
for each voxel.

\sphinxAtStartPar
Then, it runs :func:VTKvoxels to write a VTK file with the grid of voxels.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ratpgrid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} RAPT grid of voxels

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{filename}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} name and path for the output file

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{columns}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} list of columns name of \sphinxcode{\sphinxupquote{df\_values}} to associate to each voxel, defaults to {[}{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{df\_values}} (\sphinxstyleliteralemphasis{\sphinxupquote{pandas.Dataframe}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} dataframe with a \sphinxcode{\sphinxupquote{"Voxel"}} and a \sphinxcode{\sphinxupquote{"VegetationType"}} columns, matching ratpgrid. It stores physical values associated to each voxel that you want to print, defaults to None

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{VTKvoxels() (in module VTK)@\spxentry{VTKvoxels()}\spxextra{in module VTK}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:VTK.VTKvoxels}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{VTK.}}\sphinxbfcode{\sphinxupquote{VTKvoxels}}}{\emph{\DUrole{n}{grid}}, \emph{\DUrole{n}{datafields}}, \emph{\DUrole{n}{varnames}}, \emph{\DUrole{n}{nomfich}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Writes a VTK file with a grid of voxels and associated physical values.

\sphinxAtStartPar
Display Voxels colored by variable with Paraview

\sphinxAtStartPar
RATP Grid is written in VTK Format as a structured grid
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{grid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} the RATP grid

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{datafields}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} 
\sphinxAtStartPar
a list of 3 arrays composed of the a RATP variable to be plotted, corresponding entities, and Voxel ID
\begin{itemize}
\item {} 
\sphinxAtStartPar
{[}0{]} : kxyz (numpy.array)

\item {} 
\sphinxAtStartPar
{[}1{]} : entities (numpy.array)

\item {} 
\sphinxAtStartPar
{[}2, …, n{]} : variable\_0, … variable\_n\sphinxhyphen{}2 (numpy.array)

\end{itemize}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{varnames}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} name of the variable to be plotted

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{nomfich}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} the VTK filename and path

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{PlantGL\_to\_VTK() (in module VTK)@\spxentry{PlantGL\_to\_VTK()}\spxextra{in module VTK}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:VTK.PlantGL_to_VTK}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{VTK.}}\sphinxbfcode{\sphinxupquote{PlantGL\_to\_VTK}}}{\emph{\DUrole{n}{scenes}}, \emph{\DUrole{n}{path}}, \emph{\DUrole{n}{i}\DUrole{o}{=}\DUrole{default_value}{0}}, \emph{\DUrole{n}{in\_unit}\DUrole{o}{=}\DUrole{default_value}{\textquotesingle{}m\textquotesingle{}}}, \emph{\DUrole{n}{out\_unit}\DUrole{o}{=}\DUrole{default_value}{\textquotesingle{}m\textquotesingle{}}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Directly converts a list plantGL scenes to a single VTK file
The routine aggregates all the scenes in one global triangulation and then calls :func:VTKtriangles
Possbility to rescale measure unit scenes
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{scenes}} (\sphinxstyleliteralemphasis{\sphinxupquote{lits}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{plantgl.Scene}}) \textendash{} list of scenes to be written

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{path}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} path of the file. File name is set by default with \sphinxcode{\sphinxupquote{"triangles\_plantgl\_"+str(i)+".vtk"}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{i}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} id of the file. Used if you want to batch a large number of scenes, defaults to 0

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{in\_unit}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} input measure unit, defaults to “m”

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{out\_unit}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} output measure unit, defaults to “m”

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} in\_unit or out\_unit not a valid entry upon the listed measure units

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{basicgeometry}} module}
\label{\detokenize{reference:module-basicgeometry}}\label{\detokenize{reference:basicgeometry-module}}\index{module@\spxentry{module}!basicgeometry@\spxentry{basicgeometry}}\index{basicgeometry@\spxentry{basicgeometry}!module@\spxentry{module}}

\subsubsection{basicgeometry}
\label{\detokenize{reference:basicgeometry}}
\sphinxAtStartPar
Provides basic geometric operations in 3D used by LightVegeManager. 
Vectors are represented by their cartesian coordinates in a 3\sphinxhyphen{}tuple of floats such as v = (x, y, z)
Triangles are a list of 3 vectors representing its vertices
\index{crossproduct() (in module basicgeometry)@\spxentry{crossproduct()}\spxextra{in module basicgeometry}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:basicgeometry.crossproduct}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{basicgeometry.}}\sphinxbfcode{\sphinxupquote{crossproduct}}}{\emph{\DUrole{n}{v1}}, \emph{\DUrole{n}{v2}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Crossproduct between two vectors v1\textasciicircum{}v2
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{v1}} (\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}) \textendash{} vector 1

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{v2}} (\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}) \textendash{} vector 2

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
crossproduct

\sphinxlineitem{Return type}
\sphinxAtStartPar
3\sphinxhyphen{}tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{middle() (in module basicgeometry)@\spxentry{middle()}\spxextra{in module basicgeometry}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:basicgeometry.middle}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{basicgeometry.}}\sphinxbfcode{\sphinxupquote{middle}}}{\emph{\DUrole{n}{v1}}, \emph{\DUrole{n}{v2}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Middle point between v1 and v2
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{v1}} (\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}) \textendash{} vector 1

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{v2}} (\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}) \textendash{} vector 2

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
middle point \(p = (v1+v2)/2\)

\sphinxlineitem{Return type}
\sphinxAtStartPar
3\sphinxhyphen{}tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{triangle\_normal() (in module basicgeometry)@\spxentry{triangle\_normal()}\spxextra{in module basicgeometry}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:basicgeometry.triangle_normal}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{basicgeometry.}}\sphinxbfcode{\sphinxupquote{triangle\_normal}}}{\emph{\DUrole{n}{triangle}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Computes normal of an oriented triangle (3D)

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
a triangle is \sphinxcode{\sphinxupquote{{[}(x1,y1,z1),(x2,y2,z2),(x3,y3,z3){]}}}
\end{sphinxadmonition}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangle}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} triangle represented by its 3 vertices

\sphinxlineitem{Returns}
\sphinxAtStartPar
normalized vector

\sphinxlineitem{Return type}
\sphinxAtStartPar
3\sphinxhyphen{}tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{triangle\_elevation() (in module basicgeometry)@\spxentry{triangle\_elevation()}\spxextra{in module basicgeometry}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:basicgeometry.triangle_elevation}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{basicgeometry.}}\sphinxbfcode{\sphinxupquote{triangle\_elevation}}}{\emph{\DUrole{n}{triangle}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Computes normal elevation of triangle

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
a triangle is \sphinxcode{\sphinxupquote{{[}(x1,y1,z1),(x2,y2,z2),(x3,y3,z3){]}}}
\end{sphinxadmonition}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangle}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} triangle represented by its 3 vertices

\sphinxlineitem{Returns}
\sphinxAtStartPar
angle in degree 
elevation starts from ground to normal vector
must be between 0 and 90°

\sphinxlineitem{Return type}
\sphinxAtStartPar
float

\end{description}\end{quote}

\end{fulllineitems}

\index{triangle\_area() (in module basicgeometry)@\spxentry{triangle\_area()}\spxextra{in module basicgeometry}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:basicgeometry.triangle_area}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{basicgeometry.}}\sphinxbfcode{\sphinxupquote{triangle\_area}}}{\emph{\DUrole{n}{triangle}}}{}
\pysigstopsignatures
\sphinxAtStartPar
triangle area

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
a triangle is \sphinxcode{\sphinxupquote{{[}(x1,y1,z1),(x2,y2,z2),(x3,y3,z3){]}}}
\end{sphinxadmonition}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangle}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} triangle represented by its 3 vertices

\sphinxlineitem{Returns}
\sphinxAtStartPar

\sphinxAtStartPar
area

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
algorithm is a copy of \sphinxcode{\sphinxupquote{\_surf}} in \sphinxcode{\sphinxupquote{alinea.caribu.caributriangleset}}
\end{sphinxadmonition}


\sphinxlineitem{Return type}
\sphinxAtStartPar
float

\end{description}\end{quote}

\end{fulllineitems}

\index{triangle\_barycenter() (in module basicgeometry)@\spxentry{triangle\_barycenter()}\spxextra{in module basicgeometry}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:basicgeometry.triangle_barycenter}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{basicgeometry.}}\sphinxbfcode{\sphinxupquote{triangle\_barycenter}}}{\emph{\DUrole{n}{triangle}}}{}
\pysigstopsignatures
\sphinxAtStartPar
triangle barycenter

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
a triangle is \sphinxcode{\sphinxupquote{{[}(x1,y1,z1),(x2,y2,z2),(x3,y3,z3){]}}}
\end{sphinxadmonition}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangle}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} triangle represented by its 3 vertices

\sphinxlineitem{Returns}
\sphinxAtStartPar
isobarycenter \((s1 + s2 + s3)/3\)

\sphinxlineitem{Return type}
\sphinxAtStartPar
float

\end{description}\end{quote}

\end{fulllineitems}

\index{rescale() (in module basicgeometry)@\spxentry{rescale()}\spxextra{in module basicgeometry}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:basicgeometry.rescale}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{basicgeometry.}}\sphinxbfcode{\sphinxupquote{rescale}}}{\emph{\DUrole{n}{triangles}}, \emph{\DUrole{n}{h}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Multiplies all triangle vertices by a ratio h

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
a triangle is \sphinxcode{\sphinxupquote{{[}(x1,y1,z1),(x2,y2,z2),(x3,y3,z3){]}}}
\end{sphinxadmonition}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangles}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} list of triangles in the same format as below

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{h}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} ratio

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
list of triangles with each triangle from input rescaled by h

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of list

\end{description}\end{quote}


\subsubsection{example}
\label{\detokenize{reference:example}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{triangles} \PYG{o}{=} \PYG{p}{[}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,} \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}\PYG{p}{]}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{rescale}\PYG{p}{(}\PYG{n}{triangles}\PYG{p}{,} \PYG{l+m+mi}{3}\PYG{p}{)}
\PYG{g+go}{[[(0,0,0), (0,3,0), (0,3,3)], [(0,0,3), (0,0,0), (3,0,3)]]}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{translate() (in module basicgeometry)@\spxentry{translate()}\spxextra{in module basicgeometry}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:basicgeometry.translate}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{basicgeometry.}}\sphinxbfcode{\sphinxupquote{translate}}}{\emph{\DUrole{n}{triangles}}, \emph{\DUrole{n}{tvec}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Moves a list of triangles with a translation of vector tvec

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
a triangle is \sphinxcode{\sphinxupquote{{[}(x1,y1,z1),(x2,y2,z2),(x3,y3,z3){]}}}
\end{sphinxadmonition}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangles}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} list of triangles in the same format as below

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{tvec}} (\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}) \textendash{} vector

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
list of triangles with each triangle from input translated by tvec

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of list

\end{description}\end{quote}


\subsubsection{example}
\label{\detokenize{reference:id1}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{triangles} \PYG{o}{=} \PYG{p}{[}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,} \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}\PYG{p}{]}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{tvec} \PYG{o}{=} \PYG{p}{(}\PYG{l+m+mi}{3}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{translate}\PYG{p}{(}\PYG{n}{triangles}\PYG{p}{,} \PYG{n}{tvec} \PYG{p}{)}
\PYG{g+go}{[[(3,0,1), (3,1,1), (3,1,2)], [(3,0,2), (3,0,1), (4,0,2)]]}
\end{sphinxVerbatim}

\end{fulllineitems}

\index{zrotate() (in module basicgeometry)@\spxentry{zrotate()}\spxextra{in module basicgeometry}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:basicgeometry.zrotate}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{basicgeometry.}}\sphinxbfcode{\sphinxupquote{zrotate}}}{\emph{\DUrole{n}{triangles}}, \emph{\DUrole{n}{omegadeg}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Rotates a list of triangles in the xy plane from an angle

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
a triangle is \sphinxcode{\sphinxupquote{{[}(x1,y1,z1),(x2,y2,z2),(x3,y3,z3){]}}}
\end{sphinxadmonition}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangles}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} list of triangles in the same format as below

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{omegadeg}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} angle in degree

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
list of triangles with each triangle from input rotated around z axis by omegadeg

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of list

\end{description}\end{quote}


\subsubsection{example}
\label{\detokenize{reference:id2}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{triangles} \PYG{o}{=} \PYG{p}{[}\PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,} \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{]}\PYG{p}{]}
\PYG{g+gp}{\PYGZgt{}\PYGZgt{}\PYGZgt{} }\PYG{n}{zrotate}\PYG{p}{(}\PYG{n}{triangles}\PYG{p}{,} \PYG{l+m+mi}{90} \PYG{p}{)}
\PYG{g+go}{[[(0,0,0), (\PYGZhy{}1,0,0), (\PYGZhy{}1,0,1)], [(0,0,1), (0,0,0), (0,1,1)]]}
\end{sphinxVerbatim}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{buildRATPscene}} module}
\label{\detokenize{reference:module-buildRATPscene}}\label{\detokenize{reference:buildratpscene-module}}\index{module@\spxentry{module}!buildRATPscene@\spxentry{buildRATPscene}}\index{buildRATPscene@\spxentry{buildRATPscene}!module@\spxentry{module}}

\subsubsection{buildRATPscene}
\label{\detokenize{reference:buildratpscene}}
\sphinxAtStartPar
Creation of a PyRATP.grid from inputs. The following functions create and initialize a grid from
either a triangles mesh, a l\sphinxhyphen{}egume grid or an empty geometric input

\sphinxAtStartPar
The argument \sphinxcode{\sphinxupquote{parameters}} refers to one the three inputs dict of LightVegeManager. It is 
structured as so:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{ratp\PYGZus{}args} \PYG{o}{=} \PYG{p}{\PYGZob{}}
        \PYG{c+c1}{\PYGZsh{} Grid specifications}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{dx}\PYG{p}{,} \PYG{n}{dy}\PYG{p}{,} \PYG{n}{dz}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{voxel size}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dynamic}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{xorigin}\PYG{p}{,} \PYG{n}{yorigin}\PYG{p}{,} \PYG{n}{zorigin}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{origin}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{xorigin}\PYG{p}{,} \PYG{n}{yorigin}\PYG{p}{]}\PYG{p}{,}

        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{number voxels}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{nx}\PYG{p}{,} \PYG{n}{ny}\PYG{p}{,} \PYG{n}{nz}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{grid slicing}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ground = 0.}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tesselation level}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{int}

        \PYG{c+c1}{\PYGZsh{} Leaf angle distribution}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute global}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compute voxel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib algo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}

        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{nb angle classes}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n+nb}{int}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{angle distrib file}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{n}{filepath}\PYG{p}{,}

        \PYG{c+c1}{\PYGZsh{} Vegetation type}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{soil reflectance}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{reflectance\PYGZus{}band0}\PYG{p}{,} \PYG{n}{reflectance\PYGZus{}band1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{reflectance coefficients}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{reflectance\PYGZus{}band0}\PYG{p}{,} \PYG{n}{reflectance\PYGZus{}band1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mu}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{p}{[}\PYG{n}{mu\PYGZus{}scene0}\PYG{p}{,} \PYG{n}{mu\PYGZus{}scene1}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}
    \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\sphinxstrong{See also:}
\nopagebreak


\sphinxAtStartPar
For more details {\hyperref[\detokenize{inputs:inputs}]{\sphinxcrossref{\DUrole{std,std-ref}{Inputs description}}}}


\index{extract\_grid\_origin() (in module buildRATPscene)@\spxentry{extract\_grid\_origin()}\spxextra{in module buildRATPscene}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:buildRATPscene.extract_grid_origin}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{buildRATPscene.}}\sphinxbfcode{\sphinxupquote{extract\_grid\_origin}}}{\emph{\DUrole{n}{parameters}}, \emph{\DUrole{n}{minmax}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Create grid origin from either input parameters or from the scene
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{parameters}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} RATP parameters from inputs of LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{minmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{{[}}}\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{{]}}}) \textendash{} list of mininuml point and maximum point in a triangles mesh

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
origin of the grid depending of input parameters and size of the mesh

\sphinxlineitem{Return type}
\sphinxAtStartPar
3\sphinxhyphen{}tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{build\_RATPscene\_from\_trimesh() (in module buildRATPscene)@\spxentry{build\_RATPscene\_from\_trimesh()}\spxextra{in module buildRATPscene}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:buildRATPscene.build_RATPscene_from_trimesh}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{buildRATPscene.}}\sphinxbfcode{\sphinxupquote{build\_RATPscene\_from\_trimesh}}}{\emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{minmax}}, \emph{\DUrole{n}{triLmax}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{parameters}}, \emph{\DUrole{n}{coordinates}}, \emph{\DUrole{n}{reflected}}, \emph{\DUrole{n}{infinite}}, \emph{\DUrole{n}{stems\_id}\DUrole{o}{=}\DUrole{default_value}{None}}, \emph{\DUrole{n}{nb\_input\_scenes}\DUrole{o}{=}\DUrole{default_value}{0}}, \emph{\DUrole{n}{fullgrid}\DUrole{o}{=}\DUrole{default_value}{False}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Build a RATP grid from a triangles mesh.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} triangles mesh aggregated by indice elements
.. code\sphinxhyphen{}block:: \{ id : {[}triangle1, triangle2, …{]}\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{minmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{{[}}}\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{{]}}}) \textendash{} list of mininuml point and maximum point in a triangles mesh

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triLmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} longest side of all the triangles in trimesh

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict that matches new element indices in trimesh with specy indice and
input element indice
.. code:: matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{parameters}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} RATP parameters from inputs of LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{coordinates}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} {[}latitude, longitude, timezone{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{reflected}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate reflected radiations

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{infinite}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate infinitisation of the grid

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{stems\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{2\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} list of potential stems element in the input scenes, defaults to None

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{nb\_input\_scenes}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} number of input scenes in the geometry dict, defaults to 0

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar

\sphinxAtStartPar
It returns 3 objects:
\begin{itemize}
\item {} \begin{description}
\sphinxlineitem{\sphinxcode{\sphinxupquote{ratpgrid}}}
\sphinxAtStartPar
pyratp.grid filled with areas of triangles in trimesh and input parameters

\end{description}

\item {} \begin{description}
\sphinxlineitem{\sphinxcode{\sphinxupquote{matching\_tri\_vox}}}
\sphinxAtStartPar
dict where key is a triangle indice and value the matching voxel indice where the
barycenter of the triangle is located

\end{description}

\item {} \begin{description}
\sphinxlineitem{\sphinxcode{\sphinxupquote{distrib}}}
\sphinxAtStartPar
dict with a \sphinxcode{\sphinxupquote{"global"}} key and if \sphinxcode{\sphinxupquote{{[}"angle distrib algo"{]} = "compute voxel"}}
a second entry where key is \sphinxcode{\sphinxupquote{"voxel"}}

\sphinxAtStartPar
value for \sphinxcode{\sphinxupquote{"voxel"}} is a \sphinxcode{\sphinxupquote{numpy.array}} of dimension
\sphinxcode{\sphinxupquote{(numberofvoxels,numberofentities,numberofclasses)}}

\sphinxAtStartPar
value for \sphinxcode{\sphinxupquote{"global"}} is a list of \sphinxcode{\sphinxupquote{numberofentities}} list of \sphinxcode{\sphinxupquote{numberofclasses}}
elements

\end{description}

\end{itemize}


\sphinxlineitem{Return type}
\sphinxAtStartPar
pyratp.grid, dict, dict

\end{description}\end{quote}

\end{fulllineitems}

\index{build\_RATPscene\_empty() (in module buildRATPscene)@\spxentry{build\_RATPscene\_empty()}\spxextra{in module buildRATPscene}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:buildRATPscene.build_RATPscene_empty}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{buildRATPscene.}}\sphinxbfcode{\sphinxupquote{build\_RATPscene\_empty}}}{\emph{\DUrole{n}{parameters}}, \emph{\DUrole{n}{minmax}}, \emph{\DUrole{n}{coordinates}}, \emph{\DUrole{n}{infinite}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Build a RATP grid from an empty geometric input
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{parameters}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} RATP parameters from inputs of LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{minmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{{[}}}\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{3\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{{]}}}) \textendash{} list of mininuml point and maximum point in a triangles mesh

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{coordinates}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} {[}latitude, longitude, timezone{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{infinite}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate infinitisation of the grid

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{ratpgrid}}: pyratp.grid sets with input parameters

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{distrib}}: dict with one entry \sphinxcode{\sphinxupquote{"global" : {[}1.{]}}}

\end{itemize}


\sphinxlineitem{Return type}
\sphinxAtStartPar
pyratp.grid, dict

\end{description}\end{quote}

\end{fulllineitems}

\index{legumescene\_to\_RATPscene() (in module buildRATPscene)@\spxentry{legumescene\_to\_RATPscene()}\spxextra{in module buildRATPscene}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:buildRATPscene.legumescene_to_RATPscene}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{buildRATPscene.}}\sphinxbfcode{\sphinxupquote{legumescene\_to\_RATPscene}}}{\emph{\DUrole{n}{legumescene}}, \emph{\DUrole{n}{parameters}}, \emph{\DUrole{n}{coordinates}}, \emph{\DUrole{n}{reflected}}, \emph{\DUrole{n}{infinite}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Creates a RATP grid of voxels from a l\sphinxhyphen{}egume grid format
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{legumescene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
l\sphinxhyphen{}egume grid represented by a dict with two entries:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"LA"}}: equivalent to m\_lais in l\sphinxhyphen{}egume, a numpy.array of dimension \sphinxcode{\sphinxupquote{(nent, nz, ny, nx)}} which represents leaf area in each voxel for each specy

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"distrib"}}: equivalent to ls\_dif in l\sphinxhyphen{}egume, a numpy.array of dimension \sphinxcode{\sphinxupquote{(nent, nclasses)}} which represents the global leaf angle distribution for each input specy

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
legumescene is the only input geometric scene which can handle several species
\end{sphinxadmonition}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{parameters}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} RATP parameters from inputs of LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{coordinates}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} {[}latitude, longitude, timezone{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{reflected}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate reflected radiations

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{infinite}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate infinitisation of the grid

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar

\sphinxAtStartPar
It returns 3 objects
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{ratpgrid}} : pyratp.grid filled with areas of triangles in trimesh and input parameters

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{distrib}} : dict with only a \sphinxcode{\sphinxupquote{"global"}} key, value for \sphinxcode{\sphinxupquote{"global"}} is a list of \sphinxcode{\sphinxupquote{numberofentities}} list of \sphinxcode{\sphinxupquote{numberofclasses}} elements

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{nb0}} : number of empty layers between top canopy and maximum layer in legumescene

\end{itemize}


\sphinxlineitem{Return type}
\sphinxAtStartPar
pyratp.grid, dict, int

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{defaultvalues}} module}
\label{\detokenize{reference:module-defaultvalues}}\label{\detokenize{reference:defaultvalues-module}}\index{module@\spxentry{module}!defaultvalues@\spxentry{defaultvalues}}\index{defaultvalues@\spxentry{defaultvalues}!module@\spxentry{module}}

\subsubsection{defaultvalues}
\label{\detokenize{reference:defaultvalues}}
\sphinxAtStartPar
Default for simulation fixed parameters
These parameters are sets in LightVegeManager if the user did not precise thoses inputs
\index{default\_LightVegeManager\_inputs() (in module defaultvalues)@\spxentry{default\_LightVegeManager\_inputs()}\spxextra{in module defaultvalues}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:defaultvalues.default_LightVegeManager_inputs}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{defaultvalues.}}\sphinxbfcode{\sphinxupquote{default\_LightVegeManager\_inputs}}}{}{}
\pysigstopsignatures
\sphinxAtStartPar
returns default parameters for LightVegeManager constructor \sphinxcode{\sphinxupquote{\_\_init\_\_}}
\begin{quote}\begin{description}
\sphinxlineitem{Returns}
\sphinxAtStartPar
environment and light model parameters

\sphinxlineitem{Return type}
\sphinxAtStartPar
dict, dict

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{leafangles}} module}
\label{\detokenize{reference:module-leafangles}}\label{\detokenize{reference:leafangles-module}}\index{module@\spxentry{module}!leafangles@\spxentry{leafangles}}\index{leafangles@\spxentry{leafangles}!module@\spxentry{module}}

\subsubsection{leafangles}
\label{\detokenize{reference:leafangles}}
\sphinxAtStartPar
Handles leaf angle distribution, both in its dynamic computing or reading a file

\sphinxAtStartPar
An angle distribution is a list of n elements, where n is the number of angle class between 0 and
90°. Each element of this list is a percentage for leaves to be oriented from 0 to 90/n degree.
The sum of all the list entries must equal 1.
\index{read\_distrib\_file() (in module leafangles)@\spxentry{read\_distrib\_file()}\spxextra{in module leafangles}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:leafangles.read_distrib_file}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{leafangles.}}\sphinxbfcode{\sphinxupquote{read\_distrib\_file}}}{\emph{\DUrole{n}{path}}, \emph{\DUrole{n}{numberofentities}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Reads global leaf angle distribution in a file
the file must matches the format : one specy distribution per line
each percentage separated by a coma ‘,’

\sphinxAtStartPar
\sphinxstylestrong{example}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m}{0}.1382,0.1664,0.1972,0.1925,0.1507,0.0903,0.0425,0.0172,0.005
\PYG{l+m}{0}.3,0.1,0.15,0.2,0.05,0.2
\end{sphinxVerbatim}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{path}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} path to the file

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{numberofentities}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} number of species, aka numbre of lines in the file

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
distribution for each specy, number of entries on one line

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of list

\end{description}\end{quote}

\end{fulllineitems}

\index{compute\_distrib\_globale() (in module leafangles)@\spxentry{compute\_distrib\_globale()}\spxextra{in module leafangles}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:leafangles.compute_distrib_globale}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{leafangles.}}\sphinxbfcode{\sphinxupquote{compute\_distrib\_globale}}}{\emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{numberofclasses}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Calculation of a global leaf angle distribution from a triangle mesh
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} triangles mesh aggregated by indice elements \sphinxcode{\sphinxupquote{\{ id : {[}triangle1, triangle2, ...{]}\}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
dict that matches new element indices in trimesh with specy indice and
input element indice, \sphinxcode{\sphinxupquote{matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}}}

\sphinxAtStartPar
this dict allows us to look how species there is the inputs geometric data


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{numberofclasses}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} number angle class wanted between 0 and 90 degree

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
a leaf angle distribution for each specy. Each distribution is a length numberofclasses the distribution is computed on all trimesh

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of list

\end{description}\end{quote}

\end{fulllineitems}

\index{compute\_distrib\_voxel() (in module leafangles)@\spxentry{compute\_distrib\_voxel()}\spxextra{in module leafangles}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:leafangles.compute_distrib_voxel}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{leafangles.}}\sphinxbfcode{\sphinxupquote{compute\_distrib\_voxel}}}{\emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{numberofclasses}}, \emph{\DUrole{n}{numberofvoxels}}, \emph{\DUrole{n}{matching\_tri\_vox}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Calculation of a local leaf angle distribution from a triangle mesh on each voxel of a grid
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} triangles mesh aggregated by indice elements \sphinxcode{\sphinxupquote{\{ id : {[}triangle1, triangle2, ...{]}\}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict that matches new element indices in trimesh with specy indice and
input element indice, \sphinxcode{\sphinxupquote{matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}}}
this dict allows us to look how species there is the inputs geometric data

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{numberofclasses}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} number angle class wanted between 0 and 90 degree

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{numberofclasses}} \textendash{} number of non empty voxels in the grid

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_tri\_vox}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict where key is a triangle indice and value the matching voxel indice where the
barycenter of the triangle is located

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
array of dimension {[}number of voxels{]}{[}number of species{]}{[}number of angle classes{]}
i.e. it returns for each voxel a leaf angle distribution for each specy

\sphinxlineitem{Return type}
\sphinxAtStartPar
numpy.array

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{outputs}} module}
\label{\detokenize{reference:module-outputs}}\label{\detokenize{reference:outputs-module}}\index{module@\spxentry{module}!outputs@\spxentry{outputs}}\index{outputs@\spxentry{outputs}!module@\spxentry{module}}

\subsubsection{outputs}
\label{\detokenize{reference:outputs}}
\sphinxAtStartPar
Manages and reformat output results from the light models in pandas.Dataframe with similar columns
names.

\sphinxAtStartPar
Light models managed in this module:
\begin{itemize}
\item {} 
\sphinxAtStartPar
RATP

\item {} 
\sphinxAtStartPar
CARIBU

\end{itemize}

\sphinxAtStartPar
Column names for voxels:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}VegetationType\textquotesingle{}}}: id of the specy

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Iteration\textquotesingle{}}}: RATP can handle multiple iterations in inputs, but it is not properly exploited in LightVegeManager yet

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Day\textquotesingle{}}}: input day if LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Hour\textquotesingle{}}}: input hour if LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Voxel\textquotesingle{}}}: index of current voxel

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Nx\textquotesingle{}}}: index in grid following x axis, corresponds to pyrapt.grid.numx

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Ny\textquotesingle{}}}: index in grid following y axis, corresponds to pyrapt.grid.numy

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Nz\textquotesingle{}}}: index in grid following z axis, corresponds to pyrapt.grid.numz

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}ShadedPAR\textquotesingle{}}}: shaded energy in the current voxel, 0 if no direct light in the input

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}SunlitPAR\textquotesingle{}}}: sunlit energy

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}ShadedArea\textquotesingle{}}}: leaf area in voxel which is shaded

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}SunlitArea\textquotesingle{}}}: leaf area in voxel which is sunlit

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Area\textquotesingle{}}}: total leaf area in the voxel

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}PARa\textquotesingle{}}}: ( ShadedPAR * ShadedArea + SunlitPAR * SunlitArea ) / ( ShadedArea + SunlitArea )

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Intercepted\textquotesingle{}}}: relative portion of input rays intercepted by the voxel

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Transmitted\textquotesingle{}}}: relative portion of input rays leaving out the voxel

\end{itemize}

\sphinxAtStartPar
Column names for triangles:
\begin{quote}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}VegetationType\textquotesingle{}}}: id of the specy

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Day\textquotesingle{}}}: input day if LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Hour\textquotesingle{}}}: input hour if LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Triangle\textquotesingle{}}}: indice of the triangle

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Organ\textquotesingle{}}}: element where the triangle belongs

\end{itemize}

\sphinxAtStartPar
if ligh model is CARIBU:
\begin{quote}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Area\textquotesingle{}}}: area of the triangles

\end{itemize}

\sphinxAtStartPar
for each bandwidth in the inputs you have two entries:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{band + " Eabs"}}: energy absorbed by the triangle

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{band + " Ei"}}: energy intercepted by the triangle

\end{itemize}
\end{quote}

\sphinxAtStartPar
If light model is RATP:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Area\textquotesingle{}}}: area of total leaf area in the voxel where the triangle is located

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}primitive\_area\textquotesingle{}}}: area of the triangle

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Voxel\textquotesingle{}}}: index of the voxel where the triangle is located

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Nx\textquotesingle{}}}: index in grid following x axis, corresponds to pyrapt.grid.numx

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Ny\textquotesingle{}}}: index in grid following y axis, corresponds to pyrapt.grid.numy

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Nz\textquotesingle{}}}: index in grid following z axis, corresponds to pyrapt.grid.numz

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}ShadedPAR\textquotesingle{}}}: shaded energy in the current voxel

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}SunlitPAR\textquotesingle{}}}: sunlit energy, 0 if no direct light in the input

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}ShadedArea\textquotesingle{}}}: leaf area in voxel which is shaded

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}SunlitArea\textquotesingle{}}}: leaf area in voxel which is sunlit

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}PARa\textquotesingle{}}}: ( ShadedPAR * ShadedArea + SunlitPAR * SunlitArea ) / ( ShadedArea + SunlitArea )

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Intercepted\textquotesingle{}}}: relative portion of input rays intercepted by the voxel

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Transmitted\textquotesingle{}}}: relative portion of input rays leaving out the voxel

\end{itemize}
\end{quote}

\sphinxAtStartPar
Column names for elements:
\begin{quote}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Day\textquotesingle{}}}: input day if LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Hour\textquotesingle{}}}: input hour if LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{\textquotesingle{}Organ\textquotesingle{}}}: id of current element

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"VegetationType"}}: id of the specy

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"Area"}}: area of the element (sum of all triangles belonging to current element)

\end{itemize}

\sphinxAtStartPar
if light model is CARIBU, for each bandwidth in the optical inputs you have two entries:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{band + " Eabs"}}: energy absorbed by the element, integrated on all triangles belonging to current element

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{band + " Ei"}}: energy intercepted by the triangle, integrated on all triangles belonging to current element

\end{itemize}

\sphinxAtStartPar
if light model is RATP, the following entries are integrated on all triangles belonging to current element 
with E, current element, t triangles in E and V an entry: \(\frac{\sum_{t \in E} area_t * V_t}{area_E}\)
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"PARa"}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"Intercepted"}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"Transmitted"}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"SunlitPAR"}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"SunlitArea"}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"ShadedPAR"}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"ShadedArea"}}

\end{itemize}
\end{quote}
\index{out\_ratp\_empty\_grid() (in module outputs)@\spxentry{out\_ratp\_empty\_grid()}\spxextra{in module outputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:outputs.out_ratp_empty_grid}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{outputs.}}\sphinxbfcode{\sphinxupquote{out\_ratp\_empty\_grid}}}{\emph{\DUrole{n}{day}}, \emph{\DUrole{n}{hour}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Returns an empty dataframe results for RATP
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{day}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} day of simulation

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{hour}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} hour of simulation

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
returns a dataframe with all the keys expected with a RATP simulation but results are empty
used if input geometry is empty

\sphinxlineitem{Return type}
\sphinxAtStartPar
pandas.DataFrame

\end{description}\end{quote}

\end{fulllineitems}

\index{out\_ratp\_voxels() (in module outputs)@\spxentry{out\_ratp\_voxels()}\spxextra{in module outputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:outputs.out_ratp_voxels}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{outputs.}}\sphinxbfcode{\sphinxupquote{out\_ratp\_voxels}}}{\emph{\DUrole{n}{ratpgrid}}, \emph{\DUrole{n}{res}}, \emph{\DUrole{n}{parunit}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Converts RATP results to pandas dataframe compared to the voxels
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ratpgrid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} RATP grid with voxels informations

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{res}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.ratp.out\_rayt}}) \textendash{} output table of RATP

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{parunit}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} 
\sphinxAtStartPar
energy unit of input

\sphinxAtStartPar
RATP expects W.m\sphinxhyphen{}2 in input and return results in µmol.s\sphinxhyphen{}1.m\sphinxhyphen{}2.
if \sphinxcode{\sphinxupquote{parunit="W.m\sphinxhyphen{}2"}} the outputs is converted to W.m\sphinxhyphen{}2, otherwise results are in µmol.s\sphinxhyphen{}1.m\sphinxhyphen{}2


\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
res.T converted in a pandas Dataframe with voxels relative columns. The soil is not part of the results

\sphinxlineitem{Return type}
\sphinxAtStartPar
pandas.DataFrame

\end{description}\end{quote}

\end{fulllineitems}

\index{out\_ratp\_triangles() (in module outputs)@\spxentry{out\_ratp\_triangles()}\spxextra{in module outputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:outputs.out_ratp_triangles}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{outputs.}}\sphinxbfcode{\sphinxupquote{out\_ratp\_triangles}}}{\emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{matching\_ele\_ent}}, \emph{\DUrole{n}{matching\_tr\_vox}}, \emph{\DUrole{n}{voxels\_outputs}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Converts RATP results to pandas dataframe compared to the triangles (and voxels)
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} triangles mesh aggregated by indice elements
.. code\sphinxhyphen{}block:: \{ id : {[}triangle1, triangle2, …{]}\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ele\_ent}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict that matches new element indices in trimesh with specy indice and
input element indice, 
.. code:: matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_tr\_vox}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict where key is a triangle indice and value the matching voxel indice where the 
barycenter of the triangle is located

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{voxels\_outputs}} (\sphinxstyleliteralemphasis{\sphinxupquote{pandas.Dataframe}}) \textendash{} output of :func:out\_ratp\_voxels

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
output of :func:out\_ratp\_voxels merged with associated triangles

\sphinxlineitem{Return type}
\sphinxAtStartPar
pandas.Dataframe

\end{description}\end{quote}

\end{fulllineitems}

\index{out\_ratp\_elements() (in module outputs)@\spxentry{out\_ratp\_elements()}\spxextra{in module outputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:outputs.out_ratp_elements}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{outputs.}}\sphinxbfcode{\sphinxupquote{out\_ratp\_elements}}}{\emph{\DUrole{n}{matching\_ele\_ent}}, \emph{\DUrole{n}{reflected}}, \emph{\DUrole{n}{reflectance\_coef}}, \emph{\DUrole{n}{trianglesoutputs}}}{}
\pysigstopsignatures
\sphinxAtStartPar
If trimesh is not empty, aggregates RATP results by element (keys in dict trimesh)
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ele\_ent}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict that matches new element indices in trimesh with specy indice and
input element indice, 
.. code:: matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{reflected}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate reflected radiations

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{reflectance\_coef}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} coefficient for each specy and each input bandwidth

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trianglesoutputs}} (\sphinxstyleliteralemphasis{\sphinxupquote{pandas.Dataframe}}) \textendash{} output of :func:out\_ratp\_triangles

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
dataframe integrated on element informations

\sphinxlineitem{Return type}
\sphinxAtStartPar
pandas.Dataframe

\end{description}\end{quote}

\end{fulllineitems}

\index{out\_caribu\_mix() (in module outputs)@\spxentry{out\_caribu\_mix()}\spxextra{in module outputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:outputs.out_caribu_mix}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{outputs.}}\sphinxbfcode{\sphinxupquote{out\_caribu\_mix}}}{\emph{\DUrole{n}{rdrs}}, \emph{\DUrole{n}{c\_scene\_sun}}, \emph{\DUrole{n}{c\_scene\_sky}}, \emph{\DUrole{n}{raw\_sun}}, \emph{\DUrole{n}{aggregated\_sun}}, \emph{\DUrole{n}{raw\_sky}}, \emph{\DUrole{n}{aggregated\_sky}}, \emph{\DUrole{n}{issensors}}, \emph{\DUrole{n}{issoilmesh}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Mix diffuse and direct rays results according to a ratio rdrs
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{rdrs}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} Spitters’s model estimating for the diffuse:direct ratio

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{c\_scene\_sun}} (\sphinxstyleliteralemphasis{\sphinxupquote{CaribuScene}}) \textendash{} CaribuScene with direct lighting computed (from a sun)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{c\_scene\_sky}} (\sphinxstyleliteralemphasis{\sphinxupquote{CaribuScene}}) \textendash{} CaribuScene with diffuse lighting computed (from a sky)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{raw\_sun}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} results of c\_scene\_sun for triangles

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{aggregated\_sun}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} results of c\_scene\_sun aggregated by element

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{raw\_sky}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} results of c\_scene\_sky for triangles

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{aggregated\_sky}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} results of c\_scene\_sky aggregated by element

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{issensors}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if option virtual sensors is activated

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{issoilmesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if option soil mesh is activated

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar

\sphinxAtStartPar
if sensors is activated, it extracts its results from aggregated\_sun and aggregated\_sky

\sphinxAtStartPar
if soilmesh is activated, it extracts its results from c\_scene\_sun and c\_scene\_sky

\sphinxAtStartPar
then it mixes raw, aggregated, virtual sensors and soil energy results such as

\sphinxAtStartPar
\sphinxcode{\sphinxupquote{result = rdrs * diffuse\_result + (1 \sphinxhyphen{} rdrs) * direct\_result}}


\sphinxlineitem{Return type}
\sphinxAtStartPar
dict of dict, dict of dict, dict of list, dict of float

\end{description}\end{quote}

\end{fulllineitems}

\index{out\_caribu\_nomix() (in module outputs)@\spxentry{out\_caribu\_nomix()}\spxextra{in module outputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:outputs.out_caribu_nomix}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{outputs.}}\sphinxbfcode{\sphinxupquote{out\_caribu\_nomix}}}{\emph{\DUrole{n}{c\_scene}}, \emph{\DUrole{n}{aggregated}}, \emph{\DUrole{n}{issensors}}, \emph{\DUrole{n}{issoilmesh}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Extracts only sensors and soilmesh results if activated
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{c\_scene}} (\sphinxstyleliteralemphasis{\sphinxupquote{CaribuScene}}) \textendash{} instance of CaribuScene containing geometry, light source(s), opt etc…

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{aggregated}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} result of CaribuScene.run

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{issensors}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if option virtual sensors is activated

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{issoilmesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if option soil mesh is activated

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
extracts sensors results from aggregated and soil energy from c\_scene

\sphinxlineitem{Return type}
\sphinxAtStartPar
dict, dict

\end{description}\end{quote}

\end{fulllineitems}

\index{out\_caribu\_elements() (in module outputs)@\spxentry{out\_caribu\_elements()}\spxextra{in module outputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:outputs.out_caribu_elements}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{outputs.}}\sphinxbfcode{\sphinxupquote{out\_caribu\_elements}}}{\emph{\DUrole{n}{day}}, \emph{\DUrole{n}{hour}}, \emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{aggregated}}, \emph{\DUrole{n}{sun\_up}}, \emph{\DUrole{n}{caribu\_triangles}\DUrole{o}{=}\DUrole{default_value}{\{\}}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Converts aggregated in a pandas.Dataframe following indices in LightVegeManager
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{day}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} day of simulation

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{hour}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} hour of simulation

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} triangles mesh aggregated by indice elements
.. code\sphinxhyphen{}block:: \{ id : {[}triangle1, triangle2, …{]}\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ele\_ent}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict that matches new element indices in trimesh with specy indice and
input element indice, 
.. code:: matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{aggregated}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} result of CaribuScene.run

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{sun\_up}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if sun elevation is \textgreater{} 2° and direct rays are \textgreater{} 0 W.m\(\sp{\text{2}}\)

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
aggregated results rearrange in a Dataframe with element correspondance in LightVegeManager

\sphinxlineitem{Return type}
\sphinxAtStartPar
pandas.Dataframe

\end{description}\end{quote}

\end{fulllineitems}

\index{out\_caribu\_triangles() (in module outputs)@\spxentry{out\_caribu\_triangles()}\spxextra{in module outputs}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:outputs.out_caribu_triangles}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{outputs.}}\sphinxbfcode{\sphinxupquote{out\_caribu\_triangles}}}{\emph{\DUrole{n}{day}}, \emph{\DUrole{n}{hour}}, \emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{raw}}, \emph{\DUrole{n}{sun\_up}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Converts raw in a pandas.Dataframe following simulation datas
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{day}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} day of simulation

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{hour}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} hour of simulation

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} triangles mesh aggregated by indice elements
.. code\sphinxhyphen{}block:: \{ id : {[}triangle1, triangle2, …{]}\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ele\_ent}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict that matches new element indices in trimesh with specy indice and
input element indice, 
.. code:: matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{raw}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} triangles results from CaribuScene.run

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{sun\_up}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if sun elevation is \textgreater{} 2° and direct rays are \textgreater{} 0 W.m\(\sp{\text{2}}\)

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
triangle results rearrange in a Dataframe

\sphinxlineitem{Return type}
\sphinxAtStartPar
pandas.Dataframe

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{plantGL}} module}
\label{\detokenize{reference:module-plantGL}}\label{\detokenize{reference:plantgl-module}}\index{module@\spxentry{module}!plantGL@\spxentry{plantGL}}\index{plantGL@\spxentry{plantGL}!module@\spxentry{module}}

\subsubsection{plantGL}
\label{\detokenize{reference:plantgl}}
\sphinxAtStartPar
visualisation plantGL
\index{cscene\_to\_plantGLScene\_stems() (in module plantGL)@\spxentry{cscene\_to\_plantGLScene\_stems()}\spxextra{in module plantGL}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:plantGL.cscene_to_plantGLScene_stems}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{plantGL.}}\sphinxbfcode{\sphinxupquote{cscene\_to\_plantGLScene\_stems}}}{\emph{\DUrole{n}{cscene}}, \emph{\DUrole{n}{stems\_id}\DUrole{o}{=}\DUrole{default_value}{None}}, \emph{\DUrole{n}{matching\_ids}\DUrole{o}{=}\DUrole{default_value}{\{\}}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Transform a triangles mesh to a plantGL scene, whith a color difference between leaves and stems
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cscene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} LightVegeManager triangulations mesh

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{stems\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} list of tuple (element\_id, specy\_id), defaults to None

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} dict that matches new element indices in trimesh with specy indice and
input element indice, defaults to \{\}
\sphinxcode{\sphinxupquote{matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}}}

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
cscene in plantGL scene format with leaves in green and stems in brown

\sphinxlineitem{Return type}
\sphinxAtStartPar
plantGL Scene

\end{description}\end{quote}

\end{fulllineitems}

\index{cscene\_to\_plantGLScene\_light() (in module plantGL)@\spxentry{cscene\_to\_plantGLScene\_light()}\spxextra{in module plantGL}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:plantGL.cscene_to_plantGLScene_light}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{plantGL.}}\sphinxbfcode{\sphinxupquote{cscene\_to\_plantGLScene\_light}}}{\emph{\DUrole{n}{cscene}}, \emph{\DUrole{n}{outputs}\DUrole{o}{=}\DUrole{default_value}{\{\}}}, \emph{\DUrole{n}{column\_name}\DUrole{o}{=}\DUrole{default_value}{\textquotesingle{}par Ei\textquotesingle{}}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Transform a triangles mesh to a plantGL scene, colors represent lightint results 
from blue to red
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cscene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} LightVegeManager triangulations mesh

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{outputs}} (\sphinxstyleliteralemphasis{\sphinxupquote{Pandas.Dataframe}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} outputs results from LightVegeManager, defaults to \{\}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{column\_name}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} name of the value to plot, defaults to “par Ei”

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
cscene in plantGL scene format with a color from blue to red

\sphinxlineitem{Return type}
\sphinxAtStartPar
plantGL Scene

\end{description}\end{quote}

\end{fulllineitems}

\index{ratpgrid\_to\_plantGLScene() (in module plantGL)@\spxentry{ratpgrid\_to\_plantGLScene()}\spxextra{in module plantGL}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:plantGL.ratpgrid_to_plantGLScene}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{plantGL.}}\sphinxbfcode{\sphinxupquote{ratpgrid\_to\_plantGLScene}}}{\emph{\DUrole{n}{ratpgrid}}, \emph{\DUrole{n}{transparency}\DUrole{o}{=}\DUrole{default_value}{0.0}}, \emph{\DUrole{n}{plt\_cmap}\DUrole{o}{=}\DUrole{default_value}{\textquotesingle{}Greens\textquotesingle{}}}, \emph{\DUrole{n}{outputs}\DUrole{o}{=}\DUrole{default_value}{\{\}}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Transform a RATP grid mesh to a plantGL scene
Colors can either follows leaf area or lighting values
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ratpgrid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} grid of voxels in RATP format

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{transparency}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} transparency value of the voxels from 0 to 1, defaults to 0.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{plt\_cmap}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} name of the colormap to color the voxels, defaults to “Greens”

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{outputs}} (\sphinxstyleliteralemphasis{\sphinxupquote{pandas.Dataframe}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} lighting results from LightVegeManager, defaults to \{\}

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
ratpgrid in plantGL scene

\sphinxlineitem{Return type}
\sphinxAtStartPar
plantGL Scene

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{sky}} module}
\label{\detokenize{reference:module-sky}}\label{\detokenize{reference:sky-module}}\index{module@\spxentry{module}!sky@\spxentry{sky}}\index{sky@\spxentry{sky}!module@\spxentry{module}}

\subsubsection{sky}
\label{\detokenize{reference:sky}}
\sphinxAtStartPar
Build a sky from LightVegeManager input informations
\begin{description}
\sphinxlineitem{Possible sky options:}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"turtle46"}} : soc sky composed by 46 directions in a turtle shape

\item {} 
\sphinxAtStartPar
filepath : string indicating a file path

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}nb\_azimut, nb\_zenith, "soc" or "uoc"{]}}} : build a sky with a custom number of directions

\end{itemize}

\sphinxlineitem{output :}\begin{itemize}
\item {} 
\sphinxAtStartPar
with RATP : pyratp.skyvault

\item {} 
\sphinxAtStartPar
with CARIBU : {[}(weight, (dir{[}0{]}, dir{[}1{]}, dir{[}2{]})), … {]}

\end{itemize}

\end{description}

\sphinxAtStartPar
Sky file is in RATP format
\index{ratpformat\_to\_caribuformat() (in module sky)@\spxentry{ratpformat\_to\_caribuformat()}\spxextra{in module sky}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:sky.ratpformat_to_caribuformat}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{sky.}}\sphinxbfcode{\sphinxupquote{ratpformat\_to\_caribuformat}}}{\emph{\DUrole{n}{az}}, \emph{\DUrole{n}{h}}, \emph{\DUrole{n}{pc}}, \emph{\DUrole{n}{rad}\DUrole{o}{=}\DUrole{default_value}{True}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Converts sky informations from RATP format to CARIBU format
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{az}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} azimuts of each sky direction (degree)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{h}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} elevation of each sky direction (degree)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{pc}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} perez weight of each sky direction

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
direction vectors and weights for each sky direction
list of (weight, (x, y, z))
vector is from sky to ground

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{caribuformat\_to\_ratpformat() (in module sky)@\spxentry{caribuformat\_to\_ratpformat()}\spxextra{in module sky}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:sky.caribuformat_to_ratpformat}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{sky.}}\sphinxbfcode{\sphinxupquote{caribuformat\_to\_ratpformat}}}{\emph{\DUrole{n}{directions}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Converts CARIBU format to RATP sky format
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{directions}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{tuples}}) \textendash{} list of all each sky directions, such as one direction is (perez coeff, (x, y, z)) where vector looks from sky to floor

\sphinxlineitem{Returns}
\sphinxAtStartPar
\begin{itemize}
\item {} 
\sphinxAtStartPar
pc : perez coefficients for each direction

\item {} 
\sphinxAtStartPar
az : azimut of each direction, x+ = 0.

\item {} 
\sphinxAtStartPar
h : elevation of each direction

\end{itemize}


\end{description}\end{quote}

\sphinxAtStartPar
:rtype:list, list, list

\end{fulllineitems}

\index{RATPsky() (in module sky)@\spxentry{RATPsky()}\spxextra{in module sky}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:sky.RATPsky}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{sky.}}\sphinxbfcode{\sphinxupquote{RATPsky}}}{\emph{\DUrole{n}{skytype}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Creates a pyratp.skyvault
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{skytype}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}\sphinxstyleliteralemphasis{\sphinxupquote{ or }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} the environment{[}“sky”{]} from the LightVegeManager inputs. It is either:
* \sphinxcode{\sphinxupquote{"turtle46"}}
* a filepath
* {[}nb\_azimut, nb\_elevation, “soc” or “uoc”{]}, nb\_azimut is the number of azimut directions and nb\_elevation the number of zenital directions for cutting out the sky

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} if skytype is not one of the curretn 3 possibilities

\sphinxlineitem{Returns}
\sphinxAtStartPar
a sky in RATP format

\sphinxlineitem{Return type}
\sphinxAtStartPar
pyratp.skyvault

\end{description}\end{quote}

\end{fulllineitems}

\index{CARIBUsky() (in module sky)@\spxentry{CARIBUsky()}\spxextra{in module sky}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:sky.CARIBUsky}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{sky.}}\sphinxbfcode{\sphinxupquote{CARIBUsky}}}{\emph{\DUrole{n}{skytype}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Build a sky in CARIBU format
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{skytype}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}\sphinxstyleliteralemphasis{\sphinxupquote{ or }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} 
\sphinxAtStartPar
the environment{[}“sky”{]} from the LightVegeManager inputs. It is either:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"turtle46"}}

\item {} 
\sphinxAtStartPar
a filepath

\item {} 
\sphinxAtStartPar
{[}nb\_azimut, nb\_elevation, “soc” or “uoc”{]}, nb\_azimut is the number of azimut directions and nb\_zenith the number of zenital directions for cutting out the sky

\end{itemize}


\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} if skytype is not one of the curretn 3 possibilities

\sphinxlineitem{Returns}
\sphinxAtStartPar
a list of the directions representing the sky.
each entry of the list is a tuple (weight, vector), where weight is a float for the weight the direction and vector, a tuple (x, y, z),
representing the position of the sky direction, from sky to the ground

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{discrete\_sky() (in module sky)@\spxentry{discrete\_sky()}\spxextra{in module sky}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:sky.discrete_sky}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{sky.}}\sphinxbfcode{\sphinxupquote{discrete\_sky}}}{\emph{\DUrole{n}{n\_azimuts}}, \emph{\DUrole{n}{n\_zeniths}}, \emph{\DUrole{n}{sky\_type}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Cuts out a sky following input number of directions
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{n\_azimuts}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} number of azimut directions of the sky

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{n\_zeniths}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} number of elevations directions of the sky

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{sky\_type}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} \sphinxcode{\sphinxupquote{"soc"}} or \sphinxcode{\sphinxupquote{"uoc"}}

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
4 output lists of length n\_azimuts * n\_zeniths
* ele: elevations in degrees (angle soil to sky)
* azi: azimuts in degrees
* omega: solid angle of directions
* pc: relative contribution of directions to incident diffuse radiation

\sphinxlineitem{Return type}
\sphinxAtStartPar
list, list, list, list

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{stems}} module}
\label{\detokenize{reference:module-stems}}\label{\detokenize{reference:stems-module}}\index{module@\spxentry{module}!stems@\spxentry{stems}}\index{stems@\spxentry{stems}!module@\spxentry{module}}

\subsubsection{stems}
\label{\detokenize{reference:stems}}
\sphinxAtStartPar
Manages stems element (opaque)
\index{extract\_stems\_from\_MTG() (in module stems)@\spxentry{extract\_stems\_from\_MTG()}\spxextra{in module stems}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:stems.extract_stems_from_MTG}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{stems.}}\sphinxbfcode{\sphinxupquote{extract\_stems\_from\_MTG}}}{\emph{\DUrole{n}{MTG}}, \emph{\DUrole{n}{entity\_id}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Extracts stems element from a MTG table
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{MTG}} (\sphinxstyleliteralemphasis{\sphinxupquote{openalea.mtg.mtg.MTG}}) \textendash{} MTG table descripting plant elements

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{entity\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} indice of the corresponding geometric scene of the MTG table scene in the LightVegeManager inputs

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{stems}} is a list where each entry is a tuple (element indice, entity\_id)

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{manage\_stems\_for\_ratp() (in module stems)@\spxentry{manage\_stems\_for\_ratp()}\spxextra{in module stems}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:stems.manage_stems_for_ratp}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{stems.}}\sphinxbfcode{\sphinxupquote{manage\_stems\_for\_ratp}}}{\emph{\DUrole{n}{stems\_id}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{ratp\_parameters}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Adds a specy to separate stems from leaves in vegetation parameters
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{stems\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}) \textendash{} list of tuple (element\_id, specy\_id)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dict that matches new element indices in trimesh with specy indice and
input element indice
\sphinxcode{\sphinxupquote{matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ratp\_parameters}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} RATP parameters from inputs of LightVegeManager

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} if too many stems elements are identified comparing to the total number of elements cumulated over all species

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{sun}} module}
\label{\detokenize{reference:module-sun}}\label{\detokenize{reference:sun-module}}\index{module@\spxentry{module}!sun@\spxentry{sun}}\index{sun@\spxentry{sun}!module@\spxentry{module}}

\subsubsection{sun}
\label{\detokenize{reference:sun}}
\sphinxAtStartPar
Build a sun respecting each light model format

\sphinxAtStartPar
For computing the sun position you can either use CARIBU or RATP algorithm, which slightly change
in the process
\index{ratp\_sun() (in module sun)@\spxentry{ratp\_sun()}\spxextra{in module sun}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:sun.ratp_sun}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{sun.}}\sphinxbfcode{\sphinxupquote{ratp\_sun}}}{\emph{\DUrole{n}{day}}, \emph{\DUrole{n}{hour}}, \emph{\DUrole{n}{coordinates}}, \emph{\DUrole{n}{truesolartime}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Converts output RATP sundirection routine to CARIBU light format
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{day}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} input day

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{hour}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} input hour

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{coordinates}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} {[}latitude, longitude, timezone{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{truesolartime}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} activates true solar time or local time to compute sun position

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
sun direction in a tuple with cartesian coordinates (x,y,z), vector is oriented from sky to ground

\sphinxlineitem{Return type}
\sphinxAtStartPar
tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{caribu\_sun() (in module sun)@\spxentry{caribu\_sun()}\spxextra{in module sun}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:sun.caribu_sun}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{sun.}}\sphinxbfcode{\sphinxupquote{caribu\_sun}}}{\emph{\DUrole{n}{day}}, \emph{\DUrole{n}{hour}}, \emph{\DUrole{n}{coordinates}}, \emph{\DUrole{n}{truesolartime}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Compute sun direction from CARIBU algorithm
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{day}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} input day

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{hour}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} input hour

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{coordinates}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} {[}latitude, longitude, timezone{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{truesolartime}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} activates true solar time or local time to compute sun position

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
sun direction in a tuple with cartesian coordinates (x,y,z), vector is oriented from sky to ground

\sphinxlineitem{Return type}
\sphinxAtStartPar
tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{print\_sun() (in module sun)@\spxentry{print\_sun()}\spxextra{in module sun}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:sun.print_sun}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{sun.}}\sphinxbfcode{\sphinxupquote{print\_sun}}}{\emph{\DUrole{n}{day}}, \emph{\DUrole{n}{hour}}, \emph{\DUrole{n}{coordinates}}, \emph{\DUrole{n}{truesolartime}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Prints sun position ouputs from RATP and CARIBU algorithm with the same inputs
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{day}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} input day

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{hour}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} input hour

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{coordinates}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} {[}latitude, longitude, timezone{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{truesolartime}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} activates true solar time or local time to compute sun position

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{tesselator}} module}
\label{\detokenize{reference:module-tesselator}}\label{\detokenize{reference:tesselator-module}}\index{module@\spxentry{module}!tesselator@\spxentry{tesselator}}\index{tesselator@\spxentry{tesselator}!module@\spxentry{module}}

\subsubsection{tesselator}
\label{\detokenize{reference:tesselator}}
\sphinxAtStartPar
Handles tesselation of a triangulation, the subdivision of triangulation.
The tesselation was initially made to have a better matching of a triangle mesh in a grid of voxels
and avoid triangle to be located in several voxels

\sphinxAtStartPar
Tesselation operates as a recursive function until a certain level is reached
\index{whichvoxel() (in module tesselator)@\spxentry{whichvoxel()}\spxextra{in module tesselator}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:tesselator.whichvoxel}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{tesselator.}}\sphinxbfcode{\sphinxupquote{whichvoxel}}}{\emph{\DUrole{n}{p}}, \emph{\DUrole{n}{mygrid}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Returns in which voxel p is located
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{p}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ or }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}) \textendash{} 3D vector located in the grid

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{mygrid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} RATP grid

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
returns the voxels where p is located in a list {[}kx, ky, kz{]} where ki is the indice
voxel on each axis, {[}0, 0, 0{]} is origin voxel

\sphinxlineitem{Return type}
\sphinxAtStartPar
list

\end{description}\end{quote}

\end{fulllineitems}

\index{samevoxel() (in module tesselator)@\spxentry{samevoxel()}\spxextra{in module tesselator}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:tesselator.samevoxel}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{tesselator.}}\sphinxbfcode{\sphinxupquote{samevoxel}}}{\emph{\DUrole{n}{voxels}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Check if all voxels in list voxels are the same
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{voxels}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} list of voxels in format {[}kx, ky, kz{]}

\sphinxlineitem{Returns}
\sphinxAtStartPar
if all elements of voxels are the same

\sphinxlineitem{Return type}
\sphinxAtStartPar
bool

\end{description}\end{quote}

\end{fulllineitems}

\index{tesselate() (in module tesselator)@\spxentry{tesselate()}\spxextra{in module tesselator}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:tesselator.tesselate}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{tesselator.}}\sphinxbfcode{\sphinxupquote{tesselate}}}{\emph{\DUrole{n}{mygrid}}, \emph{\DUrole{n}{triangle}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Check if the triangle is strictly inside a voxel or between several voxels. If so, it cuts out
triangle in 4 smaller triangles.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{mygrid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} RATP voxels grid

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangle}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}) \textendash{} triangle represented by its 3 vertices \sphinxcode{\sphinxupquote{triangle = {[}(x1, y1, z1), (x2, y2, z2), (x3, y3, z3){]}}}

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
\begin{itemize}
\item {} 
\sphinxAtStartPar
if the triangle is inside a voxel, it returns the input triangle in a 1\sphinxhyphen{}list

\item {} 
\sphinxAtStartPar
else if the triangle is between several voxels, it cuts out triangle in four smaller triangles from its vertices and barycenter

\end{itemize}


\sphinxlineitem{Return type}
\sphinxAtStartPar
list of triangle

\end{description}\end{quote}

\end{fulllineitems}

\index{tesselate2() (in module tesselator)@\spxentry{tesselate2()}\spxextra{in module tesselator}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:tesselator.tesselate2}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{tesselator.}}\sphinxbfcode{\sphinxupquote{tesselate2}}}{\emph{\DUrole{n}{triangle}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Same as :func:tesselate but without the grid matching
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangle}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}) \textendash{} triangle represented by its 3 vertices \sphinxcode{\sphinxupquote{triangle = {[}(x1, y1, z1), (x2, y2, z2), (x3, y3, z3){]}}}

\sphinxlineitem{Returns}
\sphinxAtStartPar
it cuts out triangle in four smaller triangles from its vertices and barycenter

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of triangle

\end{description}\end{quote}

\end{fulllineitems}

\index{iterate\_trianglesingrid() (in module tesselator)@\spxentry{iterate\_trianglesingrid()}\spxextra{in module tesselator}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:tesselator.iterate_trianglesingrid}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{tesselator.}}\sphinxbfcode{\sphinxupquote{iterate\_trianglesingrid}}}{\emph{\DUrole{n}{triangle}}, \emph{\DUrole{n}{mygrid}}, \emph{\DUrole{n}{level}}, \emph{\DUrole{n}{levelmax}}, \emph{\DUrole{n}{triangles\_shape}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Recursion on a triangle, while its subdivision doesn’t match an RATP grid or exceed a certain level of tesselation
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangle}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}) \textendash{} triangle represented by its 3 vertices \sphinxcode{\sphinxupquote{triangle = {[}(x1, y1, z1), (x2, y2, z2), (x3, y3, z3){]}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{mygrid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} RATP voxels grid

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{level}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} current level of tesselation, i.e. how many times we cut out the initial triangle

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{levelmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} final level of tesselation to not be exceeded

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangles\_shape}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{triangles}}) \textendash{} list of triangles used to stock new triangles or input \sphinxcode{\sphinxupquote{triangle}} if no tesselation is computed

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{triangles\_shape}} updates with input \sphinxcode{\sphinxupquote{triangle}} or new triangles if tesselation was activated

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of triangles

\end{description}\end{quote}

\end{fulllineitems}

\index{iterate\_triangles() (in module tesselator)@\spxentry{iterate\_triangles()}\spxextra{in module tesselator}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:tesselator.iterate_triangles}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{tesselator.}}\sphinxbfcode{\sphinxupquote{iterate\_triangles}}}{\emph{\DUrole{n}{triangle}}, \emph{\DUrole{n}{level}}, \emph{\DUrole{n}{levelmax}}, \emph{\DUrole{n}{triangles\_shape}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Subdivide a triangle until its tesselation reaches levelmax. It stocks the new triangles in \sphinxcode{\sphinxupquote{triangle\_shape}}
Recursive function
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangle}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{tuple}}) \textendash{} triangle represented by its 3 vertices \sphinxcode{\sphinxupquote{triangle = {[}(x1, y1, z1), (x2, y2, z2), (x3, y3, z3){]}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{level}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} current level of tesselation, i.e. how many times we cut out the initial triangle

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{levelmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} final level of tesselation to not be exceeded

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangles\_shape}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{triangles}}) \textendash{} list of triangles used to stock new triangles or input \sphinxcode{\sphinxupquote{triangle}} if no tesselation is computed

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{triangles\_shape}} updates with new triangles from tesselation

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of triangles

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{transfer}} module}
\label{\detokenize{reference:module-transfer}}\label{\detokenize{reference:transfer-module}}\index{module@\spxentry{module}!transfer@\spxentry{transfer}}\index{transfer@\spxentry{transfer}!module@\spxentry{module}}

\subsubsection{transfer}
\label{\detokenize{reference:transfer}}
\sphinxAtStartPar
Handles transfer of LightVegeManager results to plant Models.

\sphinxAtStartPar
Currently, it manages CN\sphinxhyphen{}Wheat and l\sphinxhyphen{}egume. Only l\sphinxhyphen{}egume needs additionnal processes to
converts Dataframe results in a compatible format.

\sphinxAtStartPar
l\sphinxhyphen{}egume expects the absorb PAR either per plant or locally following a grid of voxels, and the transmitted PAR
locally following a grid of voxels. Here, we will convert and transform results for CARIBU and RATP to those l\sphinxhyphen{}egume format.
\index{transfer\_ratp\_legume() (in module transfer)@\spxentry{transfer\_ratp\_legume()}\spxextra{in module transfer}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:transfer.transfer_ratp_legume}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{transfer.}}\sphinxbfcode{\sphinxupquote{transfer\_ratp\_legume}}}{\emph{\DUrole{n}{m\_lais}}, \emph{\DUrole{n}{energy}}, \emph{\DUrole{n}{ratp\_grid}}, \emph{\DUrole{n}{voxels\_outputs}}, \emph{\DUrole{n}{nb0}}, \emph{\DUrole{n}{epsilon}\DUrole{o}{=}\DUrole{default_value}{1e\sphinxhyphen{}08}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Transfers LightVegeManager outputs from RATP to l\sphinxhyphen{}egume
Absorb and transmitted PAR will follow a RATP grid of voxels, matching the dimensions of intern l\sphinxhyphen{}egume grid of voxels.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{m\_lais}} (\sphinxstyleliteralemphasis{\sphinxupquote{numpy.array}}) \textendash{} leaf area represented in a numpy.array of dimension
{[}number of species, number of z layers, number of y layers, number of x layers{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{energy}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} input energy

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ratp\_grid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} RATP grid of voxels

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{voxels\_outputs}} (\sphinxstyleliteralemphasis{\sphinxupquote{pandas.Dataframe}}) \textendash{} results from LightVegeManager

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{nb0}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} number of empty layers from top of the canopy and maximum z layers in m\_lais

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{epsilon}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} criteria of minimum intercepted portion of PAR in a non empty voxel

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar

\sphinxAtStartPar
two array with lighting informations
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{res\_abs\_i}}: absorb PAR in each voxel for RATP grid of voxels. It has the same dimensions as \sphinxcode{\sphinxupquote{m\_lais}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{res\_trans}}: transmitted PAR in each voxel, i.e. the energy leaving the voxels from input rays. This value is not dependent on specy

\end{itemize}

\sphinxAtStartPar
dimensions are (number of z layers, number of y layers, number of x layers)


\sphinxlineitem{Return type}
\sphinxAtStartPar
numpy.array, numpy.array

\end{description}\end{quote}

\end{fulllineitems}

\index{transfer\_caribu\_legume() (in module transfer)@\spxentry{transfer\_caribu\_legume()}\spxextra{in module transfer}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:transfer.transfer_caribu_legume}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{transfer.}}\sphinxbfcode{\sphinxupquote{transfer\_caribu\_legume}}}{\emph{\DUrole{n}{energy}}, \emph{\DUrole{n}{skylayer}}, \emph{\DUrole{n}{id}}, \emph{\DUrole{n}{elements\_outputs}}, \emph{\DUrole{n}{sensors\_outputs}}, \emph{\DUrole{n}{sensors\_dxyz}}, \emph{\DUrole{n}{sensors\_nxyz}}, \emph{\DUrole{n}{m\_lais}}, \emph{\DUrole{n}{list\_invar}}, \emph{\DUrole{n}{list\_lstring}}, \emph{\DUrole{n}{list\_dicFeuilBilanR}}, \emph{\DUrole{n}{infinite}}, \emph{\DUrole{n}{epsilon}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Transfers LightVegeManager outputs from CARIBU to l\sphinxhyphen{}egume
We will update list\_invar which stores the total intercepted energy for each plant, and return
an array storing transmitted energy following the intern grid of voxels in l\sphinxhyphen{}egume. To do so, we
used virtual sensors in CARIBU to get incoming radiations in selected locations.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{energy}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} input energy

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{skylayer}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} number of empty layers from top of the canopy and maximum z layers in m\_lais

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{id}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} list of indices of input scenes associated with l\sphinxhyphen{}egume

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{elements\_outputs}} (\sphinxstyleliteralemphasis{\sphinxupquote{pandas.Dataframe}}) \textendash{} Dataframe results of elements formatted by :func:outputs.out\_caribu\_elements

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{sensors\_outputs}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} 
\sphinxAtStartPar
lighting results of virtual sensors form CARIBU in the format for each bandwidth computed,

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{sensors\PYGZus{}outputs}\PYG{p}{[}\PYG{n}{band}\PYG{o}{+}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ Eabs}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{n}{sensor\PYGZus{}id} \PYG{p}{:} \PYG{n}{energy}\PYG{p}{\PYGZcb{}}
\PYG{n}{sensors\PYGZus{}outputs}\PYG{p}{[}\PYG{n}{band}\PYG{o}{+}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ Ei}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{n}{sensor\PYGZus{}id} \PYG{p}{:} \PYG{n}{energy}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{sensors\_dxyz}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} size of sides of a voxel in the grid of virtual sensors {[}dx, dy, dz{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{sensors\_nxyz}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} number of sensors in each direction in the grid {[}nx, ny, nz{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{m\_lais}} (\sphinxstyleliteralemphasis{\sphinxupquote{numpy.array}}) \textendash{} leaf area represented in a numpy.array of dimension
{[}number of species, number of z layers, number of y layers, number of x layers{]}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{list\_invar}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} from l\sphinxhyphen{}egume, each element corresponds to an input specy of l\sphinxhyphen{}egume. Each element is a dict invar stores instant intern variables of l\sphinxhyphen{}egume.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{list\_lstring}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} from l\sphinxhyphen{}egume, each element corresponds to an input specy of l\sphinxhyphen{}egume. Each element is a dict lstring stores the l\sphinxhyphen{}system of each plant

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{list\_dicFeuilBilanR}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} from l\sphinxhyphen{}egume, each element corresponds to an input specy of l\sphinxhyphen{}egume. Each element is a dict dicFeuiBilanR stores correspondances between voxels grid and each plant

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{infinite}} (\sphinxstyleliteralemphasis{\sphinxupquote{bool}}) \textendash{} if the user wishes to activate infinitisation of the grid

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{epsilon}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} criteria of minimum intercepted portion of PAR in a voxel (if res\_abs\_i is zero, l\sphinxhyphen{}egume will crash)

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} Virtual sensors and finite scene doesn’t work yet with CARIBU

\sphinxlineitem{Returns}
\sphinxAtStartPar
\begin{itemize}
\item {} 
\sphinxAtStartPar
it updates \sphinxcode{\sphinxupquote{list\_invar}} and its key entries \sphinxcode{\sphinxupquote{"parap"}} and \sphinxcode{\sphinxupquote{"parip"}}, each element if the scipy.array is the sum of all intercepted energy for each plant. This process is a rewrite of \sphinxcode{\sphinxupquote{calc\_paraF}} in ShootMorpho.py module of l\sphinxhyphen{}egume, adapted to LightVegeManager numerotation of triangles

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{res\_trans}} an array of transmitted energy for each voxel in a grid of dimensions \sphinxcode{\sphinxupquote{sensors\_dxyz * sensors\_nxyz}}

\end{itemize}


\sphinxlineitem{Return type}
\sphinxAtStartPar
numpy.array

\end{description}\end{quote}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{trianglesmesh}} module}
\label{\detokenize{reference:module-trianglesmesh}}\label{\detokenize{reference:trianglesmesh-module}}\index{module@\spxentry{module}!trianglesmesh@\spxentry{trianglesmesh}}\index{trianglesmesh@\spxentry{trianglesmesh}!module@\spxentry{module}}

\subsubsection{trianglesmesh}
\label{\detokenize{reference:trianglesmesh}}
\sphinxAtStartPar
It builds and handles triangulation mesh.

\sphinxAtStartPar
The main triangulation format in LightVegeManager is the CARIBU format:
scene (dict): a \sphinxtitleref{\{primitive\_id: {[}triangle,{]}\}} dict. A triangle is a list of 3\sphinxhyphen{}tuples points coordinates.
example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{scene} \PYG{o}{=} \PYG{p}{\PYGZob{}}   \PYG{c+c1}{\PYGZsh{} element 0}
            \PYG{l+m+mi}{0} \PYG{p}{:} \PYG{p}{[} 
                    \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,}  \PYG{c+c1}{\PYGZsh{} triangle 0 of element 0}
                    \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{20}\PYG{p}{,}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]} \PYG{c+c1}{\PYGZsh{} triangle 1 of element 0}
                \PYG{p}{]} \PYG{p}{,}

            \PYG{c+c1}{\PYGZsh{} element 1}
            \PYG{l+m+mi}{1} \PYG{p}{:} \PYG{p}{[}
                    \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{12}\PYG{p}{,}\PYG{l+m+mi}{12}\PYG{p}{,}\PYG{l+m+mi}{12}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{20}\PYG{p}{,}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{21}\PYG{p}{,}\PYG{l+m+mi}{22}\PYG{p}{,}\PYG{l+m+mi}{22}\PYG{p}{)}\PYG{p}{]}\PYG{p}{,} 
                    \PYG{p}{[}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{20}\PYG{p}{,}\PYG{l+m+mi}{30}\PYG{p}{)}\PYG{p}{,} \PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{,}\PYG{l+m+mi}{20}\PYG{p}{,}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{p}{]}
                \PYG{p}{]}
        \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\sphinxstrong{See also:}
\nopagebreak


\sphinxAtStartPar
For more details {\hyperref[\detokenize{inputs:inputs}]{\sphinxcrossref{\DUrole{std,std-ref}{Inputs description}}}}


\index{triangles\_entity() (in module trianglesmesh)@\spxentry{triangles\_entity()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.triangles_entity}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{triangles\_entity}}}{\emph{\DUrole{n}{cscene}}, \emph{\DUrole{n}{entity\_id}}, \emph{\DUrole{n}{matching\_ids}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Return a list of triangles belonging to the specy \sphinxcode{\sphinxupquote{entity\_id}}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cscene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} LightVegeManager triangulations mesh

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{entity\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} specy indice in matching\_ids

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
dict that matches new element indices in cscene with specy indice and
input element indice,
.. code:: matching\_ids = \{ new\_element\_id : (input\_element\_id, specy\_id)\}

\sphinxAtStartPar
this dict allows us to look how species there is the inputs geometric data


\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
list of triangles belonging to \sphinxcode{\sphinxupquote{entity\_id}} in \sphinxcode{\sphinxupquote{cscene}}, a triangle is \sphinxcode{\sphinxupquote{{[}(x1, y1, z1), (x2, y2, z2), (x3, y3, z3){]}}}

\sphinxlineitem{Return type}
\sphinxAtStartPar
list

\end{description}\end{quote}

\end{fulllineitems}

\index{globalid\_to\_elementid() (in module trianglesmesh)@\spxentry{globalid\_to\_elementid()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.globalid_to_elementid}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{globalid\_to\_elementid}}}{\emph{\DUrole{n}{cscene}}, \emph{\DUrole{n}{triangleid}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Return the element index in cscene from a global triangle indice,
as if triangles were in a list without a sorting by element.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cscene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} LightVegeManager triangulations mesh

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangleid}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} indice from 0 to total number of triangles in cscene

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{IndexError}} \textendash{} if triangleid \textgreater{} total number of triangles in cscene

\sphinxlineitem{Returns}
\sphinxAtStartPar
element indice where triangleid belongs in cscene

\sphinxlineitem{Return type}
\sphinxAtStartPar
int

\end{description}\end{quote}

\end{fulllineitems}

\index{globalid\_to\_triangle() (in module trianglesmesh)@\spxentry{globalid\_to\_triangle()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.globalid_to_triangle}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{globalid\_to\_triangle}}}{\emph{\DUrole{n}{cscene}}, \emph{\DUrole{n}{triangleid}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Return the corresponding triangle in cscene from a global triangle indice,
as if triangles were in a list without a sorting by element.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cscene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} LightVegeManager triangulations mesh

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{triangleid}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} indice from 0 to total number of triangles in cscene

\end{itemize}

\sphinxlineitem{Raises}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{IndexError}} \textendash{} if triangleid \textgreater{} total number of triangles in cscene

\sphinxlineitem{Returns}
\sphinxAtStartPar
Corresponding triangle in cscene

\sphinxlineitem{Return type}
\sphinxAtStartPar
list of tuple

\end{description}\end{quote}

\end{fulllineitems}

\index{compute\_area\_max() (in module trianglesmesh)@\spxentry{compute\_area\_max()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.compute_area_max}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{compute\_area\_max}}}{\emph{\DUrole{n}{cscene}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Maximum triangle area in a triangulation
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cscene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} LightVegeManager triangulations mesh

\sphinxlineitem{Returns}
\sphinxAtStartPar
maximum triangle area in \sphinxcode{\sphinxupquote{cscene}}

\sphinxlineitem{Return type}
\sphinxAtStartPar
float

\end{description}\end{quote}

\end{fulllineitems}

\index{compute\_minmax\_coord() (in module trianglesmesh)@\spxentry{compute\_minmax\_coord()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.compute_minmax_coord}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{compute\_minmax\_coord}}}{\emph{\DUrole{n}{cscene}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Maximum and minimum point in all triangulation mesh
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cscene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} LightVegeManager triangulations mesh

\sphinxlineitem{Returns}
\sphinxAtStartPar
minimum point, maximum point

\sphinxlineitem{Return type}
\sphinxAtStartPar
list, list

\end{description}\end{quote}

\end{fulllineitems}

\index{compute\_trilenght\_max() (in module trianglesmesh)@\spxentry{compute\_trilenght\_max()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.compute_trilenght_max}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{compute\_trilenght\_max}}}{\emph{\DUrole{n}{cscene}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Search for maximum side of an axis oriented voxel where all triangles could fit in
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cscene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} LightVegeManager triangulations mesh

\sphinxlineitem{Returns}
\sphinxAtStartPar
maximum side of an axis oriented voxel where all triangles in cscene could fit in

\sphinxlineitem{Return type}
\sphinxAtStartPar
float

\end{description}\end{quote}

\end{fulllineitems}

\index{isatriangle() (in module trianglesmesh)@\spxentry{isatriangle()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.isatriangle}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{isatriangle}}}{\emph{\DUrole{n}{t}}}{}
\pysigstopsignatures
\end{fulllineitems}

\index{chain\_triangulations() (in module trianglesmesh)@\spxentry{chain\_triangulations()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.chain_triangulations}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{chain\_triangulations}}}{\emph{\DUrole{n}{scenes}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Aggregates all input geometric scenes in one global triangulation
\begin{quote}

\sphinxAtStartPar
Current known formats:
\begin{itemize}
\item {} 
\sphinxAtStartPar
plantGL scene

\item {} 
\sphinxAtStartPar
VGX file

\item {} 
\sphinxAtStartPar
CARIBU triangulation format (which is used in LightVegeManager for the global scene)

\item {} 
\sphinxAtStartPar
MTG table with \sphinxcode{\sphinxupquote{"geometry"}} identifier

\item {} 
\sphinxAtStartPar
l\sphinxhyphen{}egume grid: dict of two entries, leaf area through a voxels grid and leaf angle distribution, for each specy

\end{itemize}

\sphinxAtStartPar
Only l\sphinxhyphen{}egume grid can stores multiple species, otherwise each entry scene must represent one specy
\end{quote}
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{scenes}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} \sphinxcode{\sphinxupquote{geometric{[}"scenes"{]}}} from LightVegeManager inputs, list of geometric scenes. Scenes can be in different format in the list.

\sphinxlineitem{Returns}
\sphinxAtStartPar

\sphinxAtStartPar
it returns 4 objects
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{complete\_trimesh}}: global triangulation which aggregates all input scenes. It is in CARIBU format

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{matching\_ids}}: dict which stores correspondances between new element indice, element indice in the input and specy indice

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{legume\_grid}}: boolean specifing if at least one l\sphinxhyphen{}egume grid is among the input scenes

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{id\_legume\_scene}}: indice in the input scenes of a l\sphinxhyphen{}egume grid

\end{itemize}


\sphinxlineitem{Return type}
\sphinxAtStartPar
dict of list, dict of list, bool, int

\end{description}\end{quote}

\end{fulllineitems}

\index{vgx\_to\_caribu() (in module trianglesmesh)@\spxentry{vgx\_to\_caribu()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.vgx_to_caribu}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{vgx\_to\_caribu}}}{\emph{\DUrole{n}{file}}, \emph{\DUrole{n}{id\_element}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Reads VGX file and converts them in CARIBU scene format
line is a leaf triangle if R column != 42
:param file: path name of the file
:type file: string
:param id\_element: element indice where the triangulation will be stored
:type id\_element: int
:return: triangulation in CARIBU format \sphinxcode{\sphinxupquote{\{id\_element : {[}triangle,{]}\}}}
:rtype: dict of list

\end{fulllineitems}

\index{apply\_transformations() (in module trianglesmesh)@\spxentry{apply\_transformations()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.apply_transformations}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{apply\_transformations}}}{\emph{\DUrole{n}{cscene}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{transformations}}, \emph{\DUrole{n}{cscene\_unit}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Applies geometric transformations on some part of the triangulation set in input datas
Each transformation applies on all triangles from the same input scene.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cscene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} LightVegeManager triangulations mesh

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
dict that matches new element indices in cscene with specy indice and
input element indice,

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{matching\PYGZus{}ids} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{n}{new\PYGZus{}element\PYGZus{}id} \PYG{p}{:} \PYG{p}{(}\PYG{n}{input\PYGZus{}element\PYGZus{}id}\PYG{p}{,} \PYG{n}{specy\PYGZus{}id}\PYG{p}{)}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
this dict allows us to look how species there is the inputs geometric data


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{transformations}} \textendash{} 
\sphinxAtStartPar
dict containing which geometric to apply on which element

\sphinxAtStartPar
Possible transformations:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}"scenes unit{]} = \{id\_scene: unit\}}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}"rescale"{]} = \{id\_scene: h\}}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}"translate"{]} = \{id\_scene: vector\}}}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{{[}"xyz orientation"{]} = \{id\_scene: orientation\}}}

\end{itemize}


\end{itemize}

\end{description}\end{quote}

\sphinxAtStartPar
\sphinxcode{\sphinxupquote{id\_scene}} is the index in the input geometric scenes list
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cscene\_unit}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} measure unit of cscene

\sphinxlineitem{Raises}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} unit is not in the list \sphinxcode{\sphinxupquote{{[}\textquotesingle{}mm\textquotesingle{},\textquotesingle{}cm\textquotesingle{},\textquotesingle{}dm\textquotesingle{},\textquotesingle{}m\textquotesingle{},\textquotesingle{}dam\textquotesingle{},\textquotesingle{}hm\textquotesingle{},\textquotesingle{}km\textquotesingle{}{]}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} unit is not in the list \sphinxcode{\sphinxupquote{{[}\textquotesingle{}mm\textquotesingle{},\textquotesingle{}cm\textquotesingle{},\textquotesingle{}dm\textquotesingle{},\textquotesingle{}m\textquotesingle{},\textquotesingle{}dam\textquotesingle{},\textquotesingle{}hm\textquotesingle{},\textquotesingle{}km\textquotesingle{}{]}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ValueError}} \textendash{} xyz orientation is not one of \sphinxcode{\sphinxupquote{"x+ = S", "x+ = E", "x+ = W", "x+ = N"}}

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{cscene}} with transformations applied to inputs scene parts in the global mesh

\sphinxlineitem{Return type}
\sphinxAtStartPar
dict of list

\end{description}\end{quote}

\end{fulllineitems}

\index{create\_heterogeneous\_canopy() (in module trianglesmesh)@\spxentry{create\_heterogeneous\_canopy()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.create_heterogeneous_canopy}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{create\_heterogeneous\_canopy}}}{\emph{\DUrole{n}{geometrical\_model}}, \emph{\DUrole{n}{mtg}\DUrole{o}{=}\DUrole{default_value}{None}}, \emph{\DUrole{n}{nplants}\DUrole{o}{=}\DUrole{default_value}{50}}, \emph{\DUrole{n}{var\_plant\_position}\DUrole{o}{=}\DUrole{default_value}{0.03}}, \emph{\DUrole{n}{var\_leaf\_inclination}\DUrole{o}{=}\DUrole{default_value}{0.157}}, \emph{\DUrole{n}{var\_leaf\_azimut}\DUrole{o}{=}\DUrole{default_value}{1.57}}, \emph{\DUrole{n}{var\_stem\_azimut}\DUrole{o}{=}\DUrole{default_value}{0.157}}, \emph{\DUrole{n}{plant\_density}\DUrole{o}{=}\DUrole{default_value}{250}}, \emph{\DUrole{n}{inter\_row}\DUrole{o}{=}\DUrole{default_value}{0.15}}, \emph{\DUrole{n}{id\_type}\DUrole{o}{=}\DUrole{default_value}{None}}, \emph{\DUrole{n}{seed}\DUrole{o}{=}\DUrole{default_value}{None}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Duplicate a plant in order to obtain a heterogeneous canopy.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{nplants}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} the desired number of duplicated plants

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{var\_plant\_position}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} variability for plant position (m)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{var\_leaf\_inclination}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} variability for leaf inclination (rad)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{var\_leaf\_azimut}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} variability for leaf azimut (rad)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{var\_stem\_azimut}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} variability for stem azimut (rad)

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{id\_type}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} precise how to set the shape id of the elements : None, plant or organ

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
duplicated heterogenous scene and its domain

\sphinxlineitem{Return type}
\sphinxAtStartPar
openalea.plantgl.all.Scene, (float)

\end{description}\end{quote}

\end{fulllineitems}

\index{random\_triangle\_generator() (in module trianglesmesh)@\spxentry{random\_triangle\_generator()}\spxextra{in module trianglesmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:trianglesmesh.random_triangle_generator}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{trianglesmesh.}}\sphinxbfcode{\sphinxupquote{random\_triangle\_generator}}}{\emph{\DUrole{n}{worldsize}\DUrole{o}{=}\DUrole{default_value}{(0, 100)}}, \emph{\DUrole{n}{spheresize}\DUrole{o}{=}\DUrole{default_value}{(1.0, 1.0)}}, \emph{\DUrole{n}{sigma\_angle}\DUrole{o}{=}\DUrole{default_value}{(3.141592653589793, 3.141592653589793)}}, \emph{\DUrole{n}{theta\_angle}\DUrole{o}{=}\DUrole{default_value}{(0.7853981633974483, 0.6283185307179586)}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Generate a random based on parameters

\sphinxAtStartPar
Vertices are generated on a surface of a sphere
\begin{description}
\sphinxlineitem{Args:}
\sphinxAtStartPar
worldsize (tuple, optional): min and max where sphere center can be generated. Defaults to (0,100).
spheresize (tuple, optional): mean and std of the sphere size. Defaults to (1.,1.).
sigma\_angle (tuple, optional): mean and std of the spherical angle on xy plane. Defaults to (math.pi, math.pi).
theta\_angle (tuple, optional): mean and std of the zenithal angle. Defaults to (math.pi/4, math.pi/5).

\sphinxlineitem{Returns:}
\sphinxAtStartPar
list of 3 3\sphinxhyphen{}tuples: triangles defined by 3 xyz points

\end{description}

\end{fulllineitems}



\subsection{\sphinxstyleliteralintitle{\sphinxupquote{voxelsmesh}} module}
\label{\detokenize{reference:module-voxelsmesh}}\label{\detokenize{reference:voxelsmesh-module}}\index{module@\spxentry{module}!voxelsmesh@\spxentry{voxelsmesh}}\index{voxelsmesh@\spxentry{voxelsmesh}!module@\spxentry{module}}

\subsubsection{voxelsmesh}
\label{\detokenize{reference:voxelsmesh}}
\sphinxAtStartPar
Builds and handles axis oriented voxels mesh
\index{compute\_grid\_size\_from\_trimesh() (in module voxelsmesh)@\spxentry{compute\_grid\_size\_from\_trimesh()}\spxextra{in module voxelsmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:voxelsmesh.compute_grid_size_from_trimesh}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{voxelsmesh.}}\sphinxbfcode{\sphinxupquote{compute\_grid\_size\_from\_trimesh}}}{\emph{\DUrole{n}{pmin}}, \emph{\DUrole{n}{pmax}}, \emph{\DUrole{n}{dv}}, \emph{\DUrole{n}{grid\_slicing}\DUrole{o}{=}\DUrole{default_value}{None}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Dynamically compute number of voxels for each axis in the grid
The grid is ajusted to be the smallest box containing another mesh
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{pmin}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} Minimum point of a mesh \sphinxcode{\sphinxupquote{{[}x, y, z{]}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{pmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} Maximum point of a mesh \sphinxcode{\sphinxupquote{{[}x, y, z{]}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{dv}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} size a voxel in each direction \sphinxcode{\sphinxupquote{{[}dx, dy, dz{]}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{grid\_slicing}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} possibility to force the ground to be at z=0, defaults to None

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
number of voxels in each direction x, y and z

\sphinxlineitem{Return type}
\sphinxAtStartPar
int, int, int

\end{description}\end{quote}

\end{fulllineitems}

\index{tesselate\_trimesh\_on\_grid() (in module voxelsmesh)@\spxentry{tesselate\_trimesh\_on\_grid()}\spxextra{in module voxelsmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:voxelsmesh.tesselate_trimesh_on_grid}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{voxelsmesh.}}\sphinxbfcode{\sphinxupquote{tesselate\_trimesh\_on\_grid}}}{\emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{ratpgrid}}, \emph{\DUrole{n}{levelmax}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Loop on all triangles of a triangulation to tesselate them for better matching a grid of voxels
Triangles will subdivide on sides of voxels respecting a certain maximum level
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} 
\sphinxAtStartPar
triangles mesh aggregated by indice elements

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}} \PYG{n+nb}{id} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle1}\PYG{p}{,} \PYG{n}{triangle2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ratpgrid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} RATP grid of voxels

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{levelmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} maximum level for subdividing triangles

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
a copy of trimesh with subdivided triangles

\sphinxlineitem{Return type}
\sphinxAtStartPar
dict of list

\end{description}\end{quote}

\end{fulllineitems}

\index{fill\_ratpgrid\_from\_trimesh() (in module voxelsmesh)@\spxentry{fill\_ratpgrid\_from\_trimesh()}\spxextra{in module voxelsmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:voxelsmesh.fill_ratpgrid_from_trimesh}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{voxelsmesh.}}\sphinxbfcode{\sphinxupquote{fill\_ratpgrid\_from\_trimesh}}}{\emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{ratpgrid}}, \emph{\DUrole{n}{stems\_id}\DUrole{o}{=}\DUrole{default_value}{None}}, \emph{\DUrole{n}{nb\_input\_scenes}\DUrole{o}{=}\DUrole{default_value}{0}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Fills a RATP grid from a triangulation.
It gives barycenters and areas of triangles to update the leaf area density in the corresponding
voxel.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} 
\sphinxAtStartPar
triangles mesh aggregated by indice elements

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}} \PYG{n+nb}{id} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle1}\PYG{p}{,} \PYG{n}{triangle2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
dict that matches new element indices in cscene with specy indice and
input element indice,

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{matching\PYGZus{}ids} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{n}{new\PYGZus{}element\PYGZus{}id} \PYG{p}{:} \PYG{p}{(}\PYG{n}{input\PYGZus{}element\PYGZus{}id}\PYG{p}{,} \PYG{n}{specy\PYGZus{}id}\PYG{p}{)}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
this dict allows us to look how species there is the inputs geometric data


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ratpgrid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} RATP grid of voxels

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{stems\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{2\sphinxhyphen{}tuple}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} list of potential stems element in the input scenes, defaults to None

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{nb\_input\_scenes}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} number of input geometrical scenes. It can be different with number of species if there is a l\sphinxhyphen{}egume grid in the input with several species in it, defaults to 0

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
copy of \sphinxcode{\sphinxupquote{ratpgrid}} with leaf area density values from barycenters and areas of the input triangles

\sphinxlineitem{Return type}
\sphinxAtStartPar
pyratp.grid

\end{description}\end{quote}

\end{fulllineitems}

\index{fill\_ratpgrid\_from\_legumescene() (in module voxelsmesh)@\spxentry{fill\_ratpgrid\_from\_legumescene()}\spxextra{in module voxelsmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:voxelsmesh.fill_ratpgrid_from_legumescene}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{voxelsmesh.}}\sphinxbfcode{\sphinxupquote{fill\_ratpgrid\_from\_legumescene}}}{\emph{\DUrole{n}{legumescene}}, \emph{\DUrole{n}{ratpgrid}}, \emph{\DUrole{n}{nb0}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Fills a RATP grid from a l\sphinxhyphen{}egume grid
It updates \sphinxcode{\sphinxupquote{ratpgrid}}.
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{legumescene}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
l\sphinxhyphen{}egume grid represented by a dict with two entries:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"LA"}}: equivalent to m\_lais in l\sphinxhyphen{}egume, a numpy.array of dimension \sphinxcode{\sphinxupquote{(nent, nz, ny, nx)}} which represents leaf area in each voxel for each specy. nz=0 is the top layer

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{"distrib"}}: equivalent to ls\_dif in l\sphinxhyphen{}egume, a numpy.array of dimension \sphinxcode{\sphinxupquote{(nent, nclasses)}} which represents the global leaf angle distribution for each input specy

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
legumescene is the only input geometric scene which can handle several species
\end{sphinxadmonition}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ratpgrid}} (\sphinxstyleliteralemphasis{\sphinxupquote{pyratp.grid}}) \textendash{} RATP grid of voxels. nz=0 is the top layer

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{nb0}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} number of empty layers from top of the canopy and maximum z layers in m\_lais

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{reduce\_layers\_from\_trimesh() (in module voxelsmesh)@\spxentry{reduce\_layers\_from\_trimesh()}\spxextra{in module voxelsmesh}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{reference:voxelsmesh.reduce_layers_from_trimesh}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{voxelsmesh.}}\sphinxbfcode{\sphinxupquote{reduce\_layers\_from\_trimesh}}}{\emph{\DUrole{n}{trimesh}}, \emph{\DUrole{n}{pmax}}, \emph{\DUrole{n}{dxyz}}, \emph{\DUrole{n}{nxyz}}, \emph{\DUrole{n}{matching\_ids}}, \emph{\DUrole{n}{ids}\DUrole{o}{=}\DUrole{default_value}{None}}}{}
\pysigstopsignatures
\sphinxAtStartPar
Number of empty layers in a grid of voxels, from the top of the canopy to the last expected layer.
It computes this number from a triangles mesh
\begin{quote}\begin{description}
\sphinxlineitem{Parameters}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{trimesh}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} 
\sphinxAtStartPar
triangles mesh aggregated by indice elements

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}} \PYG{n+nb}{id} \PYG{p}{:} \PYG{p}{[}\PYG{n}{triangle1}\PYG{p}{,} \PYG{n}{triangle2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{pmax}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} Maximum point of a mesh \sphinxcode{\sphinxupquote{{[}x, y, z{]}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{dxyz}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} size of sides of a voxel \sphinxcode{\sphinxupquote{{[}dx, dy, dz{]}}}

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{nxyz}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}) \textendash{} number of voxels in each direction \sphinxcode{\sphinxupquote{{[}nx, ny, nz{]}}}, nz is the expected number of layers

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{matching\_ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} 
\sphinxAtStartPar
dict that matches new element indices in cscene with specy indice and
input element indice,

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{matching\PYGZus{}ids} \PYG{o}{=} \PYG{p}{\PYGZob{}} \PYG{n}{new\PYGZus{}element\PYGZus{}id} \PYG{p}{:} \PYG{p}{(}\PYG{n}{input\PYGZus{}element\PYGZus{}id}\PYG{p}{,} \PYG{n}{specy\PYGZus{}id}\PYG{p}{)}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
this dict allows us to look how species there is the inputs geometric data


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{ids}} (\sphinxstyleliteralemphasis{\sphinxupquote{list}}\sphinxstyleliteralemphasis{\sphinxupquote{ of }}\sphinxstyleliteralemphasis{\sphinxupquote{int}}\sphinxstyleliteralemphasis{\sphinxupquote{, }}\sphinxstyleliteralemphasis{\sphinxupquote{optional}}) \textendash{} list of specy indices considered not empty, defaults to None

\end{itemize}

\sphinxlineitem{Returns}
\sphinxAtStartPar
number of empty layers between top of the canopy (represented by \sphinxcode{\sphinxupquote{trimesh}}) and \sphinxcode{\sphinxupquote{nxyz{[}2{]}}}

\sphinxlineitem{Return type}
\sphinxAtStartPar
int

\end{description}\end{quote}

\end{fulllineitems}



\chapter{Contact}
\label{\detokenize{index:contact}}
\sphinxAtStartPar
For any question, please submit to \sphinxurl{https://github.com/mwoussen/lightvegemanager/issues}.


\chapter{Authors}
\label{\detokenize{index:authors}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Maurane Woussen

\item {} 
\sphinxAtStartPar
Romain Barillot

\item {} 
\sphinxAtStartPar
Didier Combes

\item {} 
\sphinxAtStartPar
Gaëtan Louarn

\end{itemize}


\chapter{License}
\label{\detokenize{index:license}}
\sphinxAtStartPar
{\hyperref[\detokenize{index:module-lightvegemanager}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{lightvegemanager}}}}} is released under CeCILL\sphinxhyphen{}C License. See file \sphinxcode{\sphinxupquote{LICENSE}} for details.


\chapter{Funding}
\label{\detokenize{index:funding}}

\chapter{Research references}
\label{\detokenize{index:research-references}}

\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{search}

\end{itemize}


\renewcommand{\indexname}{Python Module Index}
\begin{sphinxtheindex}
\let\bigletter\sphinxstyleindexlettergroup
\bigletter{b}
\item\relax\sphinxstyleindexentry{basicgeometry}\sphinxstyleindexpageref{reference:\detokenize{module-basicgeometry}}
\item\relax\sphinxstyleindexentry{buildRATPscene}\sphinxstyleindexpageref{reference:\detokenize{module-buildRATPscene}}
\indexspace
\bigletter{c}
\item\relax\sphinxstyleindexentry{CARIBUinputs}\sphinxstyleindexpageref{reference:\detokenize{module-CARIBUinputs}}
\indexspace
\bigletter{d}
\item\relax\sphinxstyleindexentry{defaultvalues}\sphinxstyleindexpageref{reference:\detokenize{module-defaultvalues}}
\indexspace
\bigletter{l}
\item\relax\sphinxstyleindexentry{leafangles}\sphinxstyleindexpageref{reference:\detokenize{module-leafangles}}
\item\relax\sphinxstyleindexentry{lightvegemanager}\sphinxstyleindexpageref{index:\detokenize{module-lightvegemanager}}
\item\relax\sphinxstyleindexentry{LVM}\sphinxstyleindexpageref{reference:\detokenize{module-LVM}}
\indexspace
\bigletter{o}
\item\relax\sphinxstyleindexentry{outputs}\sphinxstyleindexpageref{reference:\detokenize{module-outputs}}
\indexspace
\bigletter{p}
\item\relax\sphinxstyleindexentry{plantGL}\sphinxstyleindexpageref{reference:\detokenize{module-plantGL}}
\indexspace
\bigletter{r}
\item\relax\sphinxstyleindexentry{RATPinputs}\sphinxstyleindexpageref{reference:\detokenize{module-RATPinputs}}
\indexspace
\bigletter{s}
\item\relax\sphinxstyleindexentry{sky}\sphinxstyleindexpageref{reference:\detokenize{module-sky}}
\item\relax\sphinxstyleindexentry{stems}\sphinxstyleindexpageref{reference:\detokenize{module-stems}}
\item\relax\sphinxstyleindexentry{sun}\sphinxstyleindexpageref{reference:\detokenize{module-sun}}
\indexspace
\bigletter{t}
\item\relax\sphinxstyleindexentry{tesselator}\sphinxstyleindexpageref{reference:\detokenize{module-tesselator}}
\item\relax\sphinxstyleindexentry{transfer}\sphinxstyleindexpageref{reference:\detokenize{module-transfer}}
\item\relax\sphinxstyleindexentry{trianglesmesh}\sphinxstyleindexpageref{reference:\detokenize{module-trianglesmesh}}
\indexspace
\bigletter{v}
\item\relax\sphinxstyleindexentry{voxelsmesh}\sphinxstyleindexpageref{reference:\detokenize{module-voxelsmesh}}
\item\relax\sphinxstyleindexentry{VTK}\sphinxstyleindexpageref{reference:\detokenize{module-VTK}}
\end{sphinxtheindex}

\renewcommand{\indexname}{Index}
\printindex
\end{document}